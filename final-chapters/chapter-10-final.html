<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chapter 10: 디버깅 기법 | 팹리스 검증 엔지니어가 되기 위한 UVM 완전정복</title>
  <style>
    /* =============================================
       UVM Book Publisher - Stylesheet
       Generated by Publisher Agent
       ============================================= */

    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap');

    :root {
      --bg: #ffffff;
      --text: #1a1a2e;
      --accent: #10b981;
      --accent-light: #10b98118;
      --code-bg: #1e1e2e;
      --code-text: #cdd6f4;
      --border: #e2e8f0;
      --blockquote-bg: #f0f9ff;
      --blockquote-border: #3b82f6;
      --table-header: #1e293b;
      --table-stripe: #f8fafc;
      --warning-bg: #fef3c7;
      --warning-border: #f59e0b;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      line-height: 1.85;
      color: var(--text);
      background: var(--bg);
      font-size: 16px;
    }

    /* === Reading Progress Bar === */
    .progress-bar {
      position: fixed;
      top: 0;
      left: 0;
      width: 0%;
      height: 3px;
      background: linear-gradient(90deg, var(--accent), #10b981cc);
      z-index: 9999;
      transition: width 0.1s;
    }

    /* === Cover Header === */
    .cover-header {
      background: linear-gradient(135deg, #10b98108, #10b98115);
      border-bottom: 3px solid var(--accent);
      padding: 32px 24px 24px;
      text-align: center;
      margin-bottom: 0;
    }
    .cover-part {
      display: inline-block;
      background: var(--accent);
      color: white;
      padding: 4px 16px;
      border-radius: 20px;
      font-size: 0.85em;
      font-weight: 600;
      letter-spacing: 0.5px;
      margin-bottom: 12px;
    }
    .cover-chapter-num {
      font-size: 2em;
      font-weight: 300;
      color: var(--accent);
      letter-spacing: 2px;
      opacity: 0.6;
    }

    /* === Main Content === */
    .content {
      max-width: 860px;
      margin: 0 auto;
      padding: 32px 24px 60px;
    }

    /* === TOC === */
    .toc {
      background: #f8fafc;
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 20px 28px;
      margin: 24px 0 32px;
    }
    .toc-title {
      font-size: 1.1em;
      color: var(--accent);
      margin-bottom: 12px;
      padding-bottom: 8px;
      border-bottom: 2px solid var(--border);
    }
    .toc ul { list-style: none; padding: 0; }
    .toc li { margin: 6px 0; }
    .toc li a {
      color: var(--text);
      text-decoration: none;
      font-weight: 500;
      font-size: 0.95em;
      padding: 4px 8px;
      border-radius: 4px;
      display: inline-block;
      transition: background 0.15s;
    }
    .toc li a:hover {
      background: var(--accent-light);
      color: var(--accent);
    }
    .toc li.toc-sub { padding-left: 24px; }
    .toc li.toc-sub a {
      font-weight: 400;
      font-size: 0.9em;
      color: #475569;
    }

    /* === Headings === */
    h1 {
      font-size: 2em;
      border-bottom: 3px solid var(--accent);
      padding-bottom: 12px;
      margin: 40px 0 20px;
      color: var(--text);
    }
    h1:first-child { margin-top: 0; }
    h2 {
      font-size: 1.5em;
      color: var(--accent);
      margin: 40px 0 16px;
      padding-bottom: 8px;
      border-bottom: 2px solid var(--border);
      scroll-margin-top: 16px;
    }
    h3 {
      font-size: 1.25em;
      margin: 28px 0 12px;
      color: #334155;
      scroll-margin-top: 16px;
    }
    h4 { font-size: 1.05em; margin: 20px 0 8px; color: #475569; }
    p { margin: 12px 0; }
    a { color: var(--accent); text-decoration: none; }
    a:hover { text-decoration: underline; }
    hr { border: none; border-top: 2px solid var(--border); margin: 32px 0; }
    strong { color: #1e293b; }
    img { max-width: 100%; border-radius: 8px; margin: 16px 0; }

    /* === Code Blocks === */
    pre {
      position: relative;
      background: var(--code-bg);
      border-radius: 12px;
      padding: 0;
      margin: 20px 0;
      overflow: hidden;
      box-shadow: 0 4px 16px rgba(0,0,0,0.12), 0 1px 4px rgba(0,0,0,0.08);
      border: 1px solid #313244;
    }
    pre::before {
      content: attr(data-lang);
      display: block;
      background: #313244;
      color: #a6adc8;
      padding: 8px 16px;
      font-size: 0.8em;
      font-family: 'Fira Code','JetBrains Mono',monospace;
      letter-spacing: 0.5px;
      border-bottom: 1px solid #45475a;
    }
    pre code {
      display: block;
      padding: 16px 20px;
      overflow-x: auto;
      font-family: 'Fira Code','JetBrains Mono','Cascadia Code','D2Coding',monospace;
      font-size: 0.88em;
      line-height: 1.75;
      tab-size: 4;
      color: var(--code-text);
    }
    pre code::-webkit-scrollbar { height: 6px; }
    pre code::-webkit-scrollbar-track { background: #1e1e2e; }
    pre code::-webkit-scrollbar-thumb { background: #45475a; border-radius: 3px; }

    code:not(pre code) {
      background: #f1f5f9;
      color: #be185d;
      padding: 2px 7px;
      border-radius: 5px;
      font-family: 'Fira Code','JetBrains Mono','D2Coding',monospace;
      font-size: 0.86em;
      border: 1px solid #e2e8f0;
    }

    /* Highlight.js Catppuccin */
    .hljs { background: transparent; color: #cdd6f4; }
    .hljs-keyword { color: #cba6f7; font-weight: bold; }
    .hljs-type { color: #f9e2af; }
    .hljs-string { color: #a6e3a1; }
    .hljs-number { color: #fab387; }
    .hljs-comment { color: #6c7086; font-style: italic; }
    .hljs-function, .hljs-title { color: #89b4fa; }
    .hljs-built_in { color: #f38ba8; }
    .hljs-variable { color: #cdd6f4; }
    .hljs-attr { color: #89dceb; }
    .hljs-meta { color: #f5c2e7; }
    .hljs-literal { color: #fab387; }

    /* === SVG Diagrams === */
    .svg-diagram {
      margin: 24px 0;
      padding: 20px;
      background: #fafbfc;
      border: 1px solid var(--border);
      border-radius: 12px;
      text-align: center;
      overflow-x: auto;
    }
    .svg-diagram svg { display: inline-block; }

    /* === Blockquotes === */
    blockquote {
      background: var(--blockquote-bg);
      border-left: 4px solid var(--blockquote-border);
      padding: 16px 20px;
      margin: 16px 0;
      border-radius: 0 8px 8px 0;
    }
    blockquote p:first-child { margin-top: 0; }
    blockquote p:last-child { margin-bottom: 0; }
    blockquote:has(strong:first-child) {
      background: var(--warning-bg);
      border-left-color: var(--warning-border);
    }

    /* === Tables === */
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 1px 4px rgba(0,0,0,0.06);
      border: 1px solid var(--border);
      font-size: 0.95em;
    }
    thead th {
      background: var(--table-header);
      color: white;
      padding: 12px 16px;
      text-align: left;
      font-weight: 600;
      font-size: 0.9em;
    }
    tbody td {
      padding: 10px 16px;
      border-bottom: 1px solid var(--border);
    }
    tbody tr:nth-child(even) { background: var(--table-stripe); }
    tbody tr:hover { background: var(--accent-light); }

    /* === Lists === */
    ul, ol { padding-left: 28px; margin: 12px 0; }
    li { margin: 6px 0; }
    li > ul, li > ol { margin: 4px 0; }

    /* === Details/Summary === */
    details {
      background: #f8fafc;
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 12px 16px;
      margin: 12px 0;
    }
    details summary {
      cursor: pointer;
      font-weight: 600;
      color: var(--accent);
    }
    details[open] summary { margin-bottom: 8px; }

    /* === Plain code blocks === */
    pre:has(code:not(.hljs)) {
      background: #fafbfc;
      border: 2px solid var(--border);
      box-shadow: none;
    }
    pre:has(code:not(.hljs))::before {
      background: #f1f5f9;
      color: #64748b;
      border-bottom-color: var(--border);
    }
    pre:has(code:not(.hljs)) code { color: #334155; }

    /* === Chapter Navigation === */
    .chapter-nav {
      display: flex;
      justify-content: space-between;
      gap: 16px;
      margin: 40px 0 20px;
      padding-top: 24px;
      border-top: 2px solid var(--border);
    }
    .chapter-nav a {
      display: flex;
      flex-direction: column;
      padding: 14px 20px;
      border: 1px solid var(--border);
      border-radius: 10px;
      text-decoration: none;
      transition: all 0.2s;
      min-width: 200px;
    }
    .chapter-nav a:hover {
      border-color: var(--accent);
      background: var(--accent-light);
      text-decoration: none;
    }
    .nav-prev { align-items: flex-start; }
    .nav-next { align-items: flex-end; }
    .nav-label {
      font-size: 0.8em;
      color: #94a3b8;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .nav-title { font-weight: 600; color: var(--accent); margin-top: 2px; }

    /* === Footer === */
    .book-footer {
      text-align: center;
      padding: 20px;
      margin-top: 40px;
      border-top: 1px solid var(--border);
      color: #94a3b8;
      font-size: 0.85em;
    }

    /* === Back to Top === */
    .back-to-top {
      position: fixed;
      bottom: 24px;
      right: 24px;
      width: 44px;
      height: 44px;
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      font-size: 20px;
      display: none;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
      transition: opacity 0.3s;
      z-index: 100;
    }
    .back-to-top.visible { display: flex; }

    /* === Print === */
    @media print {
      .progress-bar, .back-to-top, .chapter-nav, .toc { display: none !important; }
      body { font-size: 11pt; }
      .content { max-width: 100%; padding: 0; }
      .cover-header { break-after: page; }
      pre { box-shadow: none; border: 2px solid #ccc; break-inside: avoid; }
      .svg-diagram { break-inside: avoid; border: 1px solid #ccc; }
      table { break-inside: avoid; }
      h2, h3 { break-after: avoid; }
    }

    /* === Responsive === */
    @media (max-width: 640px) {
      .content { padding: 16px 12px 40px; font-size: 15px; }
      h1 { font-size: 1.5em; }
      h2 { font-size: 1.25em; }
      pre code { font-size: 0.8em; padding: 12px; }
      thead th, tbody td { padding: 8px 10px; font-size: 0.88em; }
      .svg-diagram { padding: 10px; }
      .toc { padding: 14px 18px; }
      .chapter-nav { flex-direction: column; }
      .chapter-nav a { min-width: unset; }
      .nav-next { align-items: flex-start; }
      .cover-chapter-num { font-size: 1.5em; }
    }
  </style>
</head>
<body>
  <!-- Reading Progress Bar -->
  <div class="progress-bar" id="progressBar"></div>

  
<header class="cover-header">
  <div class="cover-part" style="--part-color: #10b981">
    <span class="cover-part-label">Part 2: 깊이 파기</span>
  </div>
  <div class="cover-chapter-num">Chapter 10</div>
</header>

  <div class="content">
    <nav class="toc">
<h2 class="toc-title">목차</h2>
<ul>
<li><a href="#10-1-왜-체계적-디버깅인가">10.1 왜 체계적 디버깅인가</a></li>
  <li class="toc-sub"><a href="#10-1-1-quot-파형만-보면-되지-quot-실무의-현실">10.1.1 &quot;파형만 보면 되지?&quot; — 실무의 현실</a></li>
  <li class="toc-sub"><a href="#10-1-2-uvm-디버깅-도구-전체-맵">10.1.2 UVM 디버깅 도구 전체 맵</a></li>
  <li class="toc-sub"><a href="#10-1-3-디버깅-워크플로우">10.1.3 디버깅 워크플로우</a></li>
<li><a href="#10-2-uvm-메시지-시스템">10.2 UVM 메시지 시스템</a></li>
  <li class="toc-sub"><a href="#10-2-1-4가지-심각도-uvm-info-warning-error-fatal">10.2.1 4가지 심각도 — UVM_INFO / WARNING / ERROR / FATAL</a></li>
  <li class="toc-sub"><a href="#10-2-2-verbosity-레벨-low-medium-high-debug">10.2.2 Verbosity 레벨 — LOW / MEDIUM / HIGH / DEBUG</a></li>
  <li class="toc-sub"><a href="#10-2-3-명령줄-verbosity-제어-uvm-verbosity">10.2.3 명령줄 Verbosity 제어 (+UVM_VERBOSITY)</a></li>
  <li class="toc-sub"><a href="#10-2-4-컴포넌트별-verbosity-제어">10.2.4 컴포넌트별 Verbosity 제어</a></li>
  <li class="toc-sub"><a href="#10-2-5-메시지-필터링-실전-예제">10.2.5 메시지 필터링 실전 예제</a></li>
<li><a href="#10-3-파형-분석">10.3 파형 분석</a></li>
  <li class="toc-sub"><a href="#10-3-1-vcd-fsdb-파일-생성">10.3.1 VCD/FSDB 파일 생성</a></li>
  <li class="toc-sub"><a href="#10-3-2-파형-뷰어-dve-verdi-gtkwave">10.3.2 파형 뷰어 — DVE, Verdi, GTKWave</a></li>
  <li class="toc-sub"><a href="#10-3-3-rtl-신호와-uvm-로그-타임스탬프-연결">10.3.3 RTL 신호와 UVM 로그 타임스탬프 연결</a></li>
  <li class="toc-sub"><a href="#10-3-4-실전-mismatch-시점-파형-확인">10.3.4 실전: MISMATCH 시점 파형 확인</a></li>
<li><a href="#10-4-factory-override-디버깅">10.4 Factory Override 디버깅</a></li>
  <li class="toc-sub"><a href="#10-4-1-디버그-드라이버-교체-상세-로깅-버전">10.4.1 디버그 드라이버 교체 — 상세 로깅 버전</a></li>
  <li class="toc-sub"><a href="#10-4-2-런타임-컴포넌트-교환-패턴">10.4.2 런타임 컴포넌트 교환 패턴</a></li>
  <li class="toc-sub"><a href="#10-4-3-실전-드라이버-vs-모니터-문제-분리">10.4.3 실전: 드라이버 vs 모니터 문제 분리</a></li>
<li><a href="#10-5-흔한-uvm-에러-메시지-해석">10.5 흔한 UVM 에러 메시지 해석</a></li>
  <li class="toc-sub"><a href="#10-5-1-연결-에러-quot-port-is-not-connected-quot">10.5.1 연결 에러 — &quot;port is not connected&quot;</a></li>
  <li class="toc-sub"><a href="#10-5-2-factory-에러-quot-create-failed-quot">10.5.2 Factory 에러 — &quot;create failed&quot;</a></li>
  <li class="toc-sub"><a href="#10-5-3-phase-에러-quot-objection-raised-but-not-dropped-quot">10.5.3 Phase 에러 — &quot;objection raised but not dropped&quot;</a></li>
  <li class="toc-sub"><a href="#10-5-4-randomization-에러-quot-randomize-failed-quot">10.5.4 Randomization 에러 — &quot;randomize() failed&quot;</a></li>
  <li class="toc-sub"><a href="#10-5-5-config-db-에러-quot-config-db-get-failed-quot">10.5.5 Config DB 에러 — &quot;config_db::get failed&quot;</a></li>
  <li class="toc-sub"><a href="#10-5-6-에러-메시지-빠른-참조-표">10.5.6 에러 메시지 빠른 참조 표</a></li>
<li><a href="#10-6-실전-mismatch-원인-찾기">10.6 실전: MISMATCH 원인 찾기</a></li>
  <li class="toc-sub"><a href="#10-6-1-시나리오-의도적-버그-주입">10.6.1 시나리오 — 의도적 버그 주입</a></li>
  <li class="toc-sub"><a href="#10-6-2-단계별-디버깅-프로세스">10.6.2 단계별 디버깅 프로세스</a></li>
  <li class="toc-sub"><a href="#10-6-3-원인-발견-및-수정">10.6.3 원인 발견 및 수정</a></li>
  <li class="toc-sub"><a href="#10-6-4-수정-검증-regression-확인">10.6.4 수정 검증 — regression 확인</a></li>
<li><a href="#10-7-체크포인트">10.7 체크포인트</a></li>
  <li class="toc-sub"><a href="#10-7-1-셀프-체크">10.7.1 셀프 체크</a></li>
  <li class="toc-sub"><a href="#10-7-2-연습문제">10.7.2 연습문제</a></li>
  <li class="toc-sub"><a href="#10-7-3-part-2-마무리-amp-part-3-미리보기">10.7.3 Part 2 마무리 &amp; Part 3 미리보기</a></li>
  <li class="toc-sub"><a href="#다음-장-미리보기">다음 장 미리보기</a></li>
</ul>
</nav>
    <h1>Chapter 10: 디버깅 기법</h1>
<blockquote>
<p><strong>이 챕터의 목표</strong>: 스코어보드가 MISMATCH를 보고했을 때, <strong>체계적으로</strong> 원인을 찾고, 수정하고, 검증하는 전체 디버깅 워크플로우를 습득합니다. UVM 메시지 시스템, 파형 분석, Factory Override를 활용한 디버깅, 흔한 에러 메시지 해석법을 다룹니다.</p>
</blockquote>
<blockquote>
<p><strong>선수 지식</strong>: Chapter 2 (시뮬레이터, VCD), Chapter 4 (Factory 패턴), Chapter 8 (스코어보드 MISMATCH), Chapter 9 (테스트 시나리오, regression)</p>
</blockquote>
<hr>
<h2 id="10-1-왜-체계적-디버깅인가">10.1 왜 체계적 디버깅인가</h2>
<blockquote>
<p><strong>이 절의 목표</strong>: 체계적 디버깅의 필요성을 이해하고, UVM 디버깅 도구의 전체 맵과 워크플로우를 파악합니다.</p>
</blockquote>
<h3 id="10-1-1-quot-파형만-보면-되지-quot-실무의-현실">10.1.1 &quot;파형만 보면 되지?&quot; — 실무의 현실</h3>
<p>초보자가 가장 먼저 떠올리는 디버깅 방법은 파형(waveform)을 보는 것입니다. 물론 파형은 강력한 도구입니다. 하지만 실무에서는 이것만으로 부족합니다.</p>
<p><strong>파형만으로 디버깅하기 어려운 이유:</strong></p>
<ol>
<li><strong>시뮬레이션 시간이 길다</strong>: 수백만 클록 사이클 중 문제 시점을 찾아야 합니다</li>
<li><strong>신호가 많다</strong>: SoC 수준에서는 수만 개의 신호가 동시에 변합니다</li>
<li><strong>트랜잭션 수준 정보가 없다</strong>: 파형은 비트 레벨이지, &quot;어떤 패킷이 전송됐는지&quot;는 보이지 않습니다</li>
<li><strong>재현이 어렵다</strong>: &quot;언제&quot; 문제가 발생했는지 모르면 파형에서 찾기 불가능합니다</li>
</ol>
<p>UVM의 디버깅 도구를 활용하면 <strong>문제 시점을 빠르게 좁히고</strong>, 그 시점의 파형만 집중 분석할 수 있습니다. &quot;파형을 보지 마라&quot;가 아니라, **&quot;파형을 볼 지점을 먼저 찾아라&quot;**가 핵심입니다.</p>
<h3 id="10-1-2-uvm-디버깅-도구-전체-맵">10.1.2 UVM 디버깅 도구 전체 맵</h3>
<p>UVM은 다양한 디버깅 도구를 제공합니다. 각 도구의 역할을 먼저 파악하고, 상황에 맞게 선택하는 것이 중요합니다.</p>
<table>
<thead>
<tr>
<th>도구</th>
<th>용도</th>
<th>학습 섹션</th>
</tr>
</thead>
<tbody><tr>
<td><strong>메시지 시스템</strong></td>
<td>로그 출력 제어, 심각도별 분류</td>
<td>10.2</td>
</tr>
<tr>
<td><strong>Verbosity 제어</strong></td>
<td>필요한 정보만 필터링</td>
<td>10.2</td>
</tr>
<tr>
<td><strong>파형 분석</strong></td>
<td>신호 레벨 타이밍 확인</td>
<td>10.3</td>
</tr>
<tr>
<td><strong>Factory Override</strong></td>
<td>디버그 컴포넌트 교체</td>
<td>10.4</td>
</tr>
<tr>
<td><strong>에러 메시지 해석</strong></td>
<td>빠른 원인 분류</td>
<td>10.5</td>
</tr>
</tbody></table>
<h3 id="10-1-3-디버깅-워크플로우">10.1.3 디버깅 워크플로우</h3>
<p>체계적 디버깅은 다음 순서를 따릅니다:</p>

<div style="text-align:center;margin:2rem 0">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 620 420" style="max-width:620px;width:100%;height:auto">
  <defs>
    <filter id="sh10a" x="-4%" y="-4%" width="108%" height="116%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-opacity="0.10"/>
    </filter>
    <marker id="arr10" markerWidth="8" markerHeight="5.6" refX="7" refY="2.8" orient="auto">
      <polygon points="0 0,10 3.5,0 7" fill="#64748b"/>
    </marker>
    <marker id="arr10b" markerWidth="8" markerHeight="5.6" refX="7" refY="2.8" orient="auto">
      <polygon points="0 0,10 3.5,0 7" fill="#2563eb"/>
    </marker>
  </defs>

  <!-- Title -->
  <rect x="160" y="8" width="300" height="36" rx="18" fill="#1e293b"/>
  <text x="310" y="32" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="15" font-weight="bold" fill="#fff">디버깅 워크플로우</text>

  <!-- Step 1: MISMATCH -->
  <rect x="30" y="70" width="180" height="70" rx="12" fill="#fef2f2" stroke="#ef4444" stroke-width="2.5" filter="url(#sh10a)"/>
  <text x="120" y="98" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="15" font-weight="bold" fill="#dc2626">① MISMATCH 발견</text>
  <text x="120" y="120" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="12" fill="#7f1d1d">스코어보드 보고</text>

  <!-- Arrow 1→2 -->
  <line x1="210" y1="105" x2="290" y2="105" stroke="#64748b" stroke-width="1.5" marker-end="url(#arr10)"/>

  <!-- Step 2: Log Analysis -->
  <rect x="300" y="70" width="180" height="70" rx="12" fill="#eff6ff" stroke="#2563eb" stroke-width="2" filter="url(#sh10a)"/>
  <text x="390" y="95" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="15" font-weight="bold" fill="#1e40af">② 로그 분석</text>
  <text x="390" y="115" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="12" fill="#1e3a5f">Verbosity 높여</text>
  <text x="390" y="130" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="12" fill="#1e3a5f">시점·위치 확인</text>

  <!-- Arrow 2→3 -->
  <path d="M 390 140 L 390 175 L 120 175 L 120 200" fill="none" stroke="#2563eb" stroke-width="1.5" marker-end="url(#arr10b)"/>
  <text x="255" y="170" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="11" fill="#2563eb">타임스탬프 연결</text>

  <!-- Step 3: Waveform -->
  <rect x="30" y="200" width="180" height="70" rx="12" fill="#f0fdf4" stroke="#16a34a" stroke-width="2" filter="url(#sh10a)"/>
  <text x="120" y="228" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="15" font-weight="bold" fill="#166534">③ 파형 확인</text>
  <text x="120" y="250" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="12" fill="#14532d">RTL 신호 분석</text>

  <!-- Arrow 3→4 -->
  <line x1="120" y1="270" x2="120" y2="310" stroke="#64748b" stroke-width="1.5" marker-end="url(#arr10)"/>

  <!-- Step 4: Isolate -->
  <rect x="30" y="320" width="180" height="70" rx="12" fill="#f5f3ff" stroke="#7c3aed" stroke-width="2" filter="url(#sh10a)"/>
  <text x="120" y="348" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="15" font-weight="bold" fill="#5b21b6">④ 원인 분리</text>
  <text x="120" y="368" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="12" fill="#4c1d95">Factory Override</text>
  <text x="120" y="382" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="12" fill="#4c1d95">컴포넌트 교체</text>

  <!-- Arrow 4→5 -->
  <line x1="210" y1="355" x2="290" y2="355" stroke="#64748b" stroke-width="1.5" marker-end="url(#arr10)"/>

  <!-- Step 5: Fix & Verify -->
  <rect x="300" y="320" width="180" height="70" rx="12" fill="#ecfdf5" stroke="#10b981" stroke-width="3" filter="url(#sh10a)"/>
  <text x="390" y="348" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="15" font-weight="bold" fill="#065f46">⑤ 수정 & 검증</text>
  <text x="390" y="368" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="12" fill="#064e3b">버그 수정 후</text>
  <text x="390" y="382" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="12" fill="#064e3b">Regression 확인</text>

  <!-- Side label -->
  <text x="548" y="200" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="13" font-weight="bold" fill="#64748b" transform="rotate(90,548,200)">범위 좁히기 →</text>

</svg>
</div><p>이 워크플로우의 핵심은 <strong>범위 좁히기</strong>입니다. 수백만 사이클 중 문제 시점을 찾고(①→②), 그 시점의 신호를 확인하고(③), 문제 원인을 특정 컴포넌트로 분리한(④) 다음 수정합니다(⑤).</p>
<blockquote>
<p>💡 <strong>실무 팁</strong>: 팹리스 회사에서 검증 엔지니어의 일상은 이 워크플로우의 반복입니다. regression에서 FAIL이 나오면, 이 5단계를 따라 원인을 찾고 RTL 설계자에게 버그 리포트를 작성합니다.</p>
</blockquote>
<hr>
<h2 id="10-2-uvm-메시지-시스템">10.2 UVM 메시지 시스템</h2>
<blockquote>
<p><strong>이 절의 목표</strong>: UVM 메시지 매크로의 4가지 심각도와 Verbosity 레벨을 이해하고, 명령줄과 코드에서 제어하는 방법을 습득합니다.</p>
</blockquote>
<p>UVM 메시지 시스템은 디버깅의 <strong>첫 번째 도구</strong>입니다. <code>$display</code> 대신 UVM 메시지 매크로를 사용하면, 심각도와 상세도를 체계적으로 제어할 수 있습니다.</p>
<h3 id="10-2-1-4가지-심각도-uvm-info-warning-error-fatal">10.2.1 4가지 심각도 — UVM_INFO / WARNING / ERROR / FATAL</h3>
<p>UVM은 메시지를 4가지 심각도(severity)로 분류합니다:</p>
<pre><code class="hljs language-systemverilog"><span class="hljs-comment">// ──────────────────────────────────────────</span>
<span class="hljs-comment">// UVM 4가지 심각도 매크로</span>
<span class="hljs-comment">// ──────────────────────────────────────────</span>

<span class="hljs-comment">// INFO: 일반 정보 메시지 — 진행 상황, 디버그 정보</span>
`uvm_info(<span class="hljs-string">&quot;DRIVER&quot;</span>, <span class="hljs-string">&quot;트랜잭션 전송 시작&quot;</span>, UVM_MEDIUM)

<span class="hljs-comment">// WARNING: 주의 필요 — 동작에 영향 없지만 확인 권장</span>
`uvm_warning(<span class="hljs-string">&quot;MONITOR&quot;</span>, <span class="hljs-string">&quot;예상보다 긴 응답 시간 감지&quot;</span>)

<span class="hljs-comment">// ERROR: 오류 발생 — 시뮬레이션은 계속되지만 문제 있음</span>
`uvm_error(<span class="hljs-string">&quot;SCOREBOARD&quot;</span>,
  <span class="hljs-built_in">$sformatf</span>(<span class="hljs-string">&quot;MISMATCH! expected=%0d, actual=%0d&quot;</span>, expected, actual))

<span class="hljs-comment">// FATAL: 치명적 오류 — 시뮬레이션 즉시 중단</span>
`uvm_fatal(<span class="hljs-string">&quot;ENV&quot;</span>, <span class="hljs-string">&quot;필수 인터페이스가 config_db에 없습니다&quot;</span>)
</code></pre><p><strong>심각도별 동작:</strong></p>
<table>
<thead>
<tr>
<th>심각도</th>
<th>동작</th>
<th>시뮬레이션</th>
<th>사용 예</th>
</tr>
</thead>
<tbody><tr>
<td><code>UVM_INFO</code></td>
<td>로그 출력</td>
<td>계속</td>
<td>진행 상황, 디버그 데이터</td>
</tr>
<tr>
<td><code>UVM_WARNING</code></td>
<td>경고 출력</td>
<td>계속</td>
<td>타이밍 위반, 비정상 상태</td>
</tr>
<tr>
<td><code>UVM_ERROR</code></td>
<td>에러 카운트 증가</td>
<td>계속 (기본)</td>
<td>MISMATCH, 프로토콜 위반</td>
</tr>
<tr>
<td><code>UVM_FATAL</code></td>
<td>에러 출력</td>
<td><strong>즉시 중단</strong></td>
<td>필수 설정 누락, 복구 불가</td>
</tr>
</tbody></table>
<p><strong>매크로 형식:</strong></p>
<pre><code class="hljs language-systemverilog"><span class="hljs-comment">// `uvm_info(ID, MESSAGE, VERBOSITY)</span>
<span class="hljs-comment">// - ID: 메시지 출처를 식별하는 문자열 (필터링에 사용)</span>
<span class="hljs-comment">// - MESSAGE: 출력할 메시지 문자열</span>
<span class="hljs-comment">// - VERBOSITY: 이 메시지의 상세도 레벨 (다음 섹션에서 설명)</span>

<span class="hljs-comment">// `uvm_warning(ID, MESSAGE)</span>
<span class="hljs-comment">// `uvm_error(ID, MESSAGE)</span>
<span class="hljs-comment">// `uvm_fatal(ID, MESSAGE)</span>
<span class="hljs-comment">// - WARNING/ERROR/FATAL은 VERBOSITY 인자가 없음 (항상 출력)</span>
</code></pre><p>Ch.8에서 작성한 스코어보드를 기억하세요. MISMATCH를 <code>uvm_error</code>로 보고했습니다:</p>
<pre><code class="hljs language-systemverilog"><span class="hljs-comment">// Ch.8에서 작성한 스코어보드의 MISMATCH 보고</span>
<span class="hljs-keyword">if</span> (expected !== item<span class="hljs-variable">.count</span>) <span class="hljs-keyword">begin</span>
  `uvm_error(get_type_name(),
    <span class="hljs-built_in">$sformatf</span>(<span class="hljs-string">&quot;MISMATCH! expected=%0d, actual=%0d (rst_n=%0b, enable=%0b)&quot;</span>,
              expected, item<span class="hljs-variable">.count</span>, item<span class="hljs-variable">.rst_n</span>, item<span class="hljs-variable">.enable</span>))
  error_count++;
<span class="hljs-keyword">end</span>
</code></pre><p>이 <code>UVM_ERROR</code>가 바로 디버깅의 <strong>출발점</strong>입니다.</p>
<blockquote>
<p>💡 <strong>실무 팁</strong>: <code>$display</code>로 디버그 메시지를 출력하면 시뮬레이션이 끝난 후 제거하기 어렵습니다. <code>uvm_info</code>를 사용하면 verbosity 제어로 코드 수정 없이 끄고 켤 수 있습니다.</p>
</blockquote>
<h3 id="10-2-2-verbosity-레벨-low-medium-high-debug">10.2.2 Verbosity 레벨 — LOW / MEDIUM / HIGH / DEBUG</h3>
<p><code>uvm_info</code>의 세 번째 인자인 verbosity는 메시지의 <strong>상세도</strong>를 지정합니다. verbosity 레벨이 높을수록 더 자세한 정보이며, 낮을수록 핵심 정보입니다.</p>

<div style="text-align:center;margin:2rem 0">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 520 440" style="max-width:520px;width:100%;height:auto">
  <defs>
    <filter id="sh10b" x="-4%" y="-4%" width="108%" height="116%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-opacity="0.10"/>
    </filter>
  </defs>

  <!-- Title -->
  <rect x="120" y="8" width="280" height="36" rx="18" fill="#1e293b"/>
  <text x="260" y="32" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="15" font-weight="bold" fill="#fff">Verbosity 레벨 피라미드</text>

  <!-- UVM_DEBUG (top) -->
  <rect x="180" y="60" width="160" height="44" rx="10" fill="#fef2f2" stroke="#ef4444" stroke-width="2" filter="url(#sh10b)"/>
  <text x="260" y="80" text-anchor="middle" font-family="'Fira Code',monospace" font-size="13" font-weight="bold" fill="#dc2626">UVM_DEBUG</text>
  <text x="260" y="96" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="11" fill="#7f1d1d">500 · 최상세</text>

  <!-- UVM_FULL -->
  <rect x="155" y="114" width="210" height="44" rx="10" fill="#fff7ed" stroke="#f97316" stroke-width="2" filter="url(#sh10b)"/>
  <text x="260" y="134" text-anchor="middle" font-family="'Fira Code',monospace" font-size="13" font-weight="bold" fill="#ea580c">UVM_FULL</text>
  <text x="260" y="150" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="11" fill="#9a3412">400 · 전체 상세</text>

  <!-- UVM_HIGH -->
  <rect x="130" y="168" width="260" height="44" rx="10" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" filter="url(#sh10b)"/>
  <text x="260" y="188" text-anchor="middle" font-family="'Fira Code',monospace" font-size="13" font-weight="bold" fill="#b45309">UVM_HIGH</text>
  <text x="260" y="204" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="11" fill="#78350f">300 · 높은 상세</text>

  <!-- UVM_MEDIUM -->
  <rect x="105" y="222" width="310" height="44" rx="10" fill="#eff6ff" stroke="#2563eb" stroke-width="2.5" filter="url(#sh10b)"/>
  <text x="260" y="242" text-anchor="middle" font-family="'Fira Code',monospace" font-size="13" font-weight="bold" fill="#1d4ed8">UVM_MEDIUM</text>
  <text x="260" y="258" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="11" fill="#1e3a5f">200 · 중간 상세 (기본값)</text>

  <!-- UVM_LOW -->
  <rect x="80" y="276" width="360" height="44" rx="10" fill="#f0fdf4" stroke="#16a34a" stroke-width="2" filter="url(#sh10b)"/>
  <text x="260" y="296" text-anchor="middle" font-family="'Fira Code',monospace" font-size="13" font-weight="bold" fill="#166534">UVM_LOW</text>
  <text x="260" y="312" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="11" fill="#14532d">100 · 낮은 상세</text>

  <!-- UVM_NONE -->
  <rect x="55" y="330" width="410" height="44" rx="10" fill="#f8fafc" stroke="#64748b" stroke-width="2" filter="url(#sh10b)"/>
  <text x="260" y="350" text-anchor="middle" font-family="'Fira Code',monospace" font-size="13" font-weight="bold" fill="#334155">UVM_NONE</text>
  <text x="260" y="366" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="11" fill="#475569">0 · 메시지 없음</text>

  <!-- Arrows and labels -->
  <line x1="35" y1="80" x2="35" y2="360" stroke="#94a3b8" stroke-width="1.5" stroke-dasharray="6,3"/>
  <polygon points="35,70 30,82 40,82" fill="#94a3b8"/>
  <polygon points="35,370 30,358 40,358" fill="#94a3b8"/>
  <text x="22" y="190" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="11" fill="#64748b" transform="rotate(-90,22,190)">상세 정보 ↑   메시지 양 ↑</text>
  <text x="495" y="190" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="11" fill="#64748b" transform="rotate(90,495,190)">핵심 정보 ↓   메시지 양 ↓</text>

  <!-- Default level indicator -->
  <line x1="420" y1="244" x2="470" y2="244" stroke="#2563eb" stroke-width="2"/>
  <text x="474" y="248" font-family="'Noto Sans KR',sans-serif" font-size="11" font-weight="bold" fill="#2563eb">← 기본</text>

</svg>
</div><p><strong>각 레벨의 용도:</strong></p>
<pre><code class="hljs language-systemverilog"><span class="hljs-comment">// UVM_NONE (0) — 절대 숨기지 않는 핵심 메시지</span>
`uvm_info(<span class="hljs-string">&quot;TEST&quot;</span>, <span class="hljs-string">&quot;테스트 시작&quot;</span>, UVM_NONE)

<span class="hljs-comment">// UVM_LOW (100) — 주요 이벤트 (기본 출력)</span>
`uvm_info(<span class="hljs-string">&quot;DRIVER&quot;</span>, <span class="hljs-string">&quot;리셋 완료&quot;</span>, UVM_LOW)

<span class="hljs-comment">// UVM_MEDIUM (200) — 트랜잭션 레벨 정보</span>
`uvm_info(<span class="hljs-string">&quot;DRIVER&quot;</span>,
  <span class="hljs-built_in">$sformatf</span>(<span class="hljs-string">&quot;전송: rst_n=%0b, enable=%0b&quot;</span>, item<span class="hljs-variable">.rst_n</span>, item<span class="hljs-variable">.enable</span>),
  UVM_MEDIUM)

<span class="hljs-comment">// UVM_HIGH (300) — 상세 디버그 정보</span>
`uvm_info(<span class="hljs-string">&quot;DRIVER&quot;</span>,
  <span class="hljs-built_in">$sformatf</span>(<span class="hljs-string">&quot;인터페이스 값: clk=%0b, rst_n=%0b, enable=%0b, count=%0d&quot;</span>,
            vif<span class="hljs-variable">.clk</span>, vif<span class="hljs-variable">.rst_n</span>, vif<span class="hljs-variable">.enable</span>, vif<span class="hljs-variable">.count</span>),
  UVM_HIGH)

<span class="hljs-comment">// UVM_FULL (400) — 매우 상세한 내부 상태</span>
`uvm_info(<span class="hljs-string">&quot;SCOREBOARD&quot;</span>,
  <span class="hljs-built_in">$sformatf</span>(<span class="hljs-string">&quot;레퍼런스 모델 상태: prev_count=%0d, match=%0d, error=%0d&quot;</span>,
            prev_count, match_count, error_count),
  UVM_FULL)

<span class="hljs-comment">// UVM_DEBUG (500) — 최대 상세 (성능 영향 가능)</span>
`uvm_info(<span class="hljs-string">&quot;MONITOR&quot;</span>,
  <span class="hljs-built_in">$sformatf</span>(<span class="hljs-string">&quot;샘플링 시점: $time=%0t, 모든 신호 덤프&quot;</span>, <span class="hljs-built_in">$time</span>),
  UVM_DEBUG)
</code></pre><p><strong>핵심 원리</strong>: 시뮬레이터의 현재 verbosity 설정보다 <strong>같거나 낮은</strong> 레벨의 메시지만 출력됩니다. 기본 설정은 <code>UVM_MEDIUM(200)</code>이므로, <code>UVM_NONE(0)</code>, <code>UVM_LOW(100)</code>, <code>UVM_MEDIUM(200)</code> 메시지만 출력됩니다.</p>
<h3 id="10-2-3-명령줄-verbosity-제어-uvm-verbosity">10.2.3 명령줄 Verbosity 제어 (+UVM_VERBOSITY)</h3>
<p>코드를 수정하지 않고 시뮬레이션 실행 시 verbosity를 변경할 수 있습니다:</p>
<pre><code class="hljs language-bash"><span class="hljs-comment"># 기본 실행 — UVM_MEDIUM (200) 이하 메시지 출력</span>
vsim +UVM_TESTNAME=counter_coverage_closure_test

<span class="hljs-comment"># 높은 상세도 — UVM_HIGH (300) 이하 메시지 출력</span>
vsim +UVM_TESTNAME=counter_coverage_closure_test +UVM_VERBOSITY=UVM_HIGH

<span class="hljs-comment"># 최대 상세도 — 모든 메시지 출력</span>
vsim +UVM_TESTNAME=counter_coverage_closure_test +UVM_VERBOSITY=UVM_DEBUG

<span class="hljs-comment"># 최소 출력 — UVM_NONE (0)만 출력</span>
vsim +UVM_TESTNAME=counter_coverage_closure_test +UVM_VERBOSITY=UVM_NONE
</code></pre><p><strong>EDA Playground에서의 설정:</strong></p>
<p>EDA Playground를 사용하는 경우, <strong>Compile &amp; Run Options</strong> 필드에 추가합니다:</p>
<pre><code># Run Options 필드에 입력
+UVM_VERBOSITY=UVM_HIGH
</code></pre><p>Ch.9에서 <code>+UVM_TESTNAME</code>을 Run Options에 추가했던 것과 같은 방식입니다.</p>
<h3 id="10-2-4-컴포넌트별-verbosity-제어">10.2.4 컴포넌트별 Verbosity 제어</h3>
<p>전체 시뮬레이션이 아닌 <strong>특정 컴포넌트</strong>만 상세 로그를 켤 수 있습니다. 이것이 <code>$display</code>로는 불가능한 UVM의 강점입니다.</p>
<pre><code class="hljs language-systemverilog"><span class="hljs-comment">// ──────────────────────────────────────────</span>
<span class="hljs-comment">// 컴포넌트별 Verbosity 제어</span>
<span class="hljs-comment">// 파일: counter_debug_test.sv</span>
<span class="hljs-comment">// 역할: 특정 컴포넌트만 상세 로그를 켜는 디버그 테스트</span>
<span class="hljs-comment">// ──────────────────────────────────────────</span>
<span class="hljs-keyword">class</span> counter_debug_test <span class="hljs-keyword">extends</span> counter_base_test;
  `uvm_component_utils(counter_debug_test)

  <span class="hljs-keyword">function</span> <span class="hljs-keyword">new</span>(<span class="hljs-keyword">string</span> name, uvm_component parent);
    <span class="hljs-keyword">super</span><span class="hljs-variable">.new</span>(name, parent);
  <span class="hljs-keyword">endfunction</span>

  <span class="hljs-comment">// build_phase에서 특정 컴포넌트 verbosity 설정</span>
  <span class="hljs-keyword">function</span> <span class="hljs-keyword">void</span> build_phase(uvm_phase phase);
    <span class="hljs-keyword">super</span><span class="hljs-variable">.build_phase</span>(phase);  <span class="hljs-comment">// counter_env 생성</span>

    <span class="hljs-comment">// 스코어보드만 UVM_DEBUG로 설정</span>
    <span class="hljs-comment">// 다른 컴포넌트는 기본값(UVM_MEDIUM) 유지</span>
    env<span class="hljs-variable">.scoreboard</span><span class="hljs-variable">.set_report_verbosity_level</span>(UVM_DEBUG);
  <span class="hljs-keyword">endfunction</span>

  <span class="hljs-comment">// 또는 connect_phase에서 설정 (env.agent 등 접근 필요 시)</span>
  <span class="hljs-keyword">function</span> <span class="hljs-keyword">void</span> connect_phase(uvm_phase phase);
    <span class="hljs-keyword">super</span><span class="hljs-variable">.connect_phase</span>(phase);

    <span class="hljs-comment">// 드라이버도 HIGH로 올리기</span>
    env<span class="hljs-variable">.agent</span><span class="hljs-variable">.driver</span><span class="hljs-variable">.set_report_verbosity_level</span>(UVM_HIGH);
  <span class="hljs-keyword">endfunction</span>
<span class="hljs-keyword">endclass</span>
</code></pre><p><strong>명령줄에서 컴포넌트별 설정도 가능합니다:</strong></p>
<pre><code class="hljs language-bash"><span class="hljs-comment"># 특정 컴포넌트만 verbosity 변경</span>
vsim +uvm_set_verbosity=uvm_test_top.env.scoreboard,_ALL_,UVM_DEBUG,run
</code></pre><blockquote>
<p>💡 <strong>실무 팁</strong>: 디버깅 시 전체 verbosity를 DEBUG로 올리면 로그가 GB 단위로 커질 수 있습니다. <strong>문제가 의심되는 컴포넌트만</strong> 선택적으로 올리는 것이 효율적입니다.</p>
</blockquote>
<h3 id="10-2-5-메시지-필터링-실전-예제">10.2.5 메시지 필터링 실전 예제</h3>
<p>실전에서 verbosity를 단계적으로 올려가며 문제를 좁히는 과정을 살펴봅니다.</p>
<p><strong>상황</strong>: Ch.9의 <code>counter_coverage_closure_test</code> 실행 중 MISMATCH 발생</p>
<pre><code># ── 1단계: 기본 실행 (UVM_MEDIUM) ──

UVM_ERROR @ 850ns: uvm_test_top.env.scoreboard [counter_scoreboard]
  MISMATCH! expected=0, actual=5 (rst_n=0, enable=1)
</code></pre><p>MISMATCH가 발생했지만, 이것만으로는 원인을 알 수 없습니다. 정보가 더 필요합니다.</p>
<pre><code># ── 2단계: 스코어보드 HIGH로 올리기 ──
# 명령줄: +uvm_set_verbosity=*scoreboard*,_ALL_,UVM_HIGH,run

UVM_INFO @ 830ns: uvm_test_top.env.scoreboard [counter_scoreboard]
  트랜잭션 #41: predict(1, 1, 11) → expected=12, actual=12 ✓ MATCH
UVM_INFO @ 850ns: uvm_test_top.env.scoreboard [counter_scoreboard]
  트랜잭션 #42: predict(0, 1, 12) → expected=0
UVM_INFO @ 850ns: uvm_test_top.env.scoreboard [counter_scoreboard]
  DUT 실제값: count=5
UVM_ERROR @ 850ns: uvm_test_top.env.scoreboard [counter_scoreboard]
  MISMATCH! expected=0, actual=5 (rst_n=0, enable=1)
</code></pre><p>이제 더 많은 정보가 보입니다: 트랜잭션 #42에서, <code>rst_n=0</code>(리셋 활성)인데 DUT의 count가 0이 아닌 5입니다.</p>
<pre><code># ── 3단계: 드라이버도 HIGH로 올리기 ──
# 드라이버가 실제로 rst_n=0을 인터페이스에 전달했는지 확인

UVM_INFO @ 850ns: uvm_test_top.env.agent.driver [counter_driver]
  전송: rst_n=0, enable=1
UVM_INFO @ 850ns: uvm_test_top.env.agent.driver [counter_driver]
  인터페이스 확인: vif.rst_n=0, vif.enable=1
UVM_INFO @ 850ns: uvm_test_top.env.scoreboard [counter_scoreboard]
  트랜잭션 #42: predict(0, 1, 12) → expected=0
UVM_ERROR @ 850ns: uvm_test_top.env.scoreboard [counter_scoreboard]
  MISMATCH! expected=0, actual=5 (rst_n=0, enable=1)
</code></pre><p>드라이버는 정상적으로 <code>rst_n=0</code>을 전달했습니다. 그런데 DUT의 count가 0이 아닙니다. → <strong>RTL 버그 가능성!</strong></p>
<p>이제 파형에서 **트랜잭션 #42 시점(850ns)**만 확인하면 됩니다. 이것이 &quot;파형을 볼 지점을 먼저 찾아라&quot;의 의미입니다.</p>
<hr>
<h2 id="10-3-파형-분석">10.3 파형 분석</h2>
<blockquote>
<p><strong>이 절의 목표</strong>: VCD 파형 파일을 생성하고, UVM 로그의 타임스탬프와 연결하여 MISMATCH 시점의 RTL 신호를 분석하는 기술을 습득합니다.</p>
</blockquote>
<h3 id="10-3-1-vcd-fsdb-파일-생성">10.3.1 VCD/FSDB 파일 생성</h3>
<p>파형을 보려면 시뮬레이션 중 신호 변화를 파일로 저장해야 합니다. 가장 일반적인 형식은 <strong>VCD</strong>(Value Change Dump)와 <strong>FSDB</strong>(Fast Signal Database)입니다.</p>
<pre><code class="hljs language-systemverilog"><span class="hljs-comment">// ──────────────────────────────────────────</span>
<span class="hljs-comment">// VCD 파일 생성 — 테스트벤치 top 모듈</span>
<span class="hljs-comment">// 파일: tb_top.sv</span>
<span class="hljs-comment">// 역할: VCD 파형 덤프를 설정하고 UVM 테스트를 실행</span>
<span class="hljs-comment">// ──────────────────────────────────────────</span>
<span class="hljs-keyword">module</span> tb_top;
  <span class="hljs-comment">// 클록 생성</span>
  <span class="hljs-keyword">logic</span> clk;
  <span class="hljs-keyword">initial</span> clk = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">always</span> #<span class="hljs-number">5</span> clk = ~clk;  <span class="hljs-comment">// 10ns 주기</span>

  <span class="hljs-comment">// 인터페이스 인스턴스</span>
  counter_if counter_intf(clk);

  <span class="hljs-comment">// DUT 인스턴스</span>
  counter_4bit dut (
    <span class="hljs-variable">.clk</span>    (clk),
    <span class="hljs-variable">.rst_n</span>  (counter_intf<span class="hljs-variable">.rst_n</span>),
    <span class="hljs-variable">.enable</span> (counter_intf<span class="hljs-variable">.enable</span>),
    <span class="hljs-variable">.count</span>  (counter_intf<span class="hljs-variable">.count</span>)
  );

  <span class="hljs-keyword">initial</span> <span class="hljs-keyword">begin</span>
    <span class="hljs-comment">// VCD 파형 덤프 설정</span>
    <span class="hljs-built_in">$dumpfile</span>(<span class="hljs-string">&quot;counter_debug.vcd&quot;</span>);  <span class="hljs-comment">// 출력 파일 이름</span>
    <span class="hljs-built_in">$dumpvars</span>(<span class="hljs-number">0</span>, tb_top);           <span class="hljs-comment">// 0: 모든 계층 신호 덤프</span>
                                     <span class="hljs-comment">// tb_top: 시작 모듈</span>

    <span class="hljs-comment">// config_db에 인터페이스 등록</span>
    uvm_config_db<span class="hljs-variable">#(virtual counter_if)</span>::set(
      <span class="hljs-literal">null</span>, <span class="hljs-string">&quot;uvm_test_top.*&quot;</span>, <span class="hljs-string">&quot;vif&quot;</span>, counter_intf);

    <span class="hljs-comment">// UVM 테스트 실행</span>
    run_test();
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">endmodule</span>
</code></pre><p><strong>VCD vs FSDB 비교:</strong></p>
<table>
<thead>
<tr>
<th>특성</th>
<th>VCD</th>
<th>FSDB</th>
</tr>
</thead>
<tbody><tr>
<td><strong>형식</strong></td>
<td>텍스트 (ASCII)</td>
<td>바이너리</td>
</tr>
<tr>
<td><strong>파일 크기</strong></td>
<td>큼</td>
<td>작음 (5~10배)</td>
</tr>
<tr>
<td><strong>표준</strong></td>
<td>IEEE 1364 표준</td>
<td>Synopsys 독점</td>
</tr>
<tr>
<td><strong>뷰어</strong></td>
<td>GTKWave, 모든 도구</td>
<td>Verdi (Synopsys)</td>
</tr>
<tr>
<td><strong>EDA Playground</strong></td>
<td>✅ 지원</td>
<td>❌ 미지원</td>
</tr>
<tr>
<td><strong>실무 사용</strong></td>
<td>작은 설계, 학습용</td>
<td>대규모 SoC</td>
</tr>
</tbody></table>
<blockquote>
<p>💡 <strong>실무 팁</strong>: 팹리스 회사에서는 대부분 Synopsys Verdi + FSDB를 사용합니다. 하지만 학습과 작은 프로젝트에서는 VCD + GTKWave가 무료이고 충분합니다.</p>
</blockquote>
<h3 id="10-3-2-파형-뷰어-dve-verdi-gtkwave">10.3.2 파형 뷰어 — DVE, Verdi, GTKWave</h3>
<p><strong>GTKWave (무료, 오픈소스) — 추천:</strong></p>
<pre><code class="hljs language-bash"><span class="hljs-comment"># VCD 파일을 GTKWave로 열기</span>
gtkwave counter_debug.vcd &amp;
</code></pre><p>GTKWave에서 확인할 신호:</p>
<ul>
<li><code>tb_top.dut.clk</code> — 클록</li>
<li><code>tb_top.dut.rst_n</code> — 리셋</li>
<li><code>tb_top.dut.enable</code> — 인에이블</li>
<li><code>tb_top.dut.count[3:0]</code> — 카운터 출력</li>
</ul>
<p><strong>GTKWave 기본 조작법:</strong></p>
<table>
<thead>
<tr>
<th>조작</th>
<th>방법</th>
</tr>
</thead>
<tbody><tr>
<td><strong>신호 추가</strong></td>
<td>왼쪽 계층 트리에서 모듈 선택 → 신호 선택 → <strong>Append</strong> 클릭</td>
</tr>
<tr>
<td><strong>줌인/줌아웃</strong></td>
<td>마우스 휠 또는 도구 모음의 <strong>+/-</strong> 버튼</td>
</tr>
<tr>
<td><strong>시간 이동</strong></td>
<td><strong>Time → Jump to Time</strong> 메뉴에서 원하는 시간 입력 (예: <code>850ns</code>)</td>
</tr>
<tr>
<td><strong>커서 배치</strong></td>
<td>파형 위 클릭으로 커서 배치, 두 커서 간 시간 차이 자동 표시</td>
</tr>
<tr>
<td><strong>신호 값 확인</strong></td>
<td>커서 위치의 신호 값이 왼쪽 패널에 표시됨</td>
</tr>
</tbody></table>
<p><strong>EDA Playground에서 파형 보기:</strong></p>
<p>EDA Playground에서는 시뮬레이션 완료 후 <strong>Open EPWave</strong> 버튼을 클릭하면 웹 기반 파형 뷰어가 열립니다. <code>$dumpfile</code>과 <code>$dumpvars</code>가 코드에 포함되어 있어야 합니다.</p>
<p><strong>Verdi (Synopsys, 상용):</strong></p>
<pre><code class="hljs language-bash"><span class="hljs-comment"># FSDB 파일을 Verdi로 열기 (실무 환경)</span>
verdi -ssf counter_debug.fsdb &amp;
</code></pre><p><strong>DVE (Synopsys, 상용):</strong></p>
<pre><code class="hljs language-bash"><span class="hljs-comment"># VPD 파일을 DVE로 열기</span>
dve -vpd counter_debug.vpd &amp;
</code></pre><blockquote>
<p>💡 <strong>면접 팁</strong>: &quot;파형 뷰어 사용 경험이 있으신가요?&quot;라는 질문을 받으면, GTKWave 경험을 말하고, Verdi의 존재와 FSDB 형식에 대해 알고 있다고 답하면 좋습니다.</p>
</blockquote>
<h3 id="10-3-3-rtl-신호와-uvm-로그-타임스탬프-연결">10.3.3 RTL 신호와 UVM 로그 타임스탬프 연결</h3>
<p>UVM 로그의 타임스탬프와 파형의 시간축을 연결하는 것이 핵심 기술입니다.</p>
<pre><code>UVM 로그 출력 예시:
UVM_ERROR @ 850ns: uvm_test_top.env.scoreboard [counter_scoreboard]
  MISMATCH! expected=0, actual=5 (rst_n=0, enable=1)

→ 파형 뷰어에서 850ns로 이동 → 그 시점의 RTL 신호 확인
</code></pre><p><strong>타임스탬프를 활용한 스코어보드 메시지 패턴:</strong></p>
<pre><code class="hljs language-systemverilog"><span class="hljs-comment">// ──────────────────────────────────────────</span>
<span class="hljs-comment">// 타임스탬프 포함 상세 스코어보드 메시지</span>
<span class="hljs-comment">// 파일: counter_scoreboard.sv (디버그 강화)</span>
<span class="hljs-comment">// 역할: MISMATCH 전후 맥락을 상세히 기록</span>
<span class="hljs-comment">// 참고: transaction_count, match_count, error_count, prev_count는</span>
<span class="hljs-comment">//       Ch.8에서 선언한 스코어보드 멤버 변수입니다</span>
<span class="hljs-comment">// ──────────────────────────────────────────</span>
<span class="hljs-keyword">function</span> <span class="hljs-keyword">void</span> write(counter_seq_item item);
  transaction_count++;  <span class="hljs-comment">// Ch.8 스코어보드의 int transaction_count 변수</span>

  <span class="hljs-comment">// 예측</span>
  <span class="hljs-keyword">logic</span> [<span class="hljs-number">3</span>:<span class="hljs-number">0</span>] expected = predict(item<span class="hljs-variable">.rst_n</span>, item<span class="hljs-variable">.enable</span>, prev_count);

  <span class="hljs-comment">// 상세 트랜잭션 로그 (UVM_HIGH — 평소에는 숨겨짐)</span>
  `uvm_info(get_type_name(),
    <span class="hljs-built_in">$sformatf</span>(<span class="hljs-string">&quot;[%0t] 트랜잭션 #%0d: rst_n=%0b, enable=%0b, prev=%0d → expected=%0d, actual=%0d&quot;</span>,
              <span class="hljs-built_in">$time</span>, transaction_count,
              item<span class="hljs-variable">.rst_n</span>, item<span class="hljs-variable">.enable</span>, prev_count,
              expected, item<span class="hljs-variable">.count</span>),
    UVM_HIGH)

  <span class="hljs-comment">// 비교</span>
  <span class="hljs-keyword">if</span> (expected !== item<span class="hljs-variable">.count</span>) <span class="hljs-keyword">begin</span>
    `uvm_error(get_type_name(),
      <span class="hljs-built_in">$sformatf</span>(<span class="hljs-string">&quot;[%0t] MISMATCH #%0d! expected=%0d, actual=%0d (rst_n=%0b, enable=%0b)&quot;</span>,
                <span class="hljs-built_in">$time</span>, transaction_count, expected, item<span class="hljs-variable">.count</span>,
                item<span class="hljs-variable">.rst_n</span>, item<span class="hljs-variable">.enable</span>))
    error_count++;
  <span class="hljs-keyword">end</span> <span class="hljs-keyword">else</span> <span class="hljs-keyword">begin</span>
    match_count++;
  <span class="hljs-keyword">end</span>

  prev_count = item<span class="hljs-variable">.count</span>;
<span class="hljs-keyword">endfunction</span>
</code></pre><blockquote>
<p>💡 <strong>실무 팁</strong>: MISMATCH 발생 시, 로그의 타임스탬프(<code>850ns</code>)를 파형 뷰어의 검색 기능에 입력하면 해당 시점으로 즉시 이동할 수 있습니다. GTKWave에서는 <strong>Time → Jump to Time</strong> 메뉴를 사용합니다.</p>
</blockquote>
<h3 id="10-3-4-실전-mismatch-시점-파형-확인">10.3.4 실전: MISMATCH 시점 파형 확인</h3>
<p>10.2.5에서 발견한 MISMATCH를 파형에서 확인하는 과정입니다.</p>
<p><strong>로그에서 얻은 정보:</strong></p>
<ul>
<li>시점: 850ns (트랜잭션 #42)</li>
<li>입력: <code>rst_n=0</code>, <code>enable=1</code></li>
<li>예측: <code>count=0</code> (리셋이면 0이어야 함)</li>
<li>실제: <code>count=5</code></li>
</ul>
<p><strong>파형에서 확인할 사항:</strong></p>

<div style="text-align:center;margin:2rem 0">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 720 310" style="max-width:720px;width:100%;height:auto">
  <defs>
    <filter id="sh10w" x="-2%" y="-4%" width="104%" height="112%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-opacity="0.08"/>
    </filter>
  </defs>

  <!-- Title -->
  <rect x="200" y="6" width="320" height="32" rx="16" fill="#1e293b"/>
  <text x="360" y="28" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="14" font-weight="bold" fill="#fff">MISMATCH 시점 파형 분석</text>

  <!-- Header row -->
  <rect x="10" y="50" width="700" height="30" rx="6" fill="#f1f5f9" stroke="#cbd5e1" stroke-width="1"/>
  <text x="55" y="70" text-anchor="middle" font-family="'Fira Code',monospace" font-size="12" font-weight="bold" fill="#334155">시간</text>
  <text x="145" y="70" text-anchor="middle" font-family="'Fira Code',monospace" font-size="12" font-weight="bold" fill="#334155">clk</text>
  <text x="225" y="70" text-anchor="middle" font-family="'Fira Code',monospace" font-size="12" font-weight="bold" fill="#334155">rst_n</text>
  <text x="315" y="70" text-anchor="middle" font-family="'Fira Code',monospace" font-size="12" font-weight="bold" fill="#334155">enable</text>
  <text x="405" y="70" text-anchor="middle" font-family="'Fira Code',monospace" font-size="12" font-weight="bold" fill="#334155">count</text>
  <text x="575" y="70" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="12" font-weight="bold" fill="#334155">분석</text>

  <!-- Row 830ns — normal -->
  <rect x="10" y="82" width="700" height="28" rx="0" fill="#ffffff"/>
  <text x="55" y="100" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">830ns</text>
  <text x="145" y="100" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">↑</text>
  <text x="225" y="100" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#16a34a" font-weight="bold">1</text>
  <text x="315" y="100" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">1</text>
  <text x="405" y="100" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">12</text>
  <text x="575" y="100" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="11" fill="#475569">정상 카운팅</text>

  <!-- Row 840ns — normal -->
  <rect x="10" y="110" width="700" height="28" rx="0" fill="#f8fafc"/>
  <text x="55" y="128" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">840ns</text>
  <text x="145" y="128" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">↑</text>
  <text x="225" y="128" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#16a34a" font-weight="bold">1</text>
  <text x="315" y="128" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">1</text>
  <text x="405" y="128" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">13</text>
  <text x="575" y="128" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="11" fill="#475569"></text>

  <!-- Row 845ns — rst_n changes -->
  <rect x="10" y="138" width="700" height="28" rx="0" fill="#fff7ed"/>
  <text x="55" y="156" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#ea580c">845ns</text>
  <text x="145" y="156" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#94a3b8"></text>
  <text x="225" y="156" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#dc2626" font-weight="bold">0</text>
  <text x="315" y="156" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">1</text>
  <text x="405" y="156" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">13</text>
  <text x="575" y="156" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="11" fill="#ea580c">rst_n↓ (클록 에지 사이)</text>

  <!-- Row 850ns — ERROR -->
  <rect x="10" y="166" width="700" height="28" rx="0" fill="#fef2f2" stroke="#fca5a5" stroke-width="1"/>
  <text x="55" y="184" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#dc2626" font-weight="bold">850ns</text>
  <text x="145" y="184" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">↑</text>
  <text x="225" y="184" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#dc2626" font-weight="bold">0</text>
  <text x="315" y="184" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">1</text>
  <text x="405" y="184" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#dc2626" font-weight="bold">5</text>
  <text x="575" y="184" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="11" fill="#dc2626" font-weight="bold">❌ 0이어야 하는데!</text>

  <!-- Row 855ns — ERROR continues -->
  <rect x="10" y="194" width="700" height="28" rx="0" fill="#fef2f2" stroke="#fca5a5" stroke-width="1"/>
  <text x="55" y="212" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#dc2626" font-weight="bold">855ns</text>
  <text x="145" y="212" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">↑</text>
  <text x="225" y="212" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#dc2626" font-weight="bold">0</text>
  <text x="315" y="212" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">1</text>
  <text x="405" y="212" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#dc2626" font-weight="bold">6</text>
  <text x="575" y="212" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="11" fill="#dc2626" font-weight="bold">❌ 여전히 카운팅</text>

  <!-- Row 860ns — finally resets -->
  <rect x="10" y="222" width="700" height="28" rx="0" fill="#ecfdf5"/>
  <text x="55" y="240" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#166534">860ns</text>
  <text x="145" y="240" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">↑</text>
  <text x="225" y="240" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#dc2626" font-weight="bold">0</text>
  <text x="315" y="240" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#16a34a" font-weight="bold">0</text>
  <text x="405" y="240" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#16a34a" font-weight="bold">0</text>
  <text x="575" y="240" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="11" fill="#166534">enable=0 → 리셋 적용</text>

  <!-- Separator lines -->
  <line x1="100" y1="50" x2="100" y2="250" stroke="#e2e8f0" stroke-width="1"/>
  <line x1="185" y1="50" x2="185" y2="250" stroke="#e2e8f0" stroke-width="1"/>
  <line x1="270" y1="50" x2="270" y2="250" stroke="#e2e8f0" stroke-width="1"/>
  <line x1="360" y1="50" x2="360" y2="250" stroke="#e2e8f0" stroke-width="1"/>
  <line x1="450" y1="50" x2="450" y2="250" stroke="#e2e8f0" stroke-width="1"/>

  <!-- Bug indicator -->
  <rect x="140" y="265" width="440" height="32" rx="8" fill="#fef2f2" stroke="#ef4444" stroke-width="2"/>
  <text x="360" y="286" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="12" font-weight="bold" fill="#dc2626">🔍 rst_n=0 + enable=1 → 리셋 무시됨 (RTL 우선순위 버그)</text>

</svg>
</div><p>파형을 보면, <code>rst_n=0</code>이 845ns에 활성화되었는데 850ns에 count가 5입니다. <code>enable=0</code>이 되는 860ns에야 비로소 0이 됩니다. 이것은 <strong>RTL에서 리셋과 enable의 우선순위 버그</strong>입니다.</p>
<p>RTL 코드를 확인해봅시다:</p>
<pre><code class="hljs language-systemverilog"><span class="hljs-comment">// ── 버그가 있는 RTL ──</span>
<span class="hljs-keyword">always_ff</span> @(<span class="hljs-keyword">posedge</span> clk) <span class="hljs-keyword">begin</span>
  <span class="hljs-keyword">if</span> (enable)            <span class="hljs-comment">// ❌ enable을 먼저 검사!</span>
    count &lt;= count + <span class="hljs-number">1</span>;
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!rst_n)       <span class="hljs-comment">// ❌ 리셋이 나중에 검사됨</span>
    count &lt;= <span class="hljs-number">4&#x27;b0</span>;
<span class="hljs-keyword">end</span>
</code></pre><p>문제를 찾았습니다! <code>enable</code>이 <code>rst_n</code>보다 우선순위가 높아서, <code>rst_n=0</code>이면서 <code>enable=1</code>일 때 리셋이 무시됩니다.</p>
<p><strong>수정된 RTL:</strong></p>
<pre><code class="hljs language-systemverilog"><span class="hljs-comment">// ── 올바른 RTL ──</span>
<span class="hljs-keyword">always_ff</span> @(<span class="hljs-keyword">posedge</span> clk) <span class="hljs-keyword">begin</span>
  <span class="hljs-keyword">if</span> (!rst_n)            <span class="hljs-comment">// ✅ 리셋이 최우선</span>
    count &lt;= <span class="hljs-number">4&#x27;b0</span>;
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (enable)       <span class="hljs-comment">// ✅ 리셋이 아닐 때만 카운팅</span>
    count &lt;= count + <span class="hljs-number">1</span>;
<span class="hljs-keyword">end</span>
</code></pre><blockquote>
<p>💡 <strong>실무 팁</strong>: 리셋 우선순위 버그는 실무에서 매우 흔합니다. 특히 복잡한 FSM(상태 머신)에서 리셋 조건이 다른 조건 뒤에 위치하면 같은 문제가 발생합니다.</p>
</blockquote>
<hr>
<h2 id="10-4-factory-override-디버깅">10.4 Factory Override 디버깅</h2>
<blockquote>
<p><strong>이 절의 목표</strong>: Ch.4에서 배운 Factory 패턴을 활용하여, 코드 수정 없이 디버그 컴포넌트를 교체하는 기법을 습득합니다.</p>
</blockquote>
<h3 id="10-4-1-디버그-드라이버-교체-상세-로깅-버전">10.4.1 디버그 드라이버 교체 — 상세 로깅 버전</h3>
<p>기존 드라이버에 상세 로깅을 추가한 디버그 버전을 만들어봅시다. 기존 <code>counter_driver</code>를 <strong>상속</strong>하여 <code>run_phase</code>만 override합니다.</p>
<pre><code class="hljs language-systemverilog"><span class="hljs-comment">// ──────────────────────────────────────────</span>
<span class="hljs-comment">// 디버그 드라이버 — 상세 로깅 버전</span>
<span class="hljs-comment">// 파일: counter_debug_driver.sv</span>
<span class="hljs-comment">// 역할: 기존 드라이버를 상속하여 모든 인터페이스 변화를 기록</span>
<span class="hljs-comment">// ──────────────────────────────────────────</span>
<span class="hljs-keyword">class</span> counter_debug_driver <span class="hljs-keyword">extends</span> counter_driver;
  `uvm_component_utils(counter_debug_driver)

  <span class="hljs-keyword">function</span> <span class="hljs-keyword">new</span>(<span class="hljs-keyword">string</span> name, uvm_component parent);
    <span class="hljs-keyword">super</span><span class="hljs-variable">.new</span>(name, parent);
  <span class="hljs-keyword">endfunction</span>

  <span class="hljs-comment">// 기존 run_phase를 override하여 상세 로깅 추가</span>
  <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">task</span> run_phase(uvm_phase phase);
    `uvm_info(get_type_name(),
      <span class="hljs-string">&quot;=== 디버그 드라이버 활성화 ===&quot;</span>, UVM_NONE)

    <span class="hljs-keyword">forever</span> <span class="hljs-keyword">begin</span>
      counter_seq_item item;
      seq_item_port<span class="hljs-variable">.get_next_item</span>(item);

      <span class="hljs-comment">// ── 전송 전 상태 기록 ──</span>
      `uvm_info(get_type_name(),
        <span class="hljs-built_in">$sformatf</span>(<span class="hljs-string">&quot;[%0t] 전송 전: vif.rst_n=%0b, vif.enable=%0b, vif.count=%0d&quot;</span>,
                  <span class="hljs-built_in">$time</span>, vif<span class="hljs-variable">.rst_n</span>, vif<span class="hljs-variable">.enable</span>, vif<span class="hljs-variable">.count</span>),
        UVM_LOW)

      <span class="hljs-comment">// ── 인터페이스에 값 적용 ──</span>
      @(<span class="hljs-keyword">posedge</span> vif<span class="hljs-variable">.clk</span>);
      vif<span class="hljs-variable">.rst_n</span>  &lt;= item<span class="hljs-variable">.rst_n</span>;
      vif<span class="hljs-variable">.enable</span> &lt;= item<span class="hljs-variable">.enable</span>;

      <span class="hljs-comment">// ── 전송 후 상태 기록 ──</span>
      `uvm_info(get_type_name(),
        <span class="hljs-built_in">$sformatf</span>(<span class="hljs-string">&quot;[%0t] 전송 후: rst_n=%0b→%0b, enable=%0b→%0b&quot;</span>,
                  <span class="hljs-built_in">$time</span>, vif<span class="hljs-variable">.rst_n</span>, item<span class="hljs-variable">.rst_n</span>, vif<span class="hljs-variable">.enable</span>, item<span class="hljs-variable">.enable</span>),
        UVM_LOW)

      seq_item_port<span class="hljs-variable">.item_done</span>();
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">endtask</span>
<span class="hljs-keyword">endclass</span>
</code></pre><h3 id="10-4-2-런타임-컴포넌트-교환-패턴">10.4.2 런타임 컴포넌트 교환 패턴</h3>
<p>Ch.4의 <code>set_type_override_by_type</code>을 사용하여 <strong>코드 변경 없이</strong> 디버그 드라이버로 교체합니다:</p>
<pre><code class="hljs language-systemverilog"><span class="hljs-comment">// ──────────────────────────────────────────</span>
<span class="hljs-comment">// Factory Override로 디버그 드라이버 교체</span>
<span class="hljs-comment">// 파일: counter_factory_debug_test.sv</span>
<span class="hljs-comment">// 역할: 기존 드라이버를 디버그 버전으로 교체하여 문제 분석</span>
<span class="hljs-comment">// ──────────────────────────────────────────</span>
<span class="hljs-keyword">class</span> counter_factory_debug_test <span class="hljs-keyword">extends</span> counter_base_test;
  `uvm_component_utils(counter_factory_debug_test)

  <span class="hljs-keyword">function</span> <span class="hljs-keyword">new</span>(<span class="hljs-keyword">string</span> name, uvm_component parent);
    <span class="hljs-keyword">super</span><span class="hljs-variable">.new</span>(name, parent);
  <span class="hljs-keyword">endfunction</span>

  <span class="hljs-keyword">function</span> <span class="hljs-keyword">void</span> build_phase(uvm_phase phase);
    <span class="hljs-comment">// ── Factory Override 설정 (build_phase 맨 처음!) ──</span>
    <span class="hljs-comment">// counter_driver → counter_debug_driver로 교체</span>
    <span class="hljs-comment">// Ch.4에서 배운 패턴: 원본 타입 → 교체 타입</span>
    set_type_override_by_type(
      counter_driver::get_type(),        <span class="hljs-comment">// 원본</span>
      counter_debug_driver::get_type()   <span class="hljs-comment">// 교체</span>
    );

    `uvm_info(get_type_name(),
      <span class="hljs-string">&quot;Factory Override: counter_driver → counter_debug_driver&quot;</span>, UVM_NONE)

    <span class="hljs-comment">// super.build_phase에서 env를 생성할 때,</span>
    <span class="hljs-comment">// counter_driver::type_id::create()가 자동으로</span>
    <span class="hljs-comment">// counter_debug_driver를 생성합니다!</span>
    <span class="hljs-keyword">super</span><span class="hljs-variable">.build_phase</span>(phase);
  <span class="hljs-keyword">endfunction</span>

  <span class="hljs-keyword">task</span> run_phase(uvm_phase phase);
    <span class="hljs-comment">// Ch.9의 coverage_closure_test와 동일한 시퀀스 실행</span>
    counter_rst_with_en_seq rst_seq;

    phase<span class="hljs-variable">.raise_objection</span>(<span class="hljs-keyword">this</span>);

    <span class="hljs-comment">// 리셋</span>
    reset_dut();

    <span class="hljs-comment">// MISMATCH가 발생하는 시퀀스 실행</span>
    rst_seq = counter_rst_with_en_seq::type_id::create(<span class="hljs-string">&quot;rst_seq&quot;</span>);
    rst_seq<span class="hljs-variable">.start</span>(env<span class="hljs-variable">.agent</span><span class="hljs-variable">.sequencer</span>);

    phase<span class="hljs-variable">.drop_objection</span>(<span class="hljs-keyword">this</span>);
  <span class="hljs-keyword">endtask</span>
<span class="hljs-keyword">endclass</span>
</code></pre><p><strong>Factory Override 동작 원리 (Ch.4 복습):</strong></p>

<div style="text-align:center;margin:2rem 0">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 540 520" style="max-width:540px;width:100%;height:auto">
  <defs>
    <filter id="sh10f" x="-4%" y="-4%" width="108%" height="116%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-opacity="0.10"/>
    </filter>
    <marker id="arr10f" markerWidth="8" markerHeight="5.6" refX="7" refY="2.8" orient="auto">
      <polygon points="0 0,8 2.8,0 5.6" fill="#2563eb"/>
    </marker>
    <marker id="arr10o" markerWidth="8" markerHeight="5.6" refX="7" refY="2.8" orient="auto">
      <polygon points="0 0,8 2.8,0 5.6" fill="#f59e0b"/>
    </marker>
  </defs>

  <!-- Title -->
  <rect x="130" y="6" width="280" height="32" rx="16" fill="#1e293b"/>
  <text x="270" y="28" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="14" font-weight="bold" fill="#fff">Factory Override 동작 원리</text>

  <!-- Step 1: build_phase start -->
  <rect x="140" y="54" width="260" height="40" rx="10" fill="#f8fafc" stroke="#94a3b8" stroke-width="1.5" filter="url(#sh10f)"/>
  <text x="270" y="79" text-anchor="middle" font-family="'Fira Code',monospace" font-size="12" fill="#475569">build_phase 시작</text>

  <line x1="270" y1="94" x2="270" y2="122" stroke="#2563eb" stroke-width="1.5" marker-end="url(#arr10f)"/>

  <!-- Step 2: set_type_override -->
  <rect x="60" y="128" width="420" height="46" rx="10" fill="#f5f3ff" stroke="#7c3aed" stroke-width="2" filter="url(#sh10f)"/>
  <text x="270" y="150" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" font-weight="bold" fill="#5b21b6">set_type_override_by_type</text>
  <text x="270" y="165" text-anchor="middle" font-family="'Fira Code',monospace" font-size="10" fill="#7c3aed">(counter_driver → counter_debug_driver)</text>

  <line x1="270" y1="174" x2="270" y2="202" stroke="#2563eb" stroke-width="1.5" marker-end="url(#arr10f)"/>

  <!-- Step 3: super.build_phase -->
  <rect x="100" y="208" width="340" height="40" rx="10" fill="#eff6ff" stroke="#2563eb" stroke-width="2" filter="url(#sh10f)"/>
  <text x="270" y="233" text-anchor="middle" font-family="'Fira Code',monospace" font-size="12" fill="#1d4ed8">super.build_phase → counter_env</text>

  <line x1="270" y1="248" x2="270" y2="276" stroke="#2563eb" stroke-width="1.5" marker-end="url(#arr10f)"/>

  <!-- Step 4: counter_agent -->
  <rect x="120" y="282" width="300" height="40" rx="10" fill="#eff6ff" stroke="#2563eb" stroke-width="1.5" filter="url(#sh10f)"/>
  <text x="270" y="307" text-anchor="middle" font-family="'Fira Code',monospace" font-size="12" fill="#1d4ed8">counter_agent::build_phase</text>

  <line x1="270" y1="322" x2="270" y2="350" stroke="#2563eb" stroke-width="1.5" marker-end="url(#arr10f)"/>

  <!-- Step 5: type_id::create -->
  <rect x="80" y="356" width="380" height="40" rx="10" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" filter="url(#sh10f)"/>
  <text x="270" y="381" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#92400e">counter_driver::type_id::create("driver")</text>

  <line x1="270" y1="396" x2="270" y2="410" stroke="#f59e0b" stroke-width="1.5"/>
  <text x="400" y="412" text-anchor="start" font-family="'Noto Sans KR',sans-serif" font-size="11" fill="#b45309">Factory가 override 테이블 확인</text>
  <line x1="270" y1="410" x2="270" y2="432" stroke="#f59e0b" stroke-width="1.5" marker-end="url(#arr10o)"/>

  <!-- Step 6: Result -->
  <rect x="60" y="438" width="420" height="48" rx="12" fill="#ecfdf5" stroke="#10b981" stroke-width="3" filter="url(#sh10f)"/>
  <text x="270" y="460" text-anchor="middle" font-family="'Fira Code',monospace" font-size="12" font-weight="bold" fill="#065f46">counter_debug_driver 인스턴스 생성!</text>
  <text x="270" y="478" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="11" fill="#064e3b">(counter_driver 대신)</text>

</svg>
</div><p><strong>핵심 포인트:</strong></p>
<ul>
<li><code>set_type_override_by_type</code>은 <strong>반드시</strong> <code>super.build_phase</code> 호출 <strong>전에</strong> 설정해야 합니다</li>
<li>기존 <code>counter_env</code>, <code>counter_agent</code> 코드는 <strong>전혀 수정하지 않습니다</strong></li>
<li>Ch.4에서 배운 것처럼, Factory에 등록된(<code>uvm_component_utils</code>) 모든 컴포넌트를 이 방식으로 교체 가능합니다</li>
</ul>
<h3 id="10-4-3-실전-드라이버-vs-모니터-문제-분리">10.4.3 실전: 드라이버 vs 모니터 문제 분리</h3>
<p>MISMATCH가 발생했을 때, 원인이 어디에 있는지 분리하는 것이 중요합니다:</p>
<ul>
<li><strong>드라이버 문제</strong>: 시퀀스가 원하는 값을 인터페이스에 제대로 전달하지 못함</li>
<li><strong>모니터 문제</strong>: 인터페이스의 값을 잘못 샘플링하여 스코어보드에 틀린 정보 전달</li>
<li><strong>RTL 버그</strong>: 드라이버와 모니터 모두 정상이지만 DUT 자체에 버그</li>
</ul>
<p><strong>문제 분리 체크리스트:</strong></p>

<div style="text-align:center;margin:2rem 0">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 320" style="max-width:600px;width:100%;height:auto">
  <defs>
    <filter id="sh10i" x="-4%" y="-4%" width="108%" height="116%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-opacity="0.08"/>
    </filter>
  </defs>

  <!-- Title -->
  <rect x="150" y="6" width="300" height="32" rx="16" fill="#1e293b"/>
  <text x="300" y="28" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="14" font-weight="bold" fill="#fff">문제 분리 체크리스트</text>

  <!-- Step 1: Driver -->
  <rect x="20" y="52" width="560" height="74" rx="10" fill="#eff6ff" stroke="#2563eb" stroke-width="2" filter="url(#sh10i)"/>
  <rect x="30" y="58" width="100" height="24" rx="12" fill="#2563eb"/>
  <text x="80" y="75" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="12" font-weight="bold" fill="#fff">단계 1</text>
  <text x="145" y="75" text-anchor="start" font-family="'Noto Sans KR',sans-serif" font-size="13" font-weight="bold" fill="#1e40af">디버그 드라이버 교체 (Factory Override)</text>
  <text x="50" y="98" text-anchor="start" font-family="'Noto Sans KR',sans-serif" font-size="12" fill="#334155">└─ 드라이버가 인터페이스에 전달한 값 확인</text>
  <text x="50" y="116" text-anchor="start" font-family="'Noto Sans KR',sans-serif" font-size="12" fill="#334155">└─ 값이 시퀀스 아이템과 다르면 →</text>
  <text x="330" y="116" text-anchor="start" font-family="'Fira Code',monospace" font-size="12" font-weight="bold" fill="#dc2626">드라이버 버그</text>

  <!-- Step 2: Monitor -->
  <rect x="20" y="136" width="560" height="74" rx="10" fill="#f5f3ff" stroke="#7c3aed" stroke-width="2" filter="url(#sh10i)"/>
  <rect x="30" y="142" width="100" height="24" rx="12" fill="#7c3aed"/>
  <text x="80" y="159" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="12" font-weight="bold" fill="#fff">단계 2</text>
  <text x="145" y="159" text-anchor="start" font-family="'Noto Sans KR',sans-serif" font-size="13" font-weight="bold" fill="#5b21b6">디버그 모니터 교체 (Factory Override)</text>
  <text x="50" y="182" text-anchor="start" font-family="'Noto Sans KR',sans-serif" font-size="12" fill="#334155">└─ 모니터가 샘플링한 값 확인</text>
  <text x="50" y="200" text-anchor="start" font-family="'Noto Sans KR',sans-serif" font-size="12" fill="#334155">└─ 파형의 실제 값과 다르면 →</text>
  <text x="310" y="200" text-anchor="start" font-family="'Fira Code',monospace" font-size="12" font-weight="bold" fill="#dc2626">모니터 버그 (샘플 타이밍)</text>

  <!-- Step 3: RTL -->
  <rect x="20" y="220" width="560" height="74" rx="10" fill="#fef2f2" stroke="#ef4444" stroke-width="2" filter="url(#sh10i)"/>
  <rect x="30" y="226" width="100" height="24" rx="12" fill="#ef4444"/>
  <text x="80" y="243" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="12" font-weight="bold" fill="#fff">단계 3</text>
  <text x="145" y="243" text-anchor="start" font-family="'Noto Sans KR',sans-serif" font-size="13" font-weight="bold" fill="#dc2626">드라이버, 모니터 모두 정상이면</text>
  <text x="50" y="266" text-anchor="start" font-family="'Noto Sans KR',sans-serif" font-size="12" fill="#334155">└─ 파형에서 DUT 내부 신호 확인</text>
  <text x="50" y="284" text-anchor="start" font-family="'Noto Sans KR',sans-serif" font-size="12" fill="#334155">└─ RTL 로직 검토 →</text>
  <text x="215" y="284" text-anchor="start" font-family="'Fira Code',monospace" font-size="12" font-weight="bold" fill="#dc2626">RTL 버그</text>

</svg>
</div><p>우리의 4비트 카운터 예제에서는:</p>
<ol>
<li>디버그 드라이버: <code>rst_n=0</code>, <code>enable=1</code> 정상 전달 ✅</li>
<li>모니터: <code>count=5</code> 정확히 샘플링 ✅</li>
<li>→ <strong>RTL 버그</strong> 확정: 리셋 우선순위 오류</li>
</ol>
<blockquote>
<p>💡 <strong>실무 팁</strong>: 팹리스 회사에서 검증 엔지니어는 RTL을 직접 수정하지 않습니다. 대신 <strong>버그 리포트</strong>를 작성하여 설계 엔지니어에게 전달합니다. 리포트에는 &quot;언제, 어떤 입력에서, 예상값과 실제값이 어떻게 다른지&quot;를 명확히 기록합니다.</p>
</blockquote>
<hr>
<h2 id="10-5-흔한-uvm-에러-메시지-해석">10.5 흔한 UVM 에러 메시지 해석</h2>
<blockquote>
<p><strong>이 절의 목표</strong>: 실무에서 자주 만나는 UVM 에러 메시지를 즉시 해석하고 원인을 파악하는 능력을 기릅니다.</p>
</blockquote>
<p>UVM을 사용하면서 자주 만나는 에러 메시지들입니다. 에러 메시지를 보고 즉시 원인을 파악할 수 있으면 디버깅 시간이 크게 줄어듭니다.</p>
<h3 id="10-5-1-연결-에러-quot-port-is-not-connected-quot">10.5.1 연결 에러 — &quot;port is not connected&quot;</h3>
<pre><code>UVM_FATAL @ 0ns: uvm_test_top.env.agent.driver.seq_item_port
  [CONNECTION] port is not connected
</code></pre><p><strong>원인</strong>: <code>connect_phase</code>에서 포트 연결을 빠뜨렸습니다.</p>
<p><strong>해결:</strong></p>
<pre><code class="hljs language-systemverilog"><span class="hljs-comment">// ❌ 연결 누락</span>
<span class="hljs-keyword">function</span> <span class="hljs-keyword">void</span> connect_phase(uvm_phase phase);
  <span class="hljs-comment">// driver.seq_item_port 연결을 잊음!</span>
<span class="hljs-keyword">endfunction</span>

<span class="hljs-comment">// ✅ 올바른 연결</span>
<span class="hljs-keyword">function</span> <span class="hljs-keyword">void</span> connect_phase(uvm_phase phase);
  driver<span class="hljs-variable">.seq_item_port</span><span class="hljs-variable">.connect</span>(sequencer<span class="hljs-variable">.seq_item_export</span>);
<span class="hljs-keyword">endfunction</span>
</code></pre><p><strong>확인 방법</strong>: <code>connect_phase</code>에서 모든 포트가 연결되었는지 검토합니다. 특히 <code>analysis_port</code>, <code>seq_item_port</code>, <code>analysis_imp</code> 등을 확인하세요.</p>
<h3 id="10-5-2-factory-에러-quot-create-failed-quot">10.5.2 Factory 에러 — &quot;create failed&quot;</h3>
<pre><code>UVM_FATAL @ 0ns: reporter [FCTTYP] Factory create failed.
  No type registered with name &#39;counter_driver&#39;
</code></pre><p><strong>원인</strong>: <code>uvm_component_utils</code> 또는 <code>uvm_object_utils</code> 매크로를 빠뜨렸습니다.</p>
<p><strong>해결:</strong></p>
<pre><code class="hljs language-systemverilog"><span class="hljs-comment">// ❌ Factory 등록 누락</span>
<span class="hljs-keyword">class</span> counter_driver <span class="hljs-keyword">extends</span> uvm_driver <span class="hljs-variable">#(counter_seq_item)</span>;
  <span class="hljs-comment">// `uvm_component_utils(counter_driver)  ← 이 줄이 없음!</span>
<span class="hljs-keyword">endclass</span>

<span class="hljs-comment">// ✅ Factory 등록 포함</span>
<span class="hljs-keyword">class</span> counter_driver <span class="hljs-keyword">extends</span> uvm_driver <span class="hljs-variable">#(counter_seq_item)</span>;
  `uvm_component_utils(counter_driver)   <span class="hljs-comment">// ← 필수!</span>
<span class="hljs-keyword">endclass</span>
</code></pre><p><strong>확인 방법</strong>: 에러 메시지의 클래스 이름을 찾아 <code>uvm_component_utils</code> (컴포넌트) 또는 <code>uvm_object_utils</code> (트랜잭션/시퀀스)가 있는지 확인합니다.</p>
<h3 id="10-5-3-phase-에러-quot-objection-raised-but-not-dropped-quot">10.5.3 Phase 에러 — &quot;objection raised but not dropped&quot;</h3>
<pre><code>UVM_FATAL @ 100000ns: reporter [OBJTN]
  &#39;uvm_test_top&#39; raised 1 objection(s) but failed to drop them
</code></pre><p><strong>원인</strong>: <code>raise_objection</code>은 했지만 <code>drop_objection</code>을 하지 않아 시뮬레이션이 끝나지 않습니다. (타임아웃 후 FATAL)</p>
<p><strong>해결:</strong></p>
<pre><code class="hljs language-systemverilog"><span class="hljs-comment">// ❌ drop_objection 누락</span>
<span class="hljs-keyword">task</span> run_phase(uvm_phase phase);
  phase<span class="hljs-variable">.raise_objection</span>(<span class="hljs-keyword">this</span>);
  <span class="hljs-comment">// ... 시퀀스 실행 ...</span>
  <span class="hljs-comment">// phase.drop_objection(this);  ← 빠짐!</span>
<span class="hljs-keyword">endtask</span>

<span class="hljs-comment">// ✅ 올바른 objection 관리</span>
<span class="hljs-keyword">task</span> run_phase(uvm_phase phase);
  phase<span class="hljs-variable">.raise_objection</span>(<span class="hljs-keyword">this</span>);
  <span class="hljs-comment">// ... 시퀀스 실행 ...</span>
  phase<span class="hljs-variable">.drop_objection</span>(<span class="hljs-keyword">this</span>);   <span class="hljs-comment">// ← 반드시 짝 맞추기!</span>
<span class="hljs-keyword">endtask</span>
</code></pre><p><strong>확인 방법</strong>: <code>raise_objection</code>과 <code>drop_objection</code>이 항상 짝을 이루는지, 특히 <code>if</code>문이나 <code>fork</code> 안에서 한쪽만 실행되는 경로가 없는지 확인합니다.</p>
<h3 id="10-5-4-randomization-에러-quot-randomize-failed-quot">10.5.4 Randomization 에러 — &quot;randomize() failed&quot;</h3>
<pre><code>UVM_WARNING @ 50ns: reporter [RNDFLD]
  Randomization failed for counter_seq_item. Check constraints.
</code></pre><p><strong>원인</strong>: <code>constraint</code>끼리 모순이 있어서 만족하는 값이 없습니다.</p>
<p><strong>해결:</strong></p>
<pre><code class="hljs language-systemverilog"><span class="hljs-comment">// ❌ 모순되는 constraint</span>
<span class="hljs-keyword">class</span> counter_seq_item <span class="hljs-keyword">extends</span> uvm_sequence_item;
  <span class="hljs-keyword">rand</span> <span class="hljs-keyword">bit</span> rst_n;
  <span class="hljs-keyword">rand</span> <span class="hljs-keyword">bit</span> enable;

  <span class="hljs-keyword">constraint</span> c1 { rst_n == <span class="hljs-number">1</span>; }
  <span class="hljs-keyword">constraint</span> c2 { rst_n == <span class="hljs-number">0</span>; }  <span class="hljs-comment">// c1과 모순!</span>
<span class="hljs-keyword">endclass</span>

<span class="hljs-comment">// ✅ constraint 검토 후 수정</span>
<span class="hljs-keyword">class</span> counter_seq_item <span class="hljs-keyword">extends</span> uvm_sequence_item;
  <span class="hljs-keyword">rand</span> <span class="hljs-keyword">bit</span> rst_n;
  <span class="hljs-keyword">rand</span> <span class="hljs-keyword">bit</span> enable;

  <span class="hljs-keyword">constraint</span> c_normal {
    rst_n <span class="hljs-keyword">dist</span> {<span class="hljs-number">0</span> := <span class="hljs-number">10</span>, <span class="hljs-number">1</span> := <span class="hljs-number">90</span>};  <span class="hljs-comment">// 모순 없는 분포</span>
  }
<span class="hljs-keyword">endclass</span>
</code></pre><p><strong>확인 방법</strong>: <code>randomize()</code> 호출 시 반환값을 체크합니다:</p>
<pre><code class="hljs language-systemverilog"><span class="hljs-comment">// 안전한 randomization 패턴</span>
<span class="hljs-keyword">if</span> (!item<span class="hljs-variable">.randomize</span>())
  `uvm_error(<span class="hljs-string">&quot;SEQ&quot;</span>, <span class="hljs-string">&quot;randomize() 실패 — constraint 확인 필요&quot;</span>)
</code></pre><h3 id="10-5-5-config-db-에러-quot-config-db-get-failed-quot">10.5.5 Config DB 에러 — &quot;config_db::get failed&quot;</h3>
<pre><code>UVM_FATAL @ 0ns: uvm_test_top.env.agent.driver [CFGDB]
  config_db::get failed for &#39;vif&#39;
</code></pre><p><strong>원인</strong>: <code>uvm_config_db#(...)::set</code>과 <code>::get</code>의 경로나 키 이름이 불일치합니다.</p>
<p><strong>해결:</strong></p>
<pre><code class="hljs language-systemverilog"><span class="hljs-comment">// ── tb_top.sv에서 set ──</span>
<span class="hljs-keyword">initial</span> <span class="hljs-keyword">begin</span>
  uvm_config_db<span class="hljs-variable">#(virtual counter_if)</span>::set(
    <span class="hljs-literal">null</span>,              <span class="hljs-comment">// context</span>
    <span class="hljs-string">&quot;uvm_test_top.*&quot;</span>,  <span class="hljs-comment">// scope (와일드카드)</span>
    <span class="hljs-string">&quot;vif&quot;</span>,             <span class="hljs-comment">// 키 이름</span>
    counter_intf       <span class="hljs-comment">// 값</span>
  );
<span class="hljs-keyword">end</span>

<span class="hljs-comment">// ── driver에서 get ──</span>
<span class="hljs-keyword">function</span> <span class="hljs-keyword">void</span> build_phase(uvm_phase phase);
  <span class="hljs-keyword">if</span> (!uvm_config_db<span class="hljs-variable">#(virtual counter_if)</span>::get(
    <span class="hljs-keyword">this</span>,    <span class="hljs-comment">// context</span>
    <span class="hljs-string">&quot;&quot;</span>,      <span class="hljs-comment">// scope</span>
    <span class="hljs-string">&quot;vif&quot;</span>,   <span class="hljs-comment">// 키 이름 — set과 동일해야 함!</span>
    vif      <span class="hljs-comment">// 변수</span>
  ))
    `uvm_fatal(get_type_name(), <span class="hljs-string">&quot;config_db::get failed for &#x27;vif&#x27;&quot;</span>)
<span class="hljs-keyword">endfunction</span>
</code></pre><p><strong>흔한 실수 3가지:</strong></p>
<ol>
<li><code>set</code>의 키가 <code>&quot;vif&quot;</code>인데 <code>get</code>에서 <code>&quot;v_if&quot;</code>로 <strong>오타</strong></li>
<li><code>set</code>의 scope가 <code>&quot;uvm_test_top.env.*&quot;</code>인데 컴포넌트 <strong>경로가 맞지 않음</strong></li>
<li><code>set</code>의 타입이 <code>virtual counter_if</code>인데 <code>get</code>에서 <strong>다른 인터페이스 타입</strong> 사용</li>
</ol>
<h3 id="10-5-6-에러-메시지-빠른-참조-표">10.5.6 에러 메시지 빠른 참조 표</h3>
<table>
<thead>
<tr>
<th>에러 메시지</th>
<th>원인</th>
<th>확인 위치</th>
<th>해결 방법</th>
</tr>
</thead>
<tbody><tr>
<td><code>port is not connected</code></td>
<td>포트 연결 누락</td>
<td><code>connect_phase</code></td>
<td>포트 연결 추가</td>
</tr>
<tr>
<td><code>create failed</code></td>
<td>Factory 등록 누락</td>
<td>클래스 선언부</td>
<td><code>uvm_component_utils</code> 추가</td>
</tr>
<tr>
<td><code>objection raised but not dropped</code></td>
<td>drop 누락</td>
<td><code>run_phase</code></td>
<td><code>drop_objection</code> 추가</td>
</tr>
<tr>
<td><code>randomize() failed</code></td>
<td>constraint 모순</td>
<td>constraint 블록</td>
<td>constraint 검토/수정</td>
</tr>
<tr>
<td><code>config_db::get failed</code></td>
<td>set/get 불일치</td>
<td><code>tb_top</code>, <code>build_phase</code></td>
<td>키 이름, 경로, 타입 확인</td>
</tr>
<tr>
<td><code>sequence not started</code></td>
<td>start() 누락</td>
<td><code>run_phase</code></td>
<td><code>seq.start(sequencer)</code> 호출</td>
</tr>
<tr>
<td><code>null object access</code></td>
<td>create() 누락</td>
<td><code>build_phase</code></td>
<td><code>type_id::create()</code> 확인</td>
</tr>
<tr>
<td><code>duplicate port name</code></td>
<td>같은 이름 포트 중복</td>
<td><code>build_phase</code></td>
<td>포트 이름 변경</td>
</tr>
<tr>
<td><code>type mismatch</code></td>
<td>타입 불일치</td>
<td><code>analysis_imp</code> 선언</td>
<td>파라미터 타입 확인</td>
</tr>
<tr>
<td><code>phase timeout</code></td>
<td>시뮬레이션 무한 루프</td>
<td><code>run_phase</code></td>
<td>종료 조건 확인</td>
</tr>
</tbody></table>
<blockquote>
<p>💡 <strong>실무 팁</strong>: 이 표를 프린트해서 책상에 두세요. 초보 시절에는 이 에러들을 반복적으로 만나게 됩니다. 시간이 지나면 에러 메시지를 보는 즉시 원인을 파악할 수 있게 됩니다.</p>
</blockquote>
<p><strong><code>uvm_report_catcher</code> — 고급 참고:</strong></p>
<p>UVM은 <code>uvm_report_catcher</code>라는 고급 기능도 제공합니다. 특정 에러 메시지를 프로그래밍적으로 필터링하거나 심각도를 변경할 수 있습니다. 예를 들어, 의도적으로 에러를 주입하는 테스트에서 예상된 <code>UVM_ERROR</code>를 <code>UVM_INFO</code>로 다운그레이드할 수 있습니다. 이 기능은 Part 3에서 자세히 다룹니다.</p>
<hr>
<h2 id="10-6-실전-mismatch-원인-찾기">10.6 실전: MISMATCH 원인 찾기</h2>
<blockquote>
<p><strong>이 절의 목표</strong>: 지금까지 배운 모든 디버깅 기법을 종합하여, 의도적 버그가 주입된 DUT에서 MISMATCH 원인을 찾는 <strong>전체 과정</strong>을 단계별로 경험합니다.</p>
</blockquote>
<h3 id="10-6-1-시나리오-의도적-버그-주입">10.6.1 시나리오 — 의도적 버그 주입</h3>
<p><strong>DUT</strong>: 4비트 카운터 (Ch.5~Ch.10 시리즈)
<strong>버그</strong>: 리셋 우선순위 오류 — <code>rst_n=0</code>이면서 <code>enable=1</code>일 때 리셋이 무시됨</p>
<pre><code class="hljs language-systemverilog"><span class="hljs-comment">// ──────────────────────────────────────────</span>
<span class="hljs-comment">// 버그가 있는 4비트 카운터 RTL</span>
<span class="hljs-comment">// 파일: counter_bug.sv</span>
<span class="hljs-comment">// 버그: enable이 rst_n보다 우선순위가 높음</span>
<span class="hljs-comment">// ──────────────────────────────────────────</span>
<span class="hljs-keyword">module</span> counter_4bit (
  <span class="hljs-keyword">input</span>  <span class="hljs-keyword">logic</span>       clk,
  <span class="hljs-keyword">input</span>  <span class="hljs-keyword">logic</span>       rst_n,    <span class="hljs-comment">// 액티브 로우 리셋</span>
  <span class="hljs-keyword">input</span>  <span class="hljs-keyword">logic</span>       enable,   <span class="hljs-comment">// 카운트 인에이블</span>
  <span class="hljs-keyword">output</span> <span class="hljs-keyword">logic</span> [<span class="hljs-number">3</span>:<span class="hljs-number">0</span>] count     <span class="hljs-comment">// 4비트 카운터 출력</span>
);

  <span class="hljs-keyword">always_ff</span> @(<span class="hljs-keyword">posedge</span> clk) <span class="hljs-keyword">begin</span>
    <span class="hljs-keyword">if</span> (enable)          <span class="hljs-comment">// ❌ 버그: enable을 먼저 검사</span>
      count &lt;= count + <span class="hljs-number">1</span>;
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!rst_n)     <span class="hljs-comment">// ❌ 버그: 리셋이 나중에 검사됨</span>
      count &lt;= <span class="hljs-number">4&#x27;b0</span>;
    <span class="hljs-keyword">else</span>
      count &lt;= count;    <span class="hljs-comment">// hold</span>
  <span class="hljs-keyword">end</span>

<span class="hljs-keyword">endmodule</span>
</code></pre><p><strong>테스트</strong>: Ch.9의 <code>counter_coverage_closure_test</code> 실행</p>
<h3 id="10-6-2-단계별-디버깅-프로세스">10.6.2 단계별 디버깅 프로세스</h3>
<p><strong>[1단계] 시뮬레이션 실행 — MISMATCH 발견</strong></p>
<pre><code class="hljs language-bash"><span class="hljs-comment"># Ch.9의 커버리지 클로저 테스트 실행</span>
vsim +UVM_TESTNAME=counter_coverage_closure_test
</code></pre><p>실행 결과:</p>

<div class="svg-diagram">
<svg viewBox="0 0 600 200" xmlns="http://www.w3.org/2000/svg" style="max-width:600px;width:100%">
  
  <style>
    .diagram-box { fill: #ffffff; stroke: #334155; stroke-width: 2; rx: 10; ry: 10; }
    .diagram-box-accent { fill: #eff6ff; stroke: #2563eb; stroke-width: 2; rx: 10; ry: 10; }
    .diagram-box-highlight { fill: #fef3c7; stroke: #f59e0b; stroke-width: 2.5; rx: 10; ry: 10; }
    .diagram-box-dark { fill: #1e293b; stroke: #1e293b; stroke-width: 2; rx: 10; ry: 10; }
    .diagram-box-run { fill: #fef3c7; stroke: #f59e0b; stroke-width: 3; rx: 10; ry: 10; }
    .diagram-box-green { fill: #ecfdf5; stroke: #10b981; stroke-width: 2; rx: 10; ry: 10; }
    .diagram-box-purple { fill: #f5f3ff; stroke: #7c3aed; stroke-width: 2; rx: 10; ry: 10; }
    .diagram-box-red { fill: #fef2f2; stroke: #ef4444; stroke-width: 2; rx: 10; ry: 10; }
    .diagram-box-gray { fill: #f8fafc; stroke: #94a3b8; stroke-width: 1.5; rx: 8; ry: 8; }
    .diagram-text { font-family: 'Noto Sans KR', sans-serif; fill: #1e293b; }
    .diagram-text-white { font-family: 'Noto Sans KR', sans-serif; fill: #ffffff; }
    .diagram-text-accent { font-family: 'Noto Sans KR', sans-serif; fill: #2563eb; }
    .diagram-text-small { font-family: 'Noto Sans KR', sans-serif; fill: #64748b; font-size: 12px; }
    .diagram-text-code { font-family: 'Fira Code', 'JetBrains Mono', monospace; fill: #1e293b; }
    .diagram-arrow { fill: none; stroke: #64748b; stroke-width: 1.5; }
    .diagram-arrow-accent { fill: none; stroke: #2563eb; stroke-width: 1.5; }
    .diagram-line { stroke: #cbd5e1; stroke-width: 1.5; stroke-dasharray: 6,3; }
  </style>
  <defs>
    <marker id="arrowhead" markerWidth="8" markerHeight="5.6" refX="7" refY="2.8" orient="auto">
      <polygon points="0 0, 8 2.8, 0 5.6" fill="#64748b" />
    </marker>
    <marker id="arrowhead-accent" markerWidth="8" markerHeight="5.6" refX="7" refY="2.8" orient="auto">
      <polygon points="0 0, 8 2.8, 0 5.6" fill="#2563eb" />
    </marker>
    <marker id="arrowhead-dark" markerWidth="8" markerHeight="5.6" refX="7" refY="2.8" orient="auto">
      <polygon points="0 0, 8 2.8, 0 5.6" fill="#1e293b" />
    </marker>
    <marker id="arrowhead-orange" markerWidth="8" markerHeight="5.6" refX="7" refY="2.8" orient="auto">
      <polygon points="0 0, 8 2.8, 0 5.6" fill="#f59e0b" />
    </marker>
    <filter id="shadow" x="-5%" y="-5%" width="115%" height="115%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="#000" flood-opacity="0.1"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect x="10" y="10" width="580" height="180" rx="10" ry="10" fill="#0f172a" filter="url(#shadow)"/>

  <!-- Title -->
  <text x="30" y="38" font-family="'Fira Code','JetBrains Mono',monospace" fill="#f59e0b" font-size="12" font-weight="bold">--- UVM Report Summary ---</text>
  <text x="30" y="58" font-family="'Fira Code','JetBrains Mono',monospace" fill="#94a3b8" font-size="11">** Report counts by severity</text>
  <text x="380" y="58" font-family="'Noto Sans KR',sans-serif" fill="#64748b" font-size="10">심각도별 메시지 개수</text>

  <!-- UVM_INFO -->
  <text x="30" y="84" font-family="'Fira Code','JetBrains Mono',monospace" fill="#4ade80" font-size="12">UVM_INFO :    4</text>
  <text x="380" y="84" font-family="'Noto Sans KR',sans-serif" fill="#64748b" font-size="10">INFO 메시지 4개</text>

  <!-- UVM_WARNING -->
  <text x="30" y="108" font-family="'Fira Code','JetBrains Mono',monospace" fill="#fbbf24" font-size="12">UVM_WARNING :    0</text>
  <text x="380" y="108" font-family="'Noto Sans KR',sans-serif" fill="#64748b" font-size="10">경고 없음</text>

  <!-- UVM_ERROR -->
  <rect x="22" y="118" width="340" height="22" rx="4" ry="4" fill="#052e16" stroke="#10b981" stroke-width="1" opacity="0.6"/>
  <text x="30" y="134" font-family="'Fira Code','JetBrains Mono',monospace" fill="#4ade80" font-size="12" font-weight="bold">UVM_ERROR :    0</text>
  <text x="380" y="134" font-family="'Noto Sans KR',sans-serif" fill="#10b981" font-size="11" font-weight="bold">에러 없음 ✓</text>

  <!-- UVM_FATAL -->
  <rect x="22" y="142" width="340" height="22" rx="4" ry="4" fill="#052e16" stroke="#10b981" stroke-width="1" opacity="0.6"/>
  <text x="30" y="158" font-family="'Fira Code','JetBrains Mono',monospace" fill="#4ade80" font-size="12" font-weight="bold">UVM_FATAL :    0</text>
  <text x="380" y="158" font-family="'Noto Sans KR',sans-serif" fill="#10b981" font-size="11" font-weight="bold">치명적 에러 없음 ✓</text>

  <!-- Note -->
  <text x="300" y="182" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" fill="#94a3b8" font-size="10" font-style="italic">이 두 줄이 0이면 정상 종료!</text>
</svg>
</div><p><strong>발견</strong>: <code>rst_n=0, enable=1</code> 조합에서 MISMATCH가 5건 발생했습니다. Ch.9에서 추가한 <code>counter_rst_with_en_seq</code> (타겟 시퀀스)가 이 조합을 테스트하는 시퀀스였습니다.</p>
<p><strong>[2단계] Verbosity 올리기 — 상세 로그 확인</strong></p>
<pre><code class="hljs language-bash"><span class="hljs-comment"># 스코어보드의 verbosity를 HIGH로 올려 재실행</span>
vsim +UVM_TESTNAME=counter_coverage_closure_test \
     +uvm_set_verbosity=*scoreboard*,_ALL_,UVM_HIGH,run
</code></pre><pre><code>UVM_INFO @ 830ns: uvm_test_top.env.scoreboard [counter_scoreboard]
  트랜잭션 #41: predict(1, 1, 11) → expected=12, actual=12 ✓ MATCH

UVM_INFO @ 850ns: uvm_test_top.env.scoreboard [counter_scoreboard]
  트랜잭션 #42: predict(0, 1, 12) → expected=0
UVM_INFO @ 850ns: uvm_test_top.env.scoreboard [counter_scoreboard]
  DUT 실제값: count=5
UVM_ERROR @ 850ns: uvm_test_top.env.scoreboard [counter_scoreboard]
  MISMATCH! expected=0, actual=5 (rst_n=0, enable=1)
</code></pre><p><strong>분석</strong>: 트랜잭션 #41까지는 정상(MATCH). 트랜잭션 #42에서 <code>rst_n</code>이 0으로 변경되었고, 레퍼런스 모델은 <code>count=0</code>을 예측했지만 DUT는 <code>count=5</code>를 출력했습니다.</p>
<p><strong>[3단계] Factory Override — 디버그 드라이버 교체</strong></p>
<pre><code class="hljs language-bash"><span class="hljs-comment"># 디버그 테스트로 재실행</span>
vsim +UVM_TESTNAME=counter_factory_debug_test
</code></pre><pre><code>UVM_INFO @ 0ns: uvm_test_top [counter_factory_debug_test]
  Factory Override: counter_driver → counter_debug_driver

UVM_INFO @ 0ns: uvm_test_top.env.agent.driver [counter_debug_driver]
  === 디버그 드라이버 활성화 ===

UVM_INFO @ 840ns: uvm_test_top.env.agent.driver [counter_debug_driver]
  [840ns] 전송 전: vif.rst_n=1, vif.enable=1, vif.count=12
UVM_INFO @ 845ns: uvm_test_top.env.agent.driver [counter_debug_driver]
  [845ns] 전송 후: rst_n=1→0, enable=1→1

UVM_ERROR @ 850ns: uvm_test_top.env.scoreboard [counter_scoreboard]
  MISMATCH! expected=0, actual=5 (rst_n=0, enable=1)
</code></pre><p><strong>분석</strong>: 디버그 드라이버가 확인한 바로는, <code>rst_n=0</code>이 845ns에 인터페이스에 정상 전달되었습니다. 드라이버는 정상입니다.</p>
<p><strong>[4단계] 파형 확인 — RTL 내부 분석</strong></p>
<p>GTKWave에서 <code>counter_debug.vcd</code>를 열고 850ns 시점으로 이동:</p>

<div style="text-align:center;margin:2rem 0">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 720 310" style="max-width:720px;width:100%;height:auto">
  <defs>
    <filter id="sh10w" x="-2%" y="-4%" width="104%" height="112%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-opacity="0.08"/>
    </filter>
  </defs>

  <!-- Title -->
  <rect x="200" y="6" width="320" height="32" rx="16" fill="#1e293b"/>
  <text x="360" y="28" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="14" font-weight="bold" fill="#fff">MISMATCH 시점 파형 분석</text>

  <!-- Header row -->
  <rect x="10" y="50" width="700" height="30" rx="6" fill="#f1f5f9" stroke="#cbd5e1" stroke-width="1"/>
  <text x="55" y="70" text-anchor="middle" font-family="'Fira Code',monospace" font-size="12" font-weight="bold" fill="#334155">시간</text>
  <text x="145" y="70" text-anchor="middle" font-family="'Fira Code',monospace" font-size="12" font-weight="bold" fill="#334155">clk</text>
  <text x="225" y="70" text-anchor="middle" font-family="'Fira Code',monospace" font-size="12" font-weight="bold" fill="#334155">rst_n</text>
  <text x="315" y="70" text-anchor="middle" font-family="'Fira Code',monospace" font-size="12" font-weight="bold" fill="#334155">enable</text>
  <text x="405" y="70" text-anchor="middle" font-family="'Fira Code',monospace" font-size="12" font-weight="bold" fill="#334155">count</text>
  <text x="575" y="70" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="12" font-weight="bold" fill="#334155">분석</text>

  <!-- Row 830ns — normal -->
  <rect x="10" y="82" width="700" height="28" rx="0" fill="#ffffff"/>
  <text x="55" y="100" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">830ns</text>
  <text x="145" y="100" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">↑</text>
  <text x="225" y="100" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#16a34a" font-weight="bold">1</text>
  <text x="315" y="100" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">1</text>
  <text x="405" y="100" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">12</text>
  <text x="575" y="100" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="11" fill="#475569">정상 카운팅</text>

  <!-- Row 840ns — normal -->
  <rect x="10" y="110" width="700" height="28" rx="0" fill="#f8fafc"/>
  <text x="55" y="128" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">840ns</text>
  <text x="145" y="128" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">↑</text>
  <text x="225" y="128" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#16a34a" font-weight="bold">1</text>
  <text x="315" y="128" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">1</text>
  <text x="405" y="128" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">13</text>
  <text x="575" y="128" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="11" fill="#475569"></text>

  <!-- Row 845ns — rst_n changes -->
  <rect x="10" y="138" width="700" height="28" rx="0" fill="#fff7ed"/>
  <text x="55" y="156" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#ea580c">845ns</text>
  <text x="145" y="156" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#94a3b8"></text>
  <text x="225" y="156" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#dc2626" font-weight="bold">0</text>
  <text x="315" y="156" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">1</text>
  <text x="405" y="156" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">13</text>
  <text x="575" y="156" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="11" fill="#ea580c">rst_n↓ (클록 에지 사이)</text>

  <!-- Row 850ns — ERROR -->
  <rect x="10" y="166" width="700" height="28" rx="0" fill="#fef2f2" stroke="#fca5a5" stroke-width="1"/>
  <text x="55" y="184" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#dc2626" font-weight="bold">850ns</text>
  <text x="145" y="184" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">↑</text>
  <text x="225" y="184" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#dc2626" font-weight="bold">0</text>
  <text x="315" y="184" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">1</text>
  <text x="405" y="184" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#dc2626" font-weight="bold">5</text>
  <text x="575" y="184" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="11" fill="#dc2626" font-weight="bold">❌ 0이어야 하는데!</text>

  <!-- Row 855ns — ERROR continues -->
  <rect x="10" y="194" width="700" height="28" rx="0" fill="#fef2f2" stroke="#fca5a5" stroke-width="1"/>
  <text x="55" y="212" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#dc2626" font-weight="bold">855ns</text>
  <text x="145" y="212" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">↑</text>
  <text x="225" y="212" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#dc2626" font-weight="bold">0</text>
  <text x="315" y="212" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">1</text>
  <text x="405" y="212" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#dc2626" font-weight="bold">6</text>
  <text x="575" y="212" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="11" fill="#dc2626" font-weight="bold">❌ 여전히 카운팅</text>

  <!-- Row 860ns — finally resets -->
  <rect x="10" y="222" width="700" height="28" rx="0" fill="#ecfdf5"/>
  <text x="55" y="240" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#166534">860ns</text>
  <text x="145" y="240" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">↑</text>
  <text x="225" y="240" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#dc2626" font-weight="bold">0</text>
  <text x="315" y="240" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#16a34a" font-weight="bold">0</text>
  <text x="405" y="240" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#16a34a" font-weight="bold">0</text>
  <text x="575" y="240" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="11" fill="#166534">enable=0 → 리셋 적용</text>

  <!-- Separator lines -->
  <line x1="100" y1="50" x2="100" y2="250" stroke="#e2e8f0" stroke-width="1"/>
  <line x1="185" y1="50" x2="185" y2="250" stroke="#e2e8f0" stroke-width="1"/>
  <line x1="270" y1="50" x2="270" y2="250" stroke="#e2e8f0" stroke-width="1"/>
  <line x1="360" y1="50" x2="360" y2="250" stroke="#e2e8f0" stroke-width="1"/>
  <line x1="450" y1="50" x2="450" y2="250" stroke="#e2e8f0" stroke-width="1"/>

  <!-- Bug indicator -->
  <rect x="140" y="265" width="440" height="32" rx="8" fill="#fef2f2" stroke="#ef4444" stroke-width="2"/>
  <text x="360" y="286" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="12" font-weight="bold" fill="#dc2626">🔍 rst_n=0 + enable=1 → 리셋 무시됨 (RTL 우선순위 버그)</text>

</svg>
</div><p><strong>발견</strong>: <code>rst_n=0</code>이면서 <code>enable=1</code>일 때, 카운터가 리셋되지 않고 계속 카운팅합니다. <code>enable=0</code>이 되어야 비로소 리셋이 적용됩니다.</p>
<h3 id="10-6-3-원인-발견-및-수정">10.6.3 원인 발견 및 수정</h3>
<p><strong>버그 원인</strong>: RTL의 <code>if-else</code> 우선순위</p>
<pre><code class="hljs language-systemverilog"><span class="hljs-comment">// ── 버그 있는 코드 ──</span>
<span class="hljs-keyword">always_ff</span> @(<span class="hljs-keyword">posedge</span> clk) <span class="hljs-keyword">begin</span>
  <span class="hljs-keyword">if</span> (enable)          <span class="hljs-comment">// ← enable이 최우선 → 리셋 무시!</span>
    count &lt;= count + <span class="hljs-number">1</span>;
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!rst_n)     <span class="hljs-comment">// ← enable=0일 때만 리셋 검사</span>
    count &lt;= <span class="hljs-number">4&#x27;b0</span>;
<span class="hljs-keyword">end</span>
</code></pre><p><strong>수정:</strong></p>
<pre><code class="hljs language-systemverilog"><span class="hljs-comment">// ── 수정된 코드 ──</span>
<span class="hljs-keyword">always_ff</span> @(<span class="hljs-keyword">posedge</span> clk) <span class="hljs-keyword">begin</span>
  <span class="hljs-keyword">if</span> (!rst_n)          <span class="hljs-comment">// ✅ 리셋이 최우선</span>
    count &lt;= <span class="hljs-number">4&#x27;b0</span>;
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (enable)     <span class="hljs-comment">// ✅ 리셋 아닐 때만 카운팅</span>
    count &lt;= count + <span class="hljs-number">1</span>;
<span class="hljs-keyword">end</span>
</code></pre><p><strong>버그 리포트 예시:</strong></p>
<p>실무에서 검증 엔지니어가 설계 엔지니어에게 전달하는 버그 리포트입니다:</p>
<table>
<thead>
<tr>
<th>항목</th>
<th>내용</th>
</tr>
</thead>
<tbody><tr>
<td><strong>제목</strong></td>
<td>4비트 카운터 리셋 우선순위 오류</td>
</tr>
<tr>
<td><strong>심각도</strong></td>
<td>High</td>
</tr>
<tr>
<td><strong>발견 테스트</strong></td>
<td><code>counter_coverage_closure_test</code> (<code>rst_with_en_seq</code> 실행 중)</td>
</tr>
<tr>
<td><strong>증상</strong></td>
<td><code>rst_n=0</code>, <code>enable=1</code>일 때 count가 0으로 리셋되지 않고 계속 증가</td>
</tr>
<tr>
<td><strong>원인</strong></td>
<td><code>always_ff</code> 블록에서 enable 조건이 rst_n보다 먼저 평가됨</td>
</tr>
<tr>
<td><strong>수정 제안</strong></td>
<td><code>if(!rst_n)</code> 조건을 <code>if(enable)</code> 앞으로 이동</td>
</tr>
<tr>
<td><strong>재현</strong></td>
<td>seed=12345, 트랜잭션 #42 시점 (850ns)</td>
</tr>
</tbody></table>
<h3 id="10-6-4-수정-검증-regression-확인">10.6.4 수정 검증 — regression 확인</h3>
<p>수정 후에는 <strong>반드시</strong> regression을 실행하여 다른 테스트에 영향이 없는지 확인합니다.</p>
<pre><code class="hljs language-bash"><span class="hljs-comment"># ── 수정 검증 regression ──</span>

<span class="hljs-comment"># 1. 문제가 발생했던 테스트 재실행</span>
vsim +UVM_TESTNAME=counter_coverage_closure_test +ntb_random_seed=12345
<span class="hljs-comment"># → 결과: PASS (MISMATCH 0건)</span>

<span class="hljs-comment"># 2. 모든 테스트 regression</span>
vsim +UVM_TESTNAME=counter_reset_test +ntb_random_seed=12345
<span class="hljs-comment"># → 결과: PASS</span>

vsim +UVM_TESTNAME=counter_random_test +ntb_random_seed=12345
<span class="hljs-comment"># → 결과: PASS</span>

vsim +UVM_TESTNAME=counter_random_test +ntb_random_seed=67890
<span class="hljs-comment"># → 결과: PASS</span>

vsim +UVM_TESTNAME=counter_coverage_closure_test +ntb_random_seed=67890
<span class="hljs-comment"># → 결과: PASS</span>
</code></pre><p><strong>Regression 결과 요약:</strong></p>

<div style="text-align:center;margin:2rem 0">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 560 280" style="max-width:560px;width:100%;height:auto">
  <defs>
    <filter id="sh10r" x="-2%" y="-4%" width="104%" height="112%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-opacity="0.08"/>
    </filter>
  </defs>

  <!-- Title -->
  <rect x="140" y="6" width="280" height="32" rx="16" fill="#1e293b"/>
  <text x="280" y="28" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="14" font-weight="bold" fill="#fff">Regression 결과 요약</text>

  <!-- Header -->
  <rect x="20" y="50" width="520" height="30" rx="6" fill="#f1f5f9" stroke="#cbd5e1" stroke-width="1"/>
  <text x="190" y="70" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="12" font-weight="bold" fill="#334155">테스트</text>
  <text x="390" y="70" text-anchor="middle" font-family="'Fira Code',monospace" font-size="12" font-weight="bold" fill="#334155">Seed</text>
  <text x="490" y="70" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="12" font-weight="bold" fill="#334155">결과</text>

  <!-- Row 1 -->
  <rect x="20" y="82" width="520" height="28" rx="0" fill="#ffffff"/>
  <text x="190" y="100" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">counter_reset_test</text>
  <text x="390" y="100" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">12345</text>
  <rect x="468" y="88" width="50" height="18" rx="9" fill="#ecfdf5" stroke="#10b981" stroke-width="1"/>
  <text x="493" y="101" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="11" font-weight="bold" fill="#065f46">PASS</text>

  <!-- Row 2 -->
  <rect x="20" y="110" width="520" height="28" rx="0" fill="#f8fafc"/>
  <text x="190" y="128" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">counter_random_test</text>
  <text x="390" y="128" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">12345</text>
  <rect x="468" y="116" width="50" height="18" rx="9" fill="#ecfdf5" stroke="#10b981" stroke-width="1"/>
  <text x="493" y="129" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="11" font-weight="bold" fill="#065f46">PASS</text>

  <!-- Row 3 -->
  <rect x="20" y="138" width="520" height="28" rx="0" fill="#ffffff"/>
  <text x="190" y="156" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">counter_random_test</text>
  <text x="390" y="156" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">67890</text>
  <rect x="468" y="144" width="50" height="18" rx="9" fill="#ecfdf5" stroke="#10b981" stroke-width="1"/>
  <text x="493" y="157" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="11" font-weight="bold" fill="#065f46">PASS</text>

  <!-- Row 4 -->
  <rect x="20" y="166" width="520" height="28" rx="0" fill="#f8fafc"/>
  <text x="190" y="184" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">counter_coverage_closure_test</text>
  <text x="390" y="184" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">12345</text>
  <rect x="468" y="172" width="50" height="18" rx="9" fill="#ecfdf5" stroke="#10b981" stroke-width="1"/>
  <text x="493" y="185" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="11" font-weight="bold" fill="#065f46">PASS</text>

  <!-- Row 5 -->
  <rect x="20" y="194" width="520" height="28" rx="0" fill="#ffffff"/>
  <text x="190" y="212" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">counter_coverage_closure_test</text>
  <text x="390" y="212" text-anchor="middle" font-family="'Fira Code',monospace" font-size="11" fill="#475569">67890</text>
  <rect x="468" y="200" width="50" height="18" rx="9" fill="#ecfdf5" stroke="#10b981" stroke-width="1"/>
  <text x="493" y="213" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="11" font-weight="bold" fill="#065f46">PASS</text>

  <!-- Separator -->
  <line x1="20" y1="224" x2="540" y2="224" stroke="#cbd5e1" stroke-width="1.5"/>

  <!-- Total row -->
  <rect x="20" y="228" width="520" height="34" rx="0" fill="#ecfdf5"/>
  <text x="190" y="250" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="13" font-weight="bold" fill="#065f46">전체</text>
  <rect x="445" y="236" width="80" height="22" rx="11" fill="#10b981"/>
  <text x="485" y="252" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="12" font-weight="bold" fill="#fff">5/5 PASS</text>

  <!-- Table border -->
  <rect x="20" y="50" width="520" height="212" rx="6" fill="none" stroke="#cbd5e1" stroke-width="1.5"/>
  <!-- Column separators -->
  <line x1="335" y1="50" x2="335" y2="262" stroke="#e2e8f0" stroke-width="1"/>
  <line x1="440" y1="50" x2="440" y2="262" stroke="#e2e8f0" stroke-width="1"/>

</svg>
</div><p>모든 테스트가 PASS했습니다. 버그 수정이 확인되었고, 기존 기능에 영향을 주지 않았습니다.</p>
<blockquote>
<p>💡 <strong>실무 팁</strong>: regression은 수정 후 반드시 실행해야 합니다. &quot;한 줄만 고쳤으니 괜찮겠지&quot;라는 생각은 금물입니다. 실무에서는 하루에도 수십 개의 수정이 발생하며, regression이 이를 지켜줍니다. Ch.9에서 배운 seed 관리와 regression 스크립트가 여기서 빛을 발합니다.</p>
</blockquote>
<hr>
<h2 id="10-7-체크포인트">10.7 체크포인트</h2>
<blockquote>
<p><strong>이 절의 목표</strong>: 이 챕터의 핵심 개념을 확인하고, Part 2 전체를 마무리합니다.</p>
</blockquote>
<h3 id="10-7-1-셀프-체크">10.7.1 셀프 체크</h3>
<p>다음 질문에 답할 수 있으면 이 챕터의 핵심을 이해한 것입니다:</p>
<p><strong>1. <code>$display</code> 대신 <code>uvm_info</code>를 사용하는 가장 큰 장점은?</strong> (10.2)</p>
<details>
<summary>정답 확인</summary>
verbosity 제어로 코드 수정 없이 메시지를 끄고 켤 수 있습니다. 명령줄 `+UVM_VERBOSITY`나 `set_report_verbosity_level()`로 심각도와 상세도를 런타임에 조절할 수 있어, 디버그 메시지를 삭제하지 않고도 깨끗한 로그를 얻을 수 있습니다.
</details>

<p><strong>2. <code>UVM_ERROR</code>와 <code>UVM_FATAL</code>의 차이는?</strong> (10.2)</p>
<details>
<summary>정답 확인</summary>
`UVM_ERROR`는 에러 카운트만 증가시키고 시뮬레이션은 계속됩니다. 여러 MISMATCH를 한 번에 수집할 수 있습니다. `UVM_FATAL`은 시뮬레이션을 즉시 중단합니다. 복구 불가능한 설정 오류(config_db 실패, 포트 미연결)에 사용합니다.
</details>

<p><strong>3. Verbosity를 전체가 아닌 특정 컴포넌트만 올리는 방법 2가지는?</strong> (10.2)</p>
<details>
<summary>정답 확인</summary>
① 코드에서: `env.scoreboard.set_report_verbosity_level(UVM_DEBUG)` — build_phase나 connect_phase에서 특정 컴포넌트 인스턴스의 메서드를 호출합니다. ② 명령줄에서: `+uvm_set_verbosity=uvm_test_top.env.scoreboard,_ALL_,UVM_DEBUG,run` — 코드 수정 없이 실행 시 설정합니다.
</details>

<p><strong>4. MISMATCH 로그의 타임스탬프를 파형에서 어떻게 활용하나요?</strong> (10.3)</p>
<details>
<summary>정답 확인</summary>
파형 뷰어의 "Jump to Time" 기능으로 해당 시점으로 이동하여 RTL 신호를 확인합니다. 예: 로그에서 `@ 850ns`를 확인하면, GTKWave에서 850ns로 점프하여 clk, rst_n, enable, count 신호의 실제 값을 확인합니다.
</details>

<p><strong>5. Factory Override로 디버그 드라이버를 교체할 때, 기존 코드를 수정해야 하나요?</strong> (10.4)</p>
<details>
<summary>정답 확인</summary>
아닙니다. `set_type_override_by_type(counter_driver::get_type(), counter_debug_driver::get_type())`을 테스트의 `build_phase`에서 `super.build_phase` 호출 전에 설정하면, 기존 env/agent 코드 변경 없이 교체됩니다. Factory가 `type_id::create()` 호출 시 자동으로 override 테이블을 참조합니다.
</details>

<p><strong>6. &quot;config_db::get failed&quot; 에러의 가장 흔한 원인 3가지는?</strong> (10.5)</p>
<details>
<summary>정답 확인</summary>
① 키 이름 오타 — `set`에서 `"vif"`, `get`에서 `"v_if"` 등 ② scope 경로 불일치 — `set`의 `"uvm_test_top.env.*"`와 실제 컴포넌트 계층이 맞지 않음 ③ 타입 불일치 — `set`과 `get`의 파라미터 타입이 다름 (예: `virtual counter_if` vs `virtual other_if`)
</details>

<h3 id="10-7-2-연습문제">10.7.2 연습문제</h3>
<p><strong>연습 10-1 (기본)</strong>: 디버그 모니터 작성</p>
<p><code>counter_monitor</code>를 상속한 <code>counter_debug_monitor</code>를 작성하세요. 매 샘플링마다 타임스탬프와 인터페이스 전체 상태를 <code>UVM_LOW</code>로 출력해야 합니다. Factory Override로 교체하여 테스트하세요.</p>
<details>
<summary>힌트</summary>

<pre><code class="hljs language-systemverilog"><span class="hljs-keyword">class</span> counter_debug_monitor <span class="hljs-keyword">extends</span> counter_monitor;
  `uvm_component_utils(counter_debug_monitor)
  <span class="hljs-comment">// run_phase를 override하여 상세 로깅 추가</span>
  <span class="hljs-comment">// 샘플링 시 $sformatf(&quot;[%0t] ...&quot;, $time, ...) 형식 사용</span>
  <span class="hljs-comment">// Factory Override: set_type_override_by_type(</span>
  <span class="hljs-comment">//   counter_monitor::get_type(),</span>
  <span class="hljs-comment">//   counter_debug_monitor::get_type())</span>
<span class="hljs-keyword">endclass</span>
</code></pre></details>

<p><strong>연습 10-2 (중급)</strong>: 다른 버그 찾기</p>
<p>다음 RTL에 숨겨진 버그를 UVM 디버깅 워크플로우 5단계를 따라 찾으세요:</p>
<pre><code class="hljs language-systemverilog"><span class="hljs-comment">// 버그가 숨겨진 카운터</span>
<span class="hljs-keyword">always_ff</span> @(<span class="hljs-keyword">posedge</span> clk) <span class="hljs-keyword">begin</span>
  <span class="hljs-keyword">if</span> (!rst_n)
    count &lt;= <span class="hljs-number">4&#x27;b0</span>;
  <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (enable)
    count &lt;= count + <span class="hljs-number">2</span>;    <span class="hljs-comment">// ← 이 줄을 주의 깊게 보세요</span>
<span class="hljs-keyword">end</span>
</code></pre><details>
<summary>힌트</summary>
증가값이 `+1`이 아닌 `+2`입니다. 레퍼런스 모델은 `count+1`을 예측하므로 enable=1인 모든 트랜잭션에서 MISMATCH가 발생합니다. 파형에서 count 값이 0, 2, 4, 6... 으로 증가하는 것을 확인할 수 있습니다.
</details>

<p><strong>연습 10-3 (도전)</strong>: Verbosity 전략 설계</p>
<p>다음 상황에서 어떤 verbosity 전략을 사용할지 설계하세요:</p>
<ul>
<li>시뮬레이션에서 100만 트랜잭션 중 3건의 MISMATCH 발생</li>
<li>모든 MISMATCH가 트랜잭션 #500,000 이후에 집중</li>
<li>전체 verbosity를 DEBUG로 올리면 로그가 50GB</li>
</ul>
<details>
<summary>힌트</summary>
① 먼저 기본 verbosity로 실행하여 MISMATCH 시점(타임스탬프)을 확인합니다. ② 해당 시점 전후만 상세 로그가 필요하므로, 컴포넌트별 verbosity를 사용합니다. ③ 또는 코드에서 특정 트랜잭션 번호 이후에만 verbosity를 올리는 조건부 로직을 추가합니다: `if (transaction_count > 499990) set_report_verbosity_level(UVM_DEBUG);`
</details>

<h3 id="10-7-3-part-2-마무리-amp-part-3-미리보기">10.7.3 Part 2 마무리 &amp; Part 3 미리보기</h3>
<p><strong>Part 2 (Chapter 5~10)에서 배운 것:</strong></p>
<p>Chapter 5부터 10까지, 우리는 4비트 카운터 하나로 UVM 검증의 <strong>핵심 사이클</strong>을 완성했습니다:</p>
<table>
<thead>
<tr>
<th>챕터</th>
<th>주제</th>
<th>핵심 성과</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Ch.5</strong></td>
<td>첫 UVM 테스트벤치</td>
<td>하드코딩 시퀀스로 기본 구조 구축</td>
</tr>
<tr>
<td><strong>Ch.6</strong></td>
<td>시퀀스와 트랜잭션</td>
<td>랜덤 시퀀스로 자동화된 테스트 입력</td>
</tr>
<tr>
<td><strong>Ch.7</strong></td>
<td>에이전트 구조</td>
<td>드라이버-모니터-시퀀서 컴포넌트 분리</td>
</tr>
<tr>
<td><strong>Ch.8</strong></td>
<td>스코어보드와 커버리지</td>
<td>자동 비교(87.5%)와 측정 체계</td>
</tr>
<tr>
<td><strong>Ch.9</strong></td>
<td>테스트 시나리오</td>
<td>CDV 워크플로우로 97.2% 달성</td>
</tr>
<tr>
<td><strong>Ch.10</strong></td>
<td>디버깅 기법</td>
<td>MISMATCH → 원인 → 수정 → 검증</td>
</tr>
</tbody></table>
<p>이 6개 챕터가 <strong>검증 엔지니어의 일상 업무</strong>입니다:</p>
<ol>
<li>테스트벤치를 만들고 (Ch.5~7)</li>
<li>자동으로 검증하고 (Ch.8)</li>
<li>커버리지를 채우고 (Ch.9)</li>
<li>버그를 찾아 보고합니다 (Ch.10)</li>
</ol>
<p><strong>Part 3 미리보기 (Chapter 11~15):</strong></p>
<p>Part 3에서는 4비트 카운터를 졸업하고, <strong>실무 수준의 프로토콜</strong>로 넘어갑니다:</p>
<table>
<thead>
<tr>
<th>챕터</th>
<th>주제</th>
<th>예고</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Ch.11</strong></td>
<td>인터페이스와 BFM</td>
<td>실무 프로토콜 인터페이스 설계</td>
</tr>
<tr>
<td><strong>Ch.12</strong></td>
<td>레지스터 모델</td>
<td>UVM RAL로 레지스터 자동 검증</td>
</tr>
<tr>
<td><strong>Ch.13</strong></td>
<td>가상 시퀀스</td>
<td>다중 에이전트 협업 시나리오</td>
</tr>
<tr>
<td><strong>Ch.14</strong></td>
<td>환경 통합</td>
<td>SoC 레벨 검증 환경 구축</td>
</tr>
<tr>
<td><strong>Ch.15</strong></td>
<td>실전 프로젝트</td>
<td>취업 포트폴리오 프로젝트 완성</td>
</tr>
</tbody></table>
<p>Part 2에서 배운 모든 기법 — 시퀀스, 스코어보드, 커버리지, 디버깅 — 이 Part 3에서 더 복잡한 프로토콜에 그대로 적용됩니다. <strong>기초가 탄탄하면 확장은 자연스럽습니다.</strong></p>
<p><strong>Part 2에서 완성한 4비트 카운터 검증 환경:</strong></p>
<p>6개 챕터에 걸쳐 구축한 검증 환경의 최종 모습입니다:</p>
<ul>
<li><strong>DUT</strong>: 4비트 카운터 (<code>counter_4bit</code>) — 3입력(clk, rst_n, enable), 1출력(count)</li>
<li><strong>인터페이스</strong>: <code>counter_if</code> — DUT와 테스트벤치를 연결하는 virtual interface</li>
<li><strong>에이전트</strong>: <code>counter_agent</code> — 드라이버, 모니터, 시퀀서를 하나로 묶은 재사용 단위</li>
<li><strong>시퀀스</strong>: 타겟(rst_with_en, max_hold), 랜덤(random), 에러 주입(rapid_reset, boundary) — 5가지</li>
<li><strong>스코어보드</strong>: <code>counter_scoreboard</code> — Reference Model 기반 자동 비교, MISMATCH 보고</li>
<li><strong>커버리지</strong>: <code>counter_coverage</code> — coverpoint 3개 + cross 2개, 97.2% 달성</li>
<li><strong>테스트</strong>: <code>counter_base_test</code> → reset/random/coverage_closure 3개 파생 테스트</li>
<li><strong>디버깅</strong>: verbosity 제어, Factory Override, 파형 분석, 버그 리포트 작성</li>
</ul>
<p>이 환경은 규모만 다를 뿐, 실무의 SoC 검증 환경과 <strong>동일한 구조</strong>입니다. Part 3에서는 이 구조를 더 복잡한 프로토콜에 확장합니다.</p>
<h3 id="다음-장-미리보기">다음 장 미리보기</h3>
<p>Chapter 11에서는 4비트 카운터를 졸업하고, <strong>실제 프로토콜 인터페이스</strong>를 다룹니다. Virtual Interface의 실무 활용법과 Bus Functional Model(BFM) 패턴을 배웁니다. Part 2에서 다진 기초 위에 실무 역량을 쌓아가겠습니다.</p>

    <nav class="chapter-nav"><a href="chapter-09-final.html" class="nav-prev">
      <span class="nav-label">이전 챕터</span>
      <span class="nav-title">Ch.9 테스트 시나리오</span>
    </a><a href="chapter-11-final.html" class="nav-next">
      <span class="nav-label">다음 챕터</span>
      <span class="nav-title">Ch.11 레지스터 모델 (RAL)</span>
    </a></nav>
  </div>

  <footer class="book-footer">
    <p>팹리스 검증 엔지니어가 되기 위한 UVM 완전정복</p>
    <p>Published by UVM Book Publisher Agent</p>
  </footer>

  <!-- Back to Top Button -->
  <button class="back-to-top" id="backToTop" onclick="window.scrollTo({top:0,behavior:'smooth'})">↑</button>

  <script>
    // Reading progress bar
    window.addEventListener('scroll', () => {
      const h = document.documentElement;
      const pct = (h.scrollTop / (h.scrollHeight - h.clientHeight)) * 100;
      document.getElementById('progressBar').style.width = pct + '%';
      document.getElementById('backToTop').classList.toggle('visible', h.scrollTop > 400);
    });

    // Language labels for code blocks
    document.querySelectorAll('pre').forEach(pre => {
      const code = pre.querySelector('code');
      if (code) {
        const cls = code.className || '';
        const m = cls.match(/language-(\w+)/);
        if (m) {
          const map = {
            systemverilog:'SystemVerilog', sv:'SystemVerilog', verilog:'Verilog',
            bash:'Bash', shell:'Shell', tcl:'TCL', makefile:'Makefile',
            python:'Python', javascript:'JavaScript', text:'Output'
          };
          pre.setAttribute('data-lang', map[m[1]] || m[1]);
        }
      }
    });

    // Smart labels for plain code blocks
    document.querySelectorAll('pre code:not([class*="language-"])').forEach(code => {
      const pre = code.parentElement;
      if (!pre.getAttribute('data-lang')) {
        const t = code.textContent || '';
        if (t.includes('UVM_INFO') || t.includes('UVM_WARNING')) {
          pre.setAttribute('data-lang', 'Simulation Output');
        } else if (t.includes('[채용') || t.includes('필수 자격')) {
          pre.setAttribute('data-lang', '');
        } else if (t.includes('Step') || t.includes('패널') || t.includes('편집기')) {
          pre.setAttribute('data-lang', 'Setup Guide');
        } else {
          pre.setAttribute('data-lang', 'Info');
        }
      }
    });

    // Smooth scroll for TOC links
    document.querySelectorAll('.toc a').forEach(a => {
      a.addEventListener('click', e => {
        e.preventDefault();
        const id = a.getAttribute('href').slice(1);
        const target = document.getElementById(id);
        if (target) target.scrollIntoView({ behavior: 'smooth', block: 'start' });
      });
    });
  </script>
</body>
</html>
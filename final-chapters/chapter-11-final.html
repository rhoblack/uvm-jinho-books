<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chapter 11: ì¸í„°í˜ì´ìŠ¤ì™€ BFM | íŒ¹ë¦¬ìŠ¤ ê²€ì¦ ì—”ì§€ë‹ˆì–´ê°€ ë˜ê¸° ìœ„í•œ UVM ì™„ì „ì •ë³µ</title>
  <style>
    /* =============================================
       UVM Book Publisher - Stylesheet
       Generated by Publisher Agent
       ============================================= */

    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&display=swap');

    :root {
      --bg: #ffffff;
      --text: #1a1a2e;
      --accent: #7c3aed;
      --accent-light: #7c3aed18;
      --code-bg: #1e1e2e;
      --code-text: #cdd6f4;
      --border: #e2e8f0;
      --blockquote-bg: #f0f9ff;
      --blockquote-border: #3b82f6;
      --table-header: #1e293b;
      --table-stripe: #f8fafc;
      --warning-bg: #fef3c7;
      --warning-border: #f59e0b;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      line-height: 1.85;
      color: var(--text);
      background: var(--bg);
      font-size: 16px;
    }

    /* === Reading Progress Bar === */
    .progress-bar {
      position: fixed;
      top: 0;
      left: 0;
      width: 0%;
      height: 3px;
      background: linear-gradient(90deg, var(--accent), #7c3aedcc);
      z-index: 9999;
      transition: width 0.1s;
    }

    /* === Cover Header === */
    .cover-header {
      background: linear-gradient(135deg, #7c3aed08, #7c3aed15);
      border-bottom: 3px solid var(--accent);
      padding: 32px 24px 24px;
      text-align: center;
      margin-bottom: 0;
    }
    .cover-part {
      display: inline-block;
      background: var(--accent);
      color: white;
      padding: 4px 16px;
      border-radius: 20px;
      font-size: 0.85em;
      font-weight: 600;
      letter-spacing: 0.5px;
      margin-bottom: 12px;
    }
    .cover-chapter-num {
      font-size: 2em;
      font-weight: 300;
      color: var(--accent);
      letter-spacing: 2px;
      opacity: 0.6;
    }

    /* === Main Content === */
    .content {
      max-width: 860px;
      margin: 0 auto;
      padding: 32px 24px 60px;
    }

    /* === TOC === */
    .toc {
      background: #f8fafc;
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 20px 28px;
      margin: 24px 0 32px;
    }
    .toc-title {
      font-size: 1.1em;
      color: var(--accent);
      margin-bottom: 12px;
      padding-bottom: 8px;
      border-bottom: 2px solid var(--border);
    }
    .toc ul { list-style: none; padding: 0; }
    .toc li { margin: 6px 0; }
    .toc li a {
      color: var(--text);
      text-decoration: none;
      font-weight: 500;
      font-size: 0.95em;
      padding: 4px 8px;
      border-radius: 4px;
      display: inline-block;
      transition: background 0.15s;
    }
    .toc li a:hover {
      background: var(--accent-light);
      color: var(--accent);
    }
    .toc li.toc-sub { padding-left: 24px; }
    .toc li.toc-sub a {
      font-weight: 400;
      font-size: 0.9em;
      color: #475569;
    }

    /* === Headings === */
    h1 {
      font-size: 2em;
      border-bottom: 3px solid var(--accent);
      padding-bottom: 12px;
      margin: 40px 0 20px;
      color: var(--text);
    }
    h1:first-child { margin-top: 0; }
    h2 {
      font-size: 1.5em;
      color: var(--accent);
      margin: 40px 0 16px;
      padding-bottom: 8px;
      border-bottom: 2px solid var(--border);
      scroll-margin-top: 16px;
    }
    h3 {
      font-size: 1.25em;
      margin: 28px 0 12px;
      color: #334155;
      scroll-margin-top: 16px;
    }
    h4 { font-size: 1.05em; margin: 20px 0 8px; color: #475569; }
    p { margin: 12px 0; }
    a { color: var(--accent); text-decoration: none; }
    a:hover { text-decoration: underline; }
    hr { border: none; border-top: 2px solid var(--border); margin: 32px 0; }
    strong { color: #1e293b; }
    img { max-width: 100%; border-radius: 8px; margin: 16px 0; }

    /* === Code Blocks === */
    pre {
      position: relative;
      background: var(--code-bg);
      border-radius: 12px;
      padding: 0;
      margin: 20px 0;
      overflow: hidden;
      box-shadow: 0 4px 16px rgba(0,0,0,0.12), 0 1px 4px rgba(0,0,0,0.08);
      border: 1px solid #313244;
    }
    pre::before {
      content: attr(data-lang);
      display: block;
      background: #313244;
      color: #a6adc8;
      padding: 8px 16px;
      font-size: 0.8em;
      font-family: 'Fira Code','JetBrains Mono',monospace;
      letter-spacing: 0.5px;
      border-bottom: 1px solid #45475a;
    }
    pre code {
      display: block;
      padding: 16px 20px;
      overflow-x: auto;
      font-family: 'Fira Code','JetBrains Mono','Cascadia Code','D2Coding',monospace;
      font-size: 0.88em;
      line-height: 1.75;
      tab-size: 4;
      color: var(--code-text);
    }
    pre code::-webkit-scrollbar { height: 6px; }
    pre code::-webkit-scrollbar-track { background: #1e1e2e; }
    pre code::-webkit-scrollbar-thumb { background: #45475a; border-radius: 3px; }

    code:not(pre code) {
      background: #f1f5f9;
      color: #be185d;
      padding: 2px 7px;
      border-radius: 5px;
      font-family: 'Fira Code','JetBrains Mono','D2Coding',monospace;
      font-size: 0.86em;
      border: 1px solid #e2e8f0;
    }

    /* Highlight.js Catppuccin */
    .hljs { background: transparent; color: #cdd6f4; }
    .hljs-keyword { color: #cba6f7; font-weight: bold; }
    .hljs-type { color: #f9e2af; }
    .hljs-string { color: #a6e3a1; }
    .hljs-number { color: #fab387; }
    .hljs-comment { color: #6c7086; font-style: italic; }
    .hljs-function, .hljs-title { color: #89b4fa; }
    .hljs-built_in { color: #f38ba8; }
    .hljs-variable { color: #cdd6f4; }
    .hljs-attr { color: #89dceb; }
    .hljs-meta { color: #f5c2e7; }
    .hljs-literal { color: #fab387; }

    /* === SVG Diagrams === */
    .svg-diagram {
      margin: 24px 0;
      padding: 20px;
      background: #fafbfc;
      border: 1px solid var(--border);
      border-radius: 12px;
      text-align: center;
      overflow-x: auto;
    }
    .svg-diagram svg { display: inline-block; }

    /* === Blockquotes === */
    blockquote {
      background: var(--blockquote-bg);
      border-left: 4px solid var(--blockquote-border);
      padding: 16px 20px;
      margin: 16px 0;
      border-radius: 0 8px 8px 0;
    }
    blockquote p:first-child { margin-top: 0; }
    blockquote p:last-child { margin-bottom: 0; }
    blockquote:has(strong:first-child) {
      background: var(--warning-bg);
      border-left-color: var(--warning-border);
    }

    /* === Tables === */
    table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 1px 4px rgba(0,0,0,0.06);
      border: 1px solid var(--border);
      font-size: 0.95em;
    }
    thead th {
      background: var(--table-header);
      color: white;
      padding: 12px 16px;
      text-align: left;
      font-weight: 600;
      font-size: 0.9em;
    }
    tbody td {
      padding: 10px 16px;
      border-bottom: 1px solid var(--border);
    }
    tbody tr:nth-child(even) { background: var(--table-stripe); }
    tbody tr:hover { background: var(--accent-light); }

    /* === Lists === */
    ul, ol { padding-left: 28px; margin: 12px 0; }
    li { margin: 6px 0; }
    li > ul, li > ol { margin: 4px 0; }

    /* === Details/Summary === */
    details {
      background: #f8fafc;
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 12px 16px;
      margin: 12px 0;
    }
    details summary {
      cursor: pointer;
      font-weight: 600;
      color: var(--accent);
    }
    details[open] summary { margin-bottom: 8px; }

    /* === Plain code blocks === */
    pre:has(code:not(.hljs)) {
      background: #fafbfc;
      border: 2px solid var(--border);
      box-shadow: none;
    }
    pre:has(code:not(.hljs))::before {
      background: #f1f5f9;
      color: #64748b;
      border-bottom-color: var(--border);
    }
    pre:has(code:not(.hljs)) code { color: #334155; }

    /* === Chapter Navigation === */
    .chapter-nav {
      display: flex;
      justify-content: space-between;
      gap: 16px;
      margin: 40px 0 20px;
      padding-top: 24px;
      border-top: 2px solid var(--border);
    }
    .chapter-nav a {
      display: flex;
      flex-direction: column;
      padding: 14px 20px;
      border: 1px solid var(--border);
      border-radius: 10px;
      text-decoration: none;
      transition: all 0.2s;
      min-width: 200px;
    }
    .chapter-nav a:hover {
      border-color: var(--accent);
      background: var(--accent-light);
      text-decoration: none;
    }
    .nav-prev { align-items: flex-start; }
    .nav-next { align-items: flex-end; }
    .nav-label {
      font-size: 0.8em;
      color: #94a3b8;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .nav-title { font-weight: 600; color: var(--accent); margin-top: 2px; }

    /* === Footer === */
    .book-footer {
      text-align: center;
      padding: 20px;
      margin-top: 40px;
      border-top: 1px solid var(--border);
      color: #94a3b8;
      font-size: 0.85em;
    }

    /* === Back to Top === */
    .back-to-top {
      position: fixed;
      bottom: 24px;
      right: 24px;
      width: 44px;
      height: 44px;
      background: var(--accent);
      color: white;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      font-size: 20px;
      display: none;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
      transition: opacity 0.3s;
      z-index: 100;
    }
    .back-to-top.visible { display: flex; }

    /* === Print === */
    @media print {
      .progress-bar, .back-to-top, .chapter-nav, .toc { display: none !important; }
      body { font-size: 11pt; }
      .content { max-width: 100%; padding: 0; }
      .cover-header { break-after: page; }
      pre { box-shadow: none; border: 2px solid #ccc; break-inside: avoid; }
      .svg-diagram { break-inside: avoid; border: 1px solid #ccc; }
      table { break-inside: avoid; }
      h2, h3 { break-after: avoid; }
    }

    /* === Responsive === */
    @media (max-width: 640px) {
      .content { padding: 16px 12px 40px; font-size: 15px; }
      h1 { font-size: 1.5em; }
      h2 { font-size: 1.25em; }
      pre code { font-size: 0.8em; padding: 12px; }
      thead th, tbody td { padding: 8px 10px; font-size: 0.88em; }
      .svg-diagram { padding: 10px; }
      .toc { padding: 14px 18px; }
      .chapter-nav { flex-direction: column; }
      .chapter-nav a { min-width: unset; }
      .nav-next { align-items: flex-start; }
      .cover-chapter-num { font-size: 1.5em; }
    }
  </style>
</head>
<body>
  <!-- Reading Progress Bar -->
  <div class="progress-bar" id="progressBar"></div>

  
<header class="cover-header">
  <div class="cover-part" style="--part-color: #7c3aed">
    <span class="cover-part-label">Part 3: ì™„ì„±í•˜ê¸°</span>
  </div>
  <div class="cover-chapter-num">Chapter 11</div>
</header>

  <div class="content">
    <nav class="toc">
<h2 class="toc-title">ëª©ì°¨</h2>
<ul>
<li><a href="#11-1-4ë¹„íŠ¸-ì¹´ìš´í„°ë¥¼-ì¡¸ì—…í•˜ë©°">11.1 4ë¹„íŠ¸ ì¹´ìš´í„°ë¥¼ ì¡¸ì—…í•˜ë©°</a></li>
  <li class="toc-sub"><a href="#11-1-1-part-2ì—ì„œ-ë°°ìš´-ê²ƒ-êµ¬ì¡°ëŠ”-ê°™ë‹¤">11.1.1 Part 2ì—ì„œ ë°°ìš´ ê²ƒ â€” êµ¬ì¡°ëŠ” ê°™ë‹¤</a></li>
  <li class="toc-sub"><a href="#11-1-2-ì‹¤ë¬´-í”„ë¡œí† ì½œì´ë€-apb-ì†Œê°œ">11.1.2 ì‹¤ë¬´ í”„ë¡œí† ì½œì´ë€? â€” APB ì†Œê°œ</a></li>
  <li class="toc-sub"><a href="#11-1-3-apb-í”„ë¡œí† ì½œ-ê¸°ë³¸-ë™ì‘">11.1.3 APB í”„ë¡œí† ì½œ ê¸°ë³¸ ë™ì‘</a></li>
<li><a href="#11-2-systemverilog-ì¸í„°í˜ì´ìŠ¤-ì‹¬í™”">11.2 SystemVerilog ì¸í„°í˜ì´ìŠ¤ ì‹¬í™”</a></li>
  <li class="toc-sub"><a href="#11-2-1-clocking-block-íƒ€ì´ë°-ì•ˆì „í•œ-ì‹ í˜¸-ì ‘ê·¼">11.2.1 Clocking Block â€” íƒ€ì´ë° ì•ˆì „í•œ ì‹ í˜¸ ì ‘ê·¼</a></li>
  <li class="toc-sub"><a href="#11-2-2-modport-ë“œë¼ì´ë²„-ëª¨ë‹ˆí„°-ì ‘ê·¼-ì œì–´">11.2.2 Modport â€” ë“œë¼ì´ë²„/ëª¨ë‹ˆí„° ì ‘ê·¼ ì œì–´</a></li>
  <li class="toc-sub"><a href="#11-2-3-apb-ì¸í„°í˜ì´ìŠ¤-ì„¤ê³„-apb-if">11.2.3 APB ì¸í„°í˜ì´ìŠ¤ ì„¤ê³„ (apb_if)</a></li>
  <li class="toc-sub"><a href="#11-2-4-counter-if-vs-apb-if-ë¹„êµ">11.2.4 counter_if vs apb_if ë¹„êµ</a></li>
<li><a href="#11-3-apb-slave-dut">11.3 APB Slave DUT</a></li>
  <li class="toc-sub"><a href="#11-3-1-apb-slave-memory-rtl">11.3.1 APB Slave Memory RTL</a></li>
  <li class="toc-sub"><a href="#11-3-2-apb-íŠ¸ëœì­ì…˜-ì •ì˜-apb-seq-item">11.3.2 APB íŠ¸ëœì­ì…˜ ì •ì˜ (apb_seq_item)</a></li>
  <li class="toc-sub"><a href="#11-3-3-tb-top-dutì™€-ì¸í„°í˜ì´ìŠ¤-ì—°ê²°">11.3.3 tb_top â€” DUTì™€ ì¸í„°í˜ì´ìŠ¤ ì—°ê²°</a></li>
<li><a href="#11-4-bus-functional-model-bfm-íŒ¨í„´">11.4 Bus Functional Model (BFM) íŒ¨í„´</a></li>
  <li class="toc-sub"><a href="#11-4-1-bfmì´ë€-í”„ë¡œí† ì½œ-í–‰ìœ„ë¥¼-ìº¡ìŠí™”">11.4.1 BFMì´ë€? â€” í”„ë¡œí† ì½œ í–‰ìœ„ë¥¼ ìº¡ìŠí™”</a></li>
  <li class="toc-sub"><a href="#11-4-2-apb-master-driver-write-read-í”„ë¡œí† ì½œ-êµ¬í˜„">11.4.2 APB Master Driver â€” Write/Read í”„ë¡œí† ì½œ êµ¬í˜„</a></li>
  <li class="toc-sub"><a href="#11-4-3-apb-monitor-í”„ë¡œí† ì½œ-ê´€ì°°ê³¼-íŠ¸ëœì­ì…˜-ì¶”ì¶œ">11.4.3 APB Monitor â€” í”„ë¡œí† ì½œ ê´€ì°°ê³¼ íŠ¸ëœì­ì…˜ ì¶”ì¶œ</a></li>
  <li class="toc-sub"><a href="#11-4-4-counter-driver-vs-apb-driver-ë¹„êµ">11.4.4 counter_driver vs apb_driver ë¹„êµ</a></li>
<li><a href="#11-5-apb-ì—ì´ì „íŠ¸-ì¡°ë¦½">11.5 APB ì—ì´ì „íŠ¸ ì¡°ë¦½</a></li>
  <li class="toc-sub"><a href="#11-5-1-apb-agent-ë“œë¼ì´ë²„-ëª¨ë‹ˆí„°-ì‹œí€€ì„œ-í†µí•©">11.5.1 apb_agent â€” ë“œë¼ì´ë²„, ëª¨ë‹ˆí„°, ì‹œí€€ì„œ í†µí•©</a></li>
  <li class="toc-sub"><a href="#11-5-2-apb-envì™€-apb-base-test">11.5.2 apb_envì™€ apb_base_test</a></li>
  <li class="toc-sub"><a href="#11-5-3-ì²«-apb-ì‹œë®¬ë ˆì´ì…˜-write-amp-read-í…ŒìŠ¤íŠ¸">11.5.3 ì²« APB ì‹œë®¬ë ˆì´ì…˜ â€” Write &amp; Read í…ŒìŠ¤íŠ¸</a></li>
<li><a href="#11-6-ì‹¤ì „-apb-write-read-ê²€ì¦">11.6 ì‹¤ì „: APB Write/Read ê²€ì¦</a></li>
  <li class="toc-sub"><a href="#11-6-1-apb-ì‹œí€€ìŠ¤-ë‹¤ì–‘í•œ-ì‹œë‚˜ë¦¬ì˜¤">11.6.1 APB ì‹œí€€ìŠ¤ â€” ë‹¤ì–‘í•œ ì‹œë‚˜ë¦¬ì˜¤</a></li>
  <li class="toc-sub"><a href="#11-6-2-apb-ìŠ¤ì½”ì–´ë³´ë“œ-ë©”ëª¨ë¦¬-ëª¨ë¸-ê¸°ë°˜-ë¹„êµ">11.6.2 APB ìŠ¤ì½”ì–´ë³´ë“œ â€” ë©”ëª¨ë¦¬ ëª¨ë¸ ê¸°ë°˜ ë¹„êµ</a></li>
  <li class="toc-sub"><a href="#11-6-3-ì‹¤í–‰-ê²°ê³¼ì™€-ì»¤ë²„ë¦¬ì§€-í™•ì¸">11.6.3 ì‹¤í–‰ ê²°ê³¼ì™€ ì»¤ë²„ë¦¬ì§€ í™•ì¸</a></li>
  <li class="toc-sub"><a href="#11-6-4-part-2-part-3-êµ¬ì¡°-ë¹„êµí‘œ">11.6.4 Part 2 â†’ Part 3 êµ¬ì¡° ë¹„êµí‘œ</a></li>
<li><a href="#11-7-ì²´í¬í¬ì¸íŠ¸">11.7 ì²´í¬í¬ì¸íŠ¸</a></li>
  <li class="toc-sub"><a href="#11-7-1-ì…€í”„-ì²´í¬">11.7.1 ì…€í”„ ì²´í¬</a></li>
  <li class="toc-sub"><a href="#11-7-2-ì—°ìŠµë¬¸ì œ">11.7.2 ì—°ìŠµë¬¸ì œ</a></li>
  <li class="toc-sub"><a href="#11-7-3-ì´-ì±•í„°ì—ì„œ-ë°°ìš´-ê²ƒ">11.7.3 ì´ ì±•í„°ì—ì„œ ë°°ìš´ ê²ƒ</a></li>
  <li class="toc-sub"><a href="#11-7-4-ë‹¤ìŒ-ì¥-ë¯¸ë¦¬ë³´ê¸°">11.7.4 ë‹¤ìŒ ì¥ ë¯¸ë¦¬ë³´ê¸°</a></li>
</ul>
</nav>
    <h1>Chapter 11: ì¸í„°í˜ì´ìŠ¤ì™€ BFM</h1>
<blockquote>
<p><strong>ì´ ì±•í„°ì˜ ëª©í‘œ</strong>: 4ë¹„íŠ¸ ì¹´ìš´í„°ë¥¼ ì¡¸ì—…í•˜ê³  <strong>APB í”„ë¡œí† ì½œ</strong>ë¡œ ì „í™˜í•©ë‹ˆë‹¤. SystemVerilog ì¸í„°í˜ì´ìŠ¤ì˜ clocking blockê³¼ modportë¥¼ ì‹¤ë¬´ ìˆ˜ì¤€ìœ¼ë¡œ í™œìš©í•˜ê³ , Bus Functional Model(BFM) íŒ¨í„´ìœ¼ë¡œ í”„ë¡œí† ì½œ ë ˆë²¨ ë“œë¼ì´ë²„/ëª¨ë‹ˆí„°ë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.</p>
</blockquote>
<blockquote>
<p><strong>ì„ ìˆ˜ ì§€ì‹</strong>: Chapter 3 (SystemVerilog ì¸í„°í˜ì´ìŠ¤), Chapter 5 (Virtual Interface), Chapter 7 (ì—ì´ì „íŠ¸ êµ¬ì¡°), Chapter 10 (Part 2 ì™„ì„±)</p>
</blockquote>
<hr>
<h2 id="11-1-4ë¹„íŠ¸-ì¹´ìš´í„°ë¥¼-ì¡¸ì—…í•˜ë©°">11.1 4ë¹„íŠ¸ ì¹´ìš´í„°ë¥¼ ì¡¸ì—…í•˜ë©°</h2>
<blockquote>
<p><strong>ì´ ì ˆì˜ ëª©í‘œ</strong>: Part 2ì—ì„œ ì™„ì„±í•œ ê²€ì¦ í™˜ê²½ì˜ êµ¬ì¡°ê°€ ìƒˆë¡œìš´ í”„ë¡œí† ì½œì— ê·¸ëŒ€ë¡œ ì ìš©ë¨ì„ ì´í•´í•˜ê³ , APB í”„ë¡œí† ì½œì„ ì†Œê°œí•©ë‹ˆë‹¤.</p>
</blockquote>
<h3 id="11-1-1-part-2ì—ì„œ-ë°°ìš´-ê²ƒ-êµ¬ì¡°ëŠ”-ê°™ë‹¤">11.1.1 Part 2ì—ì„œ ë°°ìš´ ê²ƒ â€” êµ¬ì¡°ëŠ” ê°™ë‹¤</h3>
<p>Ch.5~Ch.10ì—ì„œ 4ë¹„íŠ¸ ì¹´ìš´í„° í•˜ë‚˜ë¡œ UVM ê²€ì¦ì˜ í•µì‹¬ ì‚¬ì´í´ì„ ì™„ì„±í–ˆìŠµë‹ˆë‹¤:</p>
<pre><code>í…ŒìŠ¤íŠ¸ â†’ í™˜ê²½ â†’ ì—ì´ì „íŠ¸ â†’ {ë“œë¼ì´ë²„, ëª¨ë‹ˆí„°, ì‹œí€€ì„œ}
                    â†’ ìŠ¤ì½”ì–´ë³´ë“œ â†’ ì»¤ë²„ë¦¬ì§€
</code></pre><p>ì´ êµ¬ì¡°ëŠ” DUTê°€ 4ë¹„íŠ¸ ì¹´ìš´í„°ë“  SoCì˜ ë³µì¡í•œ IPë“  <strong>ë™ì¼í•©ë‹ˆë‹¤</strong>. Part 3ì—ì„œ ë°”ë€ŒëŠ” ê²ƒì€:</p>
<table>
<thead>
<tr>
<th>ìš”ì†Œ</th>
<th>Part 2 (4ë¹„íŠ¸ ì¹´ìš´í„°)</th>
<th>Part 3 (APB í”„ë¡œí† ì½œ)</th>
</tr>
</thead>
<tbody><tr>
<td><strong>DUT</strong></td>
<td><code>counter_4bit</code></td>
<td><code>apb_slave_memory</code></td>
</tr>
<tr>
<td><strong>ì¸í„°í˜ì´ìŠ¤</strong></td>
<td><code>counter_if</code> (3ì‹ í˜¸)</td>
<td><code>apb_if</code> (9+ì‹ í˜¸)</td>
</tr>
<tr>
<td><strong>íŠ¸ëœì­ì…˜</strong></td>
<td><code>counter_seq_item</code> (rst_n, enable)</td>
<td><code>apb_seq_item</code> (addr, data, write)</td>
</tr>
<tr>
<td><strong>ë“œë¼ì´ë²„</strong></td>
<td>ì§ì ‘ ì‹ í˜¸ ëŒ€ì…</td>
<td><strong>í”„ë¡œí† ì½œ í•¸ë“œì…°ì´í¬</strong></td>
</tr>
<tr>
<td><strong>ëª¨ë‹ˆí„°</strong></td>
<td>ë‹¨ìˆœ ìƒ˜í”Œë§</td>
<td><strong>í”„ë¡œí† ì½œ phase ì¶”ì </strong></td>
</tr>
<tr>
<td><strong>ìŠ¤ì½”ì–´ë³´ë“œ</strong></td>
<td>ì¹´ìš´í„° ì˜ˆì¸¡ ëª¨ë¸</td>
<td><strong>ë©”ëª¨ë¦¬ ëª¨ë¸</strong></td>
</tr>
<tr>
<td><strong>UVM êµ¬ì¡°</strong></td>
<td>ë™ì¼</td>
<td><strong>ë™ì¼</strong></td>
</tr>
</tbody></table>
<p>í•µì‹¬ ë©”ì‹œì§€: <strong>UVM êµ¬ì¡°ëŠ” ë°”ë€Œì§€ ì•ŠìŠµë‹ˆë‹¤.</strong> ë°”ë€ŒëŠ” ê²ƒì€ ì¸í„°í˜ì´ìŠ¤ì™€ í”„ë¡œí† ì½œ ë¡œì§ë¿ì…ë‹ˆë‹¤.</p>
<h3 id="11-1-2-ì‹¤ë¬´-í”„ë¡œí† ì½œì´ë€-apb-ì†Œê°œ">11.1.2 ì‹¤ë¬´ í”„ë¡œí† ì½œì´ë€? â€” APB ì†Œê°œ</h3>
<p>**APB (Advanced Peripheral Bus)**ëŠ” ARM AMBA(Advanced Microcontroller Bus Architecture) í‘œì¤€ì˜ ì¼ë¶€ì…ë‹ˆë‹¤. SoCì—ì„œ ê°€ì¥ ë‹¨ìˆœí•œ ë²„ìŠ¤ í”„ë¡œí† ì½œë¡œ, ê±°ì˜ ëª¨ë“  IP ë¸”ë¡ì˜ ë ˆì§€ìŠ¤í„° ì ‘ê·¼ì— ì‚¬ìš©ë©ë‹ˆë‹¤.</p>
<p><strong>ì™œ APBì¸ê°€?</strong></p>
<ol>
<li><strong>ë‹¨ìˆœí•¨</strong>: 2 phase (Setup â†’ Access)ë¡œ ë™ì‘í•˜ë©°, íŒŒì´í”„ë¼ì¸ ì—†ìŒ</li>
<li><strong>ì‹¤ë¬´ í•„ìˆ˜</strong>: íŒ¹ë¦¬ìŠ¤ íšŒì‚¬ì˜ ëª¨ë“  SoCì— APB ì¸í„°í˜ì´ìŠ¤ ì¡´ì¬</li>
<li><strong>RAL ê¸°ë°˜</strong>: Ch.12ì˜ ë ˆì§€ìŠ¤í„° ëª¨ë¸(RAL)ì´ APB ìœ„ì—ì„œ ë™ì‘</li>
<li><strong>ë©´ì ‘ ë¹ˆì¶œ</strong>: &quot;APB í”„ë¡œí† ì½œì„ ì„¤ëª…í•˜ì„¸ìš”&quot;ëŠ” ê²€ì¦ ì—”ì§€ë‹ˆì–´ ë©´ì ‘ì˜ ê¸°ë³¸ ì§ˆë¬¸</li>
</ol>
<p><strong>APB ì‹ í˜¸:</strong></p>
<table>
<thead>
<tr>
<th>ì‹ í˜¸</th>
<th>ë°©í–¥</th>
<th>í­</th>
<th>ì„¤ëª…</th>
</tr>
</thead>
<tbody><tr>
<td><code>pclk</code></td>
<td>â€”</td>
<td>1</td>
<td>í´ë¡</td>
</tr>
<tr>
<td><code>presetn</code></td>
<td>â€”</td>
<td>1</td>
<td>ë¦¬ì…‹ (ì•¡í‹°ë¸Œ ë¡œìš°)</td>
</tr>
<tr>
<td><code>psel</code></td>
<td>Masterâ†’Slave</td>
<td>1</td>
<td>ìŠ¬ë ˆì´ë¸Œ ì„ íƒ</td>
</tr>
<tr>
<td><code>penable</code></td>
<td>Masterâ†’Slave</td>
<td>1</td>
<td>ì „ì†¡ í™œì„±í™” (Access phase)</td>
</tr>
<tr>
<td><code>pwrite</code></td>
<td>Masterâ†’Slave</td>
<td>1</td>
<td>1=ì“°ê¸°, 0=ì½ê¸°</td>
</tr>
<tr>
<td><code>paddr</code></td>
<td>Masterâ†’Slave</td>
<td>4</td>
<td>ì£¼ì†Œ (4ë¹„íŠ¸ = 16ê°œ ë ˆì§€ìŠ¤í„°)</td>
</tr>
<tr>
<td><code>pwdata</code></td>
<td>Masterâ†’Slave</td>
<td>8</td>
<td>ì“°ê¸° ë°ì´í„° (8ë¹„íŠ¸)</td>
</tr>
<tr>
<td><code>prdata</code></td>
<td>Slaveâ†’Master</td>
<td>8</td>
<td>ì½ê¸° ë°ì´í„° (8ë¹„íŠ¸)</td>
</tr>
<tr>
<td><code>pready</code></td>
<td>Slaveâ†’Master</td>
<td>1</td>
<td>ìŠ¬ë ˆì´ë¸Œ ì¤€ë¹„ ì™„ë£Œ</td>
</tr>
</tbody></table>
<blockquote>
<p>ğŸ’¡ <strong>ë©´ì ‘ íŒ</strong>: APB ì‹ í˜¸ ì´ë¦„ì€ ëª¨ë‘ <code>p</code>ë¡œ ì‹œì‘í•©ë‹ˆë‹¤. ì´ê²ƒì€ AMBA í‘œì¤€ì˜ ë„¤ì´ë° ê·œì¹™ì´ë©°, AXIëŠ” <code>a</code>ë¡œ ì‹œì‘í•©ë‹ˆë‹¤ (ì˜ˆ: <code>arvalid</code>, <code>awready</code>).</p>
</blockquote>
<h3 id="11-1-3-apb-í”„ë¡œí† ì½œ-ê¸°ë³¸-ë™ì‘">11.1.3 APB í”„ë¡œí† ì½œ ê¸°ë³¸ ë™ì‘</h3>
<p>APB ì „ì†¡ì€ í•­ìƒ 2 phaseë¡œ ë™ì‘í•©ë‹ˆë‹¤:</p>

<div style="text-align:center;margin:2rem 0">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 720 480" style="max-width:720px;width:100%;height:auto">
  <defs>
    <filter id="sh11t" x="-2%" y="-4%" width="104%" height="112%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-opacity="0.08"/>
    </filter>
  </defs>

  <!-- Title -->
  <rect x="160" y="6" width="400" height="34" rx="17" fill="#1e293b"/>
  <text x="360" y="29" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="15" font-weight="bold" fill="#fff">APB Write / Read í”„ë¡œí† ì½œ íƒ€ì´ë°</text>

  <!-- === Write Transfer (Left Side) === -->
  <rect x="20" y="50" width="330" height="380" rx="10" fill="#f8fafc" stroke="#cbd5e1" stroke-width="1.5" filter="url(#sh11t)"/>
  <rect x="20" y="50" width="330" height="30" rx="10" fill="#eff6ff"/>
  <rect x="20" y="70" width="330" height="10" fill="#eff6ff"/>
  <text x="185" y="70" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="13" font-weight="bold" fill="#1e40af">â”€â”€ Write ì „ì†¡ â”€â”€</text>

  <!-- Write: CLK -->
  <text x="40" y="110" font-family="'Fira Code',monospace" font-size="11" fill="#475569">clk</text>
  <polyline points="85,115 85,100 105,100 105,115 125,115 125,100 145,100 145,115 165,115 165,100 185,100 185,115 205,115" fill="none" stroke="#334155" stroke-width="2"/>

  <!-- Write: psel -->
  <text x="40" y="145" font-family="'Fira Code',monospace" font-size="11" fill="#475569">psel</text>
  <polyline points="85,150 85,135 185,135 185,150 205,150" fill="none" stroke="#2563eb" stroke-width="2"/>
  <rect x="90" y="127" width="90" height="14" rx="3" fill="#dbeafe" opacity="0.6"/>

  <!-- Write: penable -->
  <text x="40" y="180" font-family="'Fira Code',monospace" font-size="11" fill="#475569">penable</text>
  <polyline points="85,185 135,185 135,170 185,170 185,185 205,185" fill="none" stroke="#7c3aed" stroke-width="2"/>
  <rect x="138" y="162" width="44" height="14" rx="3" fill="#ede9fe" opacity="0.6"/>

  <!-- Write: pwrite -->
  <text x="40" y="215" font-family="'Fira Code',monospace" font-size="11" fill="#475569">pwrite</text>
  <polyline points="85,220 85,205 185,205 185,220 205,220" fill="none" stroke="#dc2626" stroke-width="2"/>
  <text x="135" y="202" text-anchor="middle" font-family="'Fira Code',monospace" font-size="9" fill="#dc2626">=1</text>

  <!-- Write: paddr -->
  <text x="40" y="250" font-family="'Fira Code',monospace" font-size="11" fill="#475569">paddr</text>
  <rect x="88" y="238" width="94" height="20" rx="4" fill="#fef3c7" stroke="#f59e0b" stroke-width="1.5"/>
  <text x="135" y="253" text-anchor="middle" font-family="'Fira Code',monospace" font-size="10" font-weight="bold" fill="#92400e">ADDR</text>

  <!-- Write: pwdata -->
  <text x="40" y="285" font-family="'Fira Code',monospace" font-size="11" fill="#475569">pwdata</text>
  <rect x="88" y="273" width="94" height="20" rx="4" fill="#dcfce7" stroke="#16a34a" stroke-width="1.5"/>
  <text x="135" y="288" text-anchor="middle" font-family="'Fira Code',monospace" font-size="10" font-weight="bold" fill="#166534">DATA</text>

  <!-- Write: pready -->
  <text x="40" y="320" font-family="'Fira Code',monospace" font-size="11" fill="#475569">pready</text>
  <polyline points="85,325 85,310 205,310" fill="none" stroke="#10b981" stroke-width="2"/>
  <text x="145" y="307" text-anchor="middle" font-family="'Fira Code',monospace" font-size="9" fill="#10b981">=1</text>

  <!-- Write: Phase labels -->
  <line x1="105" y1="340" x2="105" y2="355" stroke="#94a3b8" stroke-width="1" stroke-dasharray="3"/>
  <line x1="145" y1="340" x2="145" y2="355" stroke="#94a3b8" stroke-width="1" stroke-dasharray="3"/>
  <line x1="185" y1="340" x2="185" y2="355" stroke="#94a3b8" stroke-width="1" stroke-dasharray="3"/>

  <rect x="80" y="358" width="50" height="22" rx="4" fill="#eff6ff" stroke="#2563eb" stroke-width="1"/>
  <text x="105" y="373" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="9" font-weight="bold" fill="#1e40af">Setup</text>
  <rect x="120" y="358" width="50" height="22" rx="4" fill="#f5f3ff" stroke="#7c3aed" stroke-width="1"/>
  <text x="145" y="373" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="9" font-weight="bold" fill="#5b21b6">Access</text>

  <text x="105" y="400" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="10" fill="#64748b">â†‘ Setup Phase</text>
  <text x="158" y="415" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="10" fill="#64748b">â†‘ Access Phase</text>

  <!-- === Read Transfer (Right Side) === -->
  <rect x="370" y="50" width="330" height="380" rx="10" fill="#f8fafc" stroke="#cbd5e1" stroke-width="1.5" filter="url(#sh11t)"/>
  <rect x="370" y="50" width="330" height="30" rx="10" fill="#fef2f2"/>
  <rect x="370" y="70" width="330" height="10" fill="#fef2f2"/>
  <text x="535" y="70" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="13" font-weight="bold" fill="#dc2626">â”€â”€ Read ì „ì†¡ â”€â”€</text>

  <!-- Read: CLK -->
  <text x="390" y="110" font-family="'Fira Code',monospace" font-size="11" fill="#475569">clk</text>
  <polyline points="435,115 435,100 455,100 455,115 475,115 475,100 495,100 495,115 515,115 515,100 535,100 535,115 555,115" fill="none" stroke="#334155" stroke-width="2"/>

  <!-- Read: psel -->
  <text x="390" y="145" font-family="'Fira Code',monospace" font-size="11" fill="#475569">psel</text>
  <polyline points="435,150 435,135 535,135 535,150 555,150" fill="none" stroke="#2563eb" stroke-width="2"/>
  <rect x="440" y="127" width="90" height="14" rx="3" fill="#dbeafe" opacity="0.6"/>

  <!-- Read: penable -->
  <text x="390" y="180" font-family="'Fira Code',monospace" font-size="11" fill="#475569">penable</text>
  <polyline points="435,185 485,185 485,170 535,170 535,185 555,185" fill="none" stroke="#7c3aed" stroke-width="2"/>
  <rect x="488" y="162" width="44" height="14" rx="3" fill="#ede9fe" opacity="0.6"/>

  <!-- Read: pwrite -->
  <text x="390" y="215" font-family="'Fira Code',monospace" font-size="11" fill="#475569">pwrite</text>
  <polyline points="435,220 555,220" fill="none" stroke="#94a3b8" stroke-width="2"/>
  <text x="490" y="217" text-anchor="middle" font-family="'Fira Code',monospace" font-size="9" fill="#94a3b8">=0</text>

  <!-- Read: paddr -->
  <text x="390" y="250" font-family="'Fira Code',monospace" font-size="11" fill="#475569">paddr</text>
  <rect x="438" y="238" width="94" height="20" rx="4" fill="#fef3c7" stroke="#f59e0b" stroke-width="1.5"/>
  <text x="485" y="253" text-anchor="middle" font-family="'Fira Code',monospace" font-size="10" font-weight="bold" fill="#92400e">ADDR</text>

  <!-- Read: prdata -->
  <text x="390" y="285" font-family="'Fira Code',monospace" font-size="11" fill="#475569">prdata</text>
  <rect x="478" y="273" width="54" height="20" rx="4" fill="#fce7f3" stroke="#ec4899" stroke-width="1.5"/>
  <text x="505" y="288" text-anchor="middle" font-family="'Fira Code',monospace" font-size="10" font-weight="bold" fill="#9d174d">DATA</text>

  <!-- Read: pready -->
  <text x="390" y="320" font-family="'Fira Code',monospace" font-size="11" fill="#475569">pready</text>
  <polyline points="435,325 435,310 555,310" fill="none" stroke="#10b981" stroke-width="2"/>
  <text x="495" y="307" text-anchor="middle" font-family="'Fira Code',monospace" font-size="9" fill="#10b981">=1</text>

  <!-- Read: Phase labels -->
  <line x1="455" y1="340" x2="455" y2="355" stroke="#94a3b8" stroke-width="1" stroke-dasharray="3"/>
  <line x1="495" y1="340" x2="495" y2="355" stroke="#94a3b8" stroke-width="1" stroke-dasharray="3"/>
  <line x1="535" y1="340" x2="535" y2="355" stroke="#94a3b8" stroke-width="1" stroke-dasharray="3"/>

  <rect x="430" y="358" width="50" height="22" rx="4" fill="#eff6ff" stroke="#2563eb" stroke-width="1"/>
  <text x="455" y="373" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="9" font-weight="bold" fill="#1e40af">Setup</text>
  <rect x="470" y="358" width="50" height="22" rx="4" fill="#f5f3ff" stroke="#7c3aed" stroke-width="1"/>
  <text x="495" y="373" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="9" font-weight="bold" fill="#5b21b6">Access</text>

  <text x="455" y="400" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="10" fill="#64748b">â†‘ Setup Phase</text>
  <text x="508" y="415" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="10" fill="#64748b">â†‘ Access Phase</text>

  <!-- Bottom note -->
  <text x="360" y="460" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="11" fill="#64748b">pready=1 (no wait state) â€” í•­ìƒ 2í´ë¡ ì‚¬ì´í´ì— ì™„ë£Œ</text>

</svg>
</div><p><strong>2 Phase ë™ì‘:</strong></p>
<ol>
<li><p><strong>Setup Phase</strong> (ì²« ë²ˆì§¸ í´ë¡):</p>
<ul>
<li><code>psel = 1</code> â€” ìŠ¬ë ˆì´ë¸Œ ì„ íƒ</li>
<li><code>pwrite</code>, <code>paddr</code>, <code>pwdata</code> ì„¤ì •</li>
<li><code>penable = 0</code> â€” ì•„ì§ í™œì„±í™” ì•„ë‹˜</li>
</ul>
</li>
<li><p><strong>Access Phase</strong> (ë‘ ë²ˆì§¸ í´ë¡):</p>
<ul>
<li><code>penable = 1</code> â€” ì „ì†¡ í™œì„±í™”</li>
<li><code>pready = 1</code> â€” ìŠ¬ë ˆì´ë¸Œê°€ ì¤€ë¹„ ì™„ë£Œ ì‘ë‹µ</li>
<li>Write: ìŠ¬ë ˆì´ë¸Œê°€ <code>pwdata</code>ë¥¼ ì €ì¥</li>
<li>Read: ìŠ¬ë ˆì´ë¸Œê°€ <code>prdata</code>ì— ë°ì´í„° ì¶œë ¥</li>
<li>ì „ì†¡ ì™„ë£Œ â†’ <code>psel = 0</code>, <code>penable = 0</code></li>
</ul>
</li>
</ol>
<blockquote>
<p>ğŸ’¡ <strong>ì‹¤ë¬´ íŒ</strong>: <code>pready</code>ê°€ 0ì´ë©´ <strong>wait state</strong>ì…ë‹ˆë‹¤. ìŠ¬ë ˆì´ë¸Œê°€ ì•„ì§ ì¤€ë¹„ë˜ì§€ ì•Šì•˜ë‹¤ëŠ” ì˜ë¯¸ì´ë©°, Access phaseê°€ ì—°ì¥ë©ë‹ˆë‹¤. ì´ ì±•í„°ì—ì„œëŠ” í•­ìƒ <code>pready = 1</code> (no wait state)ë¡œ ì‹œì‘í•˜ê³ , wait state ì²˜ë¦¬ëŠ” ì—°ìŠµë¬¸ì œì—ì„œ ë‹¤ë£¹ë‹ˆë‹¤.</p>
</blockquote>
<hr>
<h2 id="11-2-systemverilog-ì¸í„°í˜ì´ìŠ¤-ì‹¬í™”">11.2 SystemVerilog ì¸í„°í˜ì´ìŠ¤ ì‹¬í™”</h2>
<blockquote>
<p><strong>ì´ ì ˆì˜ ëª©í‘œ</strong>: Ch.3ì—ì„œ ë°°ìš´ ì¸í„°í˜ì´ìŠ¤ì˜ clocking blockê³¼ modportë¥¼ ì‹¤ë¬´ ìˆ˜ì¤€ìœ¼ë¡œ í™œìš©í•˜ì—¬ APB ì¸í„°í˜ì´ìŠ¤ë¥¼ ì„¤ê³„í•©ë‹ˆë‹¤.</p>
</blockquote>
<h3 id="11-2-1-clocking-block-íƒ€ì´ë°-ì•ˆì „í•œ-ì‹ í˜¸-ì ‘ê·¼">11.2.1 Clocking Block â€” íƒ€ì´ë° ì•ˆì „í•œ ì‹ í˜¸ ì ‘ê·¼</h3>
<p>Ch.5~10ì—ì„œëŠ” ë“œë¼ì´ë²„ê°€ ì¸í„°í˜ì´ìŠ¤ ì‹ í˜¸ì— ì§ì ‘ ì ‘ê·¼í–ˆìŠµë‹ˆë‹¤:</p>
<pre><code class="hljs language-systemverilog"><span class="hljs-comment">// Part 2 ë°©ì‹ â€” ì§ì ‘ ì‹ í˜¸ ì ‘ê·¼</span>
@(<span class="hljs-keyword">posedge</span> vif<span class="hljs-variable">.clk</span>);
vif<span class="hljs-variable">.rst_n</span>  &lt;= item<span class="hljs-variable">.rst_n</span>;
vif<span class="hljs-variable">.enable</span> &lt;= item<span class="hljs-variable">.enable</span>;
</code></pre><p>ì´ ë°©ì‹ì€ ê°„ë‹¨í•œ ì¹´ìš´í„°ì—ì„œëŠ” ë¬¸ì œì—†ì§€ë§Œ, ì‹¤ë¬´ í”„ë¡œí† ì½œì—ì„œëŠ” <strong>íƒ€ì´ë° ë¬¸ì œ</strong>ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Clocking blockì€ ì´ë¥¼ í•´ê²°í•©ë‹ˆë‹¤:</p>
<pre><code class="hljs language-systemverilog"><span class="hljs-comment">// Part 3 ë°©ì‹ â€” clocking blockì„ í†µí•œ ì•ˆì „í•œ ì ‘ê·¼</span>
@(vif<span class="hljs-variable">.drv_cb</span>);              <span class="hljs-comment">// clocking block ì´ë²¤íŠ¸ ëŒ€ê¸°</span>
vif<span class="hljs-variable">.drv_cb</span><span class="hljs-variable">.psel</span>    &lt;= <span class="hljs-number">1&#x27;b1</span>; <span class="hljs-comment">// outputì€ clocking blockì„ í†µí•´ êµ¬ë™</span>
vif<span class="hljs-variable">.drv_cb</span><span class="hljs-variable">.pwrite</span>  &lt;= <span class="hljs-number">1&#x27;b1</span>;
vif<span class="hljs-variable">.drv_cb</span><span class="hljs-variable">.paddr</span>   &lt;= item<span class="hljs-variable">.addr</span>;
vif<span class="hljs-variable">.drv_cb</span><span class="hljs-variable">.pwdata</span>  &lt;= item<span class="hljs-variable">.data</span>;
</code></pre><p><strong>Clocking blockì˜ ì¥ì :</strong></p>
<table>
<thead>
<tr>
<th>íŠ¹ì„±</th>
<th>ì§ì ‘ ì ‘ê·¼</th>
<th>Clocking Block</th>
</tr>
</thead>
<tbody><tr>
<td><strong>íƒ€ì´ë°</strong></td>
<td>ìˆ˜ë™ <code>@(posedge clk)</code></td>
<td>ìë™ ë™ê¸°í™”</td>
</tr>
<tr>
<td><strong>ê²½ìŸ ì¡°ê±´</strong></td>
<td>ê°€ëŠ¥</td>
<td>ë°©ì§€</td>
</tr>
<tr>
<td><strong>ë°©í–¥ ì œì–´</strong></td>
<td>ì—†ìŒ</td>
<td><code>input</code>/<code>output</code> ëª…ì‹œ</td>
</tr>
<tr>
<td><strong>ì‹¤ë¬´ ì‚¬ìš©</strong></td>
<td>í•™ìŠµìš©</td>
<td>í‘œì¤€ ë°©ì‹</td>
</tr>
</tbody></table>
<p><strong>Clocking blockì€ &quot;ì´ ì‹ í˜¸ë¥¼ ì–¸ì œ, ì–´ë–¤ ë°©í–¥ìœ¼ë¡œ ì ‘ê·¼í•˜ëŠ”ì§€&quot;ë¥¼ ëª…í™•íˆ ì •ì˜í•©ë‹ˆë‹¤.</strong></p>
<blockquote>
<p>ğŸ’¡ <strong>ì‹¬í™” ì°¸ê³ </strong>: Clocking blockì€ ë‚´ë¶€ì ìœ¼ë¡œ <code>input</code> ì‹ í˜¸ì— <code>#1step</code> ì§€ì—°ì„ ì ìš©í•©ë‹ˆë‹¤. ì´ëŠ” &quot;í´ë¡ ì—ì§€ ì§ì „ì˜ ì•ˆì •ëœ ê°’&quot;ì„ ì½ì–´ì˜¤ëŠ” ë©”ì»¤ë‹ˆì¦˜ìœ¼ë¡œ, ë™ì¼ ì‹œì ì˜ <code>output</code>ê³¼ <code>input</code> ì‚¬ì´ì˜ ê²½ìŸ ì¡°ê±´ì„ ë°©ì§€í•©ë‹ˆë‹¤. ì´ ì±•í„°ì—ì„œëŠ” ê°œë…ë§Œ ì•Œì•„ë‘ë©´ ì¶©ë¶„í•˜ë©°, ìì„¸í•œ íƒ€ì´ë°ì€ ì‹œë®¬ë ˆì´í„° ë§¤ë‰´ì–¼ì„ ì°¸ê³ í•˜ì„¸ìš”.</p>
</blockquote>
<h3 id="11-2-2-modport-ë“œë¼ì´ë²„-ëª¨ë‹ˆí„°-ì ‘ê·¼-ì œì–´">11.2.2 Modport â€” ë“œë¼ì´ë²„/ëª¨ë‹ˆí„° ì ‘ê·¼ ì œì–´</h3>
<p>ModportëŠ” ì¸í„°í˜ì´ìŠ¤ ì‚¬ìš©ìë³„ë¡œ <strong>ì ‘ê·¼ ê¶Œí•œ</strong>ì„ ë¶„ë¦¬í•©ë‹ˆë‹¤:</p>
<pre><code class="hljs language-systemverilog"><span class="hljs-comment">// ë“œë¼ì´ë²„: ì¶œë ¥(êµ¬ë™)ë§Œ ê°€ëŠ¥</span>
<span class="hljs-keyword">modport</span> driver(<span class="hljs-keyword">clocking</span> drv_cb, <span class="hljs-keyword">input</span> pclk, <span class="hljs-keyword">input</span> presetn);

<span class="hljs-comment">// ëª¨ë‹ˆí„°: ì…ë ¥(ê´€ì°°)ë§Œ ê°€ëŠ¥</span>
<span class="hljs-keyword">modport</span> monitor(<span class="hljs-keyword">clocking</span> mon_cb, <span class="hljs-keyword">input</span> pclk, <span class="hljs-keyword">input</span> presetn);
</code></pre><p><strong>ì™œ modportê°€ í•„ìš”í•œê°€?</strong></p>
<ul>
<li><strong>ì•ˆì „ì„±</strong>: ëª¨ë‹ˆí„°ê°€ ì‹¤ìˆ˜ë¡œ ì‹ í˜¸ë¥¼ êµ¬ë™í•˜ëŠ” ê²ƒì„ ì»´íŒŒì¼ íƒ€ì„ì— ë°©ì§€</li>
<li><strong>ê°€ë…ì„±</strong>: ì½”ë“œë¥¼ ì½ì„ ë•Œ ê° ì»´í¬ë„ŒíŠ¸ì˜ ì—­í• ì´ ëª…í™•</li>
<li><strong>ì¬ì‚¬ìš©</strong>: ì¸í„°í˜ì´ìŠ¤ë¥¼ ë‹¤ë¥¸ í”„ë¡œì íŠ¸ì—ì„œ ì¬ì‚¬ìš©í•  ë•Œ ì‚¬ìš©ë²•ì´ ëª…í™•</li>
</ul>
<h3 id="11-2-3-apb-ì¸í„°í˜ì´ìŠ¤-ì„¤ê³„-apb-if">11.2.3 APB ì¸í„°í˜ì´ìŠ¤ ì„¤ê³„ (apb_if)</h3>
<pre><code class="hljs language-systemverilog"><span class="hljs-comment">// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="hljs-comment">// APB ì¸í„°í˜ì´ìŠ¤ ì •ì˜</span>
<span class="hljs-comment">// íŒŒì¼: apb_if.sv</span>
<span class="hljs-comment">// ì—­í• : APB í”„ë¡œí† ì½œ ì‹ í˜¸ ë²ˆë“¤ + clocking block + modport</span>
<span class="hljs-comment">// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="hljs-keyword">interface</span> apb_if(<span class="hljs-keyword">input</span> <span class="hljs-keyword">logic</span> pclk, <span class="hljs-keyword">input</span> <span class="hljs-keyword">logic</span> presetn);

  <span class="hljs-comment">// â”€â”€ APB ì‹ í˜¸ ì„ ì–¸ â”€â”€</span>
  <span class="hljs-keyword">logic</span>        psel;      <span class="hljs-comment">// ìŠ¬ë ˆì´ë¸Œ ì„ íƒ</span>
  <span class="hljs-keyword">logic</span>        penable;   <span class="hljs-comment">// ì „ì†¡ í™œì„±í™”</span>
  <span class="hljs-keyword">logic</span>        pwrite;    <span class="hljs-comment">// 1=Write, 0=Read</span>
  <span class="hljs-keyword">logic</span> [<span class="hljs-number">3</span>:<span class="hljs-number">0</span>]  paddr;     <span class="hljs-comment">// ì£¼ì†Œ (16ê°œ ë ˆì§€ìŠ¤í„°)</span>
  <span class="hljs-keyword">logic</span> [<span class="hljs-number">7</span>:<span class="hljs-number">0</span>]  pwdata;    <span class="hljs-comment">// ì“°ê¸° ë°ì´í„°</span>
  <span class="hljs-keyword">logic</span> [<span class="hljs-number">7</span>:<span class="hljs-number">0</span>]  prdata;    <span class="hljs-comment">// ì½ê¸° ë°ì´í„°</span>
  <span class="hljs-keyword">logic</span>        pready;    <span class="hljs-comment">// ìŠ¬ë ˆì´ë¸Œ ì¤€ë¹„ ì™„ë£Œ</span>

  <span class="hljs-comment">// â”€â”€ ë“œë¼ì´ë²„ìš© Clocking Block â”€â”€</span>
  <span class="hljs-comment">// Master ì—­í• : psel, penable, pwrite, paddr, pwdataë¥¼ êµ¬ë™</span>
  <span class="hljs-comment">//              prdata, preadyë¥¼ ê´€ì°°</span>
  <span class="hljs-keyword">clocking</span> drv_cb @(<span class="hljs-keyword">posedge</span> pclk);
    <span class="hljs-keyword">output</span> psel, penable, pwrite, paddr, pwdata;
    <span class="hljs-keyword">input</span>  prdata, pready;
  <span class="hljs-keyword">endclocking</span>

  <span class="hljs-comment">// â”€â”€ ëª¨ë‹ˆí„°ìš© Clocking Block â”€â”€</span>
  <span class="hljs-comment">// ê´€ì°°ì ì—­í• : ëª¨ë“  ì‹ í˜¸ë¥¼ ì…ë ¥ìœ¼ë¡œ ê´€ì°°</span>
  <span class="hljs-keyword">clocking</span> mon_cb @(<span class="hljs-keyword">posedge</span> pclk);
    <span class="hljs-keyword">input</span> psel, penable, pwrite, paddr, pwdata;
    <span class="hljs-keyword">input</span> prdata, pready;
  <span class="hljs-keyword">endclocking</span>

  <span class="hljs-comment">// â”€â”€ Modport ì •ì˜ â”€â”€</span>
  <span class="hljs-keyword">modport</span> driver(<span class="hljs-keyword">clocking</span> drv_cb, <span class="hljs-keyword">input</span> pclk, <span class="hljs-keyword">input</span> presetn);
  <span class="hljs-keyword">modport</span> monitor(<span class="hljs-keyword">clocking</span> mon_cb, <span class="hljs-keyword">input</span> pclk, <span class="hljs-keyword">input</span> presetn);

<span class="hljs-keyword">endinterface</span>
</code></pre><p><strong>ì„¤ê³„ ì›ì¹™:</strong></p>
<ul>
<li><strong>ë“œë¼ì´ë²„ clocking block</strong>: APB Master ì—­í• ì˜ ì¶œë ¥ ì‹ í˜¸ë¥¼ <code>output</code>, ìŠ¬ë ˆì´ë¸Œ ì‘ë‹µì„ <code>input</code></li>
<li><strong>ëª¨ë‹ˆí„° clocking block</strong>: ëª¨ë“  ì‹ í˜¸ë¥¼ <code>input</code>ìœ¼ë¡œ ê´€ì°°ë§Œ</li>
<li><strong>Modport</strong>: ê° UVM ì»´í¬ë„ŒíŠ¸ê°€ ìì‹ ì˜ ì—­í• ì— ë§ëŠ” clocking blockë§Œ ì ‘ê·¼</li>
</ul>
<h3 id="11-2-4-counter-if-vs-apb-if-ë¹„êµ">11.2.4 counter_if vs apb_if ë¹„êµ</h3>
<table>
<thead>
<tr>
<th>ìš”ì†Œ</th>
<th><code>counter_if</code> (Part 2)</th>
<th><code>apb_if</code> (Part 3)</th>
</tr>
</thead>
<tbody><tr>
<td><strong>ì‹ í˜¸ ìˆ˜</strong></td>
<td>3 (rst_n, enable, count)</td>
<td>9 (psel, penable, ...)</td>
</tr>
<tr>
<td><strong>Clocking Block</strong></td>
<td>ì—†ìŒ (ì§ì ‘ ì ‘ê·¼)</td>
<td>drv_cb, mon_cb</td>
</tr>
<tr>
<td><strong>Modport</strong></td>
<td>ì—†ìŒ</td>
<td>driver, monitor</td>
</tr>
<tr>
<td><strong>í”„ë¡œí† ì½œ</strong></td>
<td>ì—†ìŒ (ë‹¨ìˆœ ì œì–´)</td>
<td>APB 2-phase handshake</td>
</tr>
<tr>
<td><strong>ì¬ì‚¬ìš©ì„±</strong></td>
<td>ì´ í”„ë¡œì íŠ¸ ì „ìš©</td>
<td>ë‹¤ë¥¸ APB DUTì—ë„ ì¬ì‚¬ìš©</td>
</tr>
</tbody></table>
<p><strong>í•µì‹¬ ì°¨ì´</strong>: <code>counter_if</code>ëŠ” &quot;ì–´ë–¤ ì‹ í˜¸ê°€ ìˆëŠ”ê°€&quot;ë§Œ ì •ì˜í–ˆì§€ë§Œ, <code>apb_if</code>ëŠ” &quot;ëˆ„ê°€ ì–´ë–¤ ì‹ í˜¸ë¥¼ ì–´ë–¤ íƒ€ì´ë°ì— ì ‘ê·¼í•˜ëŠ”ê°€&quot;ê¹Œì§€ ì •ì˜í•©ë‹ˆë‹¤.</p>
<hr>
<h2 id="11-3-apb-slave-dut">11.3 APB Slave DUT</h2>
<blockquote>
<p><strong>ì´ ì ˆì˜ ëª©í‘œ</strong>: APB í”„ë¡œí† ì½œì„ ë”°ë¥´ëŠ” ê°„ë‹¨í•œ Slave Memory DUTë¥¼ ì´í•´í•˜ê³ , UVM íŠ¸ëœì­ì…˜ê³¼ í…ŒìŠ¤íŠ¸ë²¤ì¹˜ topì„ ì„¤ê³„í•©ë‹ˆë‹¤.</p>
</blockquote>
<h3 id="11-3-1-apb-slave-memory-rtl">11.3.1 APB Slave Memory RTL</h3>
<pre><code class="hljs language-systemverilog"><span class="hljs-comment">// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="hljs-comment">// APB Slave Memory â€” 16 x 8-bit ë ˆì§€ìŠ¤í„°</span>
<span class="hljs-comment">// íŒŒì¼: apb_slave_memory.sv</span>
<span class="hljs-comment">// ì—­í• : APB í”„ë¡œí† ì½œë¡œ ì ‘ê·¼í•˜ëŠ” ê°„ë‹¨í•œ ë©”ëª¨ë¦¬</span>
<span class="hljs-comment">// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="hljs-keyword">module</span> apb_slave_memory (
  <span class="hljs-keyword">input</span>  <span class="hljs-keyword">logic</span>        pclk,
  <span class="hljs-keyword">input</span>  <span class="hljs-keyword">logic</span>        presetn,
  <span class="hljs-keyword">input</span>  <span class="hljs-keyword">logic</span>        psel,
  <span class="hljs-keyword">input</span>  <span class="hljs-keyword">logic</span>        penable,
  <span class="hljs-keyword">input</span>  <span class="hljs-keyword">logic</span>        pwrite,
  <span class="hljs-keyword">input</span>  <span class="hljs-keyword">logic</span> [<span class="hljs-number">3</span>:<span class="hljs-number">0</span>]  paddr,
  <span class="hljs-keyword">input</span>  <span class="hljs-keyword">logic</span> [<span class="hljs-number">7</span>:<span class="hljs-number">0</span>]  pwdata,
  <span class="hljs-keyword">output</span> <span class="hljs-keyword">logic</span> [<span class="hljs-number">7</span>:<span class="hljs-number">0</span>]  prdata,
  <span class="hljs-keyword">output</span> <span class="hljs-keyword">logic</span>        pready
);

  <span class="hljs-comment">// 16ê°œì˜ 8ë¹„íŠ¸ ë ˆì§€ìŠ¤í„°</span>
  <span class="hljs-keyword">logic</span> [<span class="hljs-number">7</span>:<span class="hljs-number">0</span>] mem [<span class="hljs-number">0</span>:<span class="hljs-number">15</span>];

  <span class="hljs-comment">// í•­ìƒ ready (no wait state)</span>
  <span class="hljs-keyword">assign</span> pready = <span class="hljs-number">1&#x27;b1</span>;

  <span class="hljs-comment">// Write ë™ì‘ â€” Access phaseì—ì„œ ë°ì´í„° ì €ì¥</span>
  <span class="hljs-keyword">always_ff</span> @(<span class="hljs-keyword">posedge</span> pclk <span class="hljs-keyword">or</span> <span class="hljs-keyword">negedge</span> presetn) <span class="hljs-keyword">begin</span>
    <span class="hljs-keyword">if</span> (!presetn) <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">// ë¦¬ì…‹: ëª¨ë“  ë ˆì§€ìŠ¤í„°ë¥¼ 0ìœ¼ë¡œ ì´ˆê¸°í™”</span>
      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">16</span>; i++)
        mem[i] &lt;= <span class="hljs-number">8&#x27;h0</span>;
    <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (psel &amp;&amp; penable &amp;&amp; pwrite &amp;&amp; pready) <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">// APB Write: Setup + Access phase ì™„ë£Œ ì‹œì ì— ì €ì¥</span>
      mem[paddr] &lt;= pwdata;
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">end</span>

  <span class="hljs-comment">// Read ë™ì‘ â€” ì¡°í•© ë¡œì§ìœ¼ë¡œ ë°ì´í„° ì¶œë ¥</span>
  <span class="hljs-keyword">assign</span> prdata = (psel &amp;&amp; !pwrite) ? mem[paddr] : <span class="hljs-number">8&#x27;h0</span>;

<span class="hljs-keyword">endmodule</span>
</code></pre><p>ì´ DUTëŠ” Part 2ì˜ 4ë¹„íŠ¸ ì¹´ìš´í„°ë³´ë‹¤ ë³µì¡í•˜ì§€ë§Œ, APB í”„ë¡œí† ì½œì˜ í•µì‹¬ì„ ë‹´ê³  ìˆìŠµë‹ˆë‹¤:</p>
<ul>
<li><strong>Write</strong>: <code>psel=1, penable=1, pwrite=1</code> ì¡°ê±´ì—ì„œ <code>mem[paddr] &lt;= pwdata</code></li>
<li><strong>Read</strong>: <code>psel=1, pwrite=0</code> ì¡°ê±´ì—ì„œ <code>prdata = mem[paddr]</code></li>
<li><strong>Reset</strong>: ëª¨ë“  ë ˆì§€ìŠ¤í„°ë¥¼ 0ìœ¼ë¡œ ì´ˆê¸°í™”</li>
</ul>
<h3 id="11-3-2-apb-íŠ¸ëœì­ì…˜-ì •ì˜-apb-seq-item">11.3.2 APB íŠ¸ëœì­ì…˜ ì •ì˜ (apb_seq_item)</h3>
<pre><code class="hljs language-systemverilog"><span class="hljs-comment">// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="hljs-comment">// APB íŠ¸ëœì­ì…˜ í´ë˜ìŠ¤</span>
<span class="hljs-comment">// íŒŒì¼: apb_seq_item.sv</span>
<span class="hljs-comment">// ì—­í• : APB ì „ì†¡ 1ê±´ì„ í‘œí˜„í•˜ëŠ” UVM íŠ¸ëœì­ì…˜</span>
<span class="hljs-comment">// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="hljs-keyword">class</span> apb_seq_item <span class="hljs-keyword">extends</span> uvm_sequence_item;
  `uvm_object_utils(apb_seq_item)

  <span class="hljs-comment">// â”€â”€ íŠ¸ëœì­ì…˜ í•„ë“œ â”€â”€</span>
  <span class="hljs-keyword">rand</span> <span class="hljs-keyword">bit</span>        write;    <span class="hljs-comment">// 1=Write, 0=Read</span>
  <span class="hljs-keyword">rand</span> <span class="hljs-keyword">bit</span> [<span class="hljs-number">3</span>:<span class="hljs-number">0</span>]  addr;     <span class="hljs-comment">// ë ˆì§€ìŠ¤í„° ì£¼ì†Œ (0~15)</span>
  <span class="hljs-keyword">rand</span> <span class="hljs-keyword">bit</span> [<span class="hljs-number">7</span>:<span class="hljs-number">0</span>]  wdata;    <span class="hljs-comment">// ì“°ê¸° ë°ì´í„°</span>
       <span class="hljs-keyword">bit</span> [<span class="hljs-number">7</span>:<span class="hljs-number">0</span>]  rdata;    <span class="hljs-comment">// ì½ê¸° ë°ì´í„° (DUT ì‘ë‹µ, rand ì•„ë‹˜)</span>

  <span class="hljs-comment">// â”€â”€ ê¸°ë³¸ ì œì•½ â”€â”€</span>
  <span class="hljs-keyword">constraint</span> c_addr {
    addr <span class="hljs-keyword">inside</span> {[<span class="hljs-number">0</span>:<span class="hljs-number">15</span>]};   <span class="hljs-comment">// ìœ íš¨ ì£¼ì†Œ ë²”ìœ„</span>
  }

  <span class="hljs-keyword">function</span> <span class="hljs-keyword">new</span>(<span class="hljs-keyword">string</span> name = <span class="hljs-string">&quot;apb_seq_item&quot;</span>);
    <span class="hljs-keyword">super</span><span class="hljs-variable">.new</span>(name);
  <span class="hljs-keyword">endfunction</span>

  <span class="hljs-comment">// convert2string â€” ë¡œê·¸ì—ì„œ íŠ¸ëœì­ì…˜ ë‚´ìš©ì„ ì½ê¸° ì‰½ê²Œ ì¶œë ¥</span>
  <span class="hljs-keyword">function</span> <span class="hljs-keyword">string</span> convert2string();
    <span class="hljs-keyword">if</span> (write)
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">$sformatf</span>(<span class="hljs-string">&quot;APB WRITE: addr=0x%0h, wdata=0x%0h&quot;</span>, addr, wdata);
    <span class="hljs-keyword">else</span>
      <span class="hljs-keyword">return</span> <span class="hljs-built_in">$sformatf</span>(<span class="hljs-string">&quot;APB READ:  addr=0x%0h, rdata=0x%0h&quot;</span>, addr, rdata);
  <span class="hljs-keyword">endfunction</span>
<span class="hljs-keyword">endclass</span>
</code></pre><p><strong>Part 2 <code>counter_seq_item</code>ê³¼ì˜ ë¹„êµ:</strong></p>
<table>
<thead>
<tr>
<th>í•„ë“œ</th>
<th><code>counter_seq_item</code></th>
<th><code>apb_seq_item</code></th>
</tr>
</thead>
<tbody><tr>
<td>ì…ë ¥</td>
<td><code>rst_n</code>, <code>enable</code> (ê° 1ë¹„íŠ¸)</td>
<td><code>write</code>, <code>addr</code>, <code>wdata</code></td>
</tr>
<tr>
<td>ì¶œë ¥</td>
<td>ì—†ìŒ (ëª¨ë‹ˆí„°ê°€ count ê´€ì°°)</td>
<td><code>rdata</code> (Read ì‘ë‹µ)</td>
</tr>
<tr>
<td>ì˜ë¯¸</td>
<td>&quot;ë¦¬ì…‹í• ê¹Œ? ì¹´ìš´íŠ¸í• ê¹Œ?&quot;</td>
<td>&quot;ì–´ë””ì— ë¬´ì—‡ì„ ì“¸ê¹Œ/ì½ì„ê¹Œ?&quot;</td>
</tr>
</tbody></table>
<h3 id="11-3-3-tb-top-dutì™€-ì¸í„°í˜ì´ìŠ¤-ì—°ê²°">11.3.3 tb_top â€” DUTì™€ ì¸í„°í˜ì´ìŠ¤ ì—°ê²°</h3>
<pre><code class="hljs language-systemverilog"><span class="hljs-comment">// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="hljs-comment">// í…ŒìŠ¤íŠ¸ë²¤ì¹˜ Top ëª¨ë“ˆ</span>
<span class="hljs-comment">// íŒŒì¼: tb_top.sv</span>
<span class="hljs-comment">// ì—­í• : DUT, ì¸í„°í˜ì´ìŠ¤, UVM ì—°ê²°</span>
<span class="hljs-comment">// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="hljs-keyword">module</span> tb_top;
  <span class="hljs-comment">// í´ë¡ ìƒì„±</span>
  <span class="hljs-keyword">logic</span> pclk;
  <span class="hljs-keyword">initial</span> pclk = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">always</span> #<span class="hljs-number">5</span> pclk = ~pclk;  <span class="hljs-comment">// 10ns ì£¼ê¸° (100MHz)</span>

  <span class="hljs-comment">// ë¦¬ì…‹ ìƒì„±</span>
  <span class="hljs-keyword">logic</span> presetn;
  <span class="hljs-keyword">initial</span> <span class="hljs-keyword">begin</span>
    presetn = <span class="hljs-number">0</span>;
    #<span class="hljs-number">20</span> presetn = <span class="hljs-number">1</span>;  <span class="hljs-comment">// 20ns í›„ ë¦¬ì…‹ í•´ì œ</span>
  <span class="hljs-keyword">end</span>

  <span class="hljs-comment">// APB ì¸í„°í˜ì´ìŠ¤ ì¸ìŠ¤í„´ìŠ¤</span>
  apb_if apb_intf(pclk, presetn);

  <span class="hljs-comment">// DUT ì¸ìŠ¤í„´ìŠ¤</span>
  apb_slave_memory dut (
    <span class="hljs-variable">.pclk</span>    (pclk),
    <span class="hljs-variable">.presetn</span> (presetn),
    <span class="hljs-variable">.psel</span>    (apb_intf<span class="hljs-variable">.psel</span>),
    <span class="hljs-variable">.penable</span> (apb_intf<span class="hljs-variable">.penable</span>),
    <span class="hljs-variable">.pwrite</span>  (apb_intf<span class="hljs-variable">.pwrite</span>),
    <span class="hljs-variable">.paddr</span>   (apb_intf<span class="hljs-variable">.paddr</span>),
    <span class="hljs-variable">.pwdata</span>  (apb_intf<span class="hljs-variable">.pwdata</span>),
    <span class="hljs-variable">.prdata</span>  (apb_intf<span class="hljs-variable">.prdata</span>),
    <span class="hljs-variable">.pready</span>  (apb_intf<span class="hljs-variable">.pready</span>)
  );

  <span class="hljs-keyword">initial</span> <span class="hljs-keyword">begin</span>
    <span class="hljs-comment">// VCD íŒŒí˜• ë¤í”„ (Ch.10ì—ì„œ ë°°ìš´ ë””ë²„ê¹…ìš©)</span>
    <span class="hljs-built_in">$dumpfile</span>(<span class="hljs-string">&quot;apb_debug.vcd&quot;</span>);
    <span class="hljs-built_in">$dumpvars</span>(<span class="hljs-number">0</span>, tb_top);

    <span class="hljs-comment">// config_dbì— ì¸í„°í˜ì´ìŠ¤ ë“±ë¡ (Ch.5ì—ì„œ ë°°ìš´ íŒ¨í„´)</span>
    uvm_config_db<span class="hljs-variable">#(virtual apb_if)</span>::set(
      <span class="hljs-literal">null</span>, <span class="hljs-string">&quot;uvm_test_top.*&quot;</span>, <span class="hljs-string">&quot;vif&quot;</span>, apb_intf);

    <span class="hljs-comment">// UVM í…ŒìŠ¤íŠ¸ ì‹¤í–‰</span>
    run_test();
  <span class="hljs-keyword">end</span>
<span class="hljs-keyword">endmodule</span>
</code></pre><p><strong>êµ¬ì¡°ëŠ” Ch.5ì˜ <code>tb_top</code>ê³¼ ë™ì¼í•©ë‹ˆë‹¤.</strong> <code>counter_if</code> â†’ <code>apb_if</code>, <code>counter_4bit</code> â†’ <code>apb_slave_memory</code>ë¡œ êµì²´í–ˆì„ ë¿ì…ë‹ˆë‹¤.</p>
<hr>
<h2 id="11-4-bus-functional-model-bfm-íŒ¨í„´">11.4 Bus Functional Model (BFM) íŒ¨í„´</h2>
<blockquote>
<p><strong>ì´ ì ˆì˜ ëª©í‘œ</strong>: BFM íŒ¨í„´ì„ ì´í•´í•˜ê³ , APB í”„ë¡œí† ì½œì˜ Write/Readë¥¼ êµ¬í˜„í•˜ëŠ” ë“œë¼ì´ë²„ì™€ ëª¨ë‹ˆí„°ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤.</p>
</blockquote>
<h3 id="11-4-1-bfmì´ë€-í”„ë¡œí† ì½œ-í–‰ìœ„ë¥¼-ìº¡ìŠí™”">11.4.1 BFMì´ë€? â€” í”„ë¡œí† ì½œ í–‰ìœ„ë¥¼ ìº¡ìŠí™”</h3>
<p>Part 2ì—ì„œ ì¹´ìš´í„° ë“œë¼ì´ë²„ëŠ” ì´ë ‡ê²Œ ë™ì‘í–ˆìŠµë‹ˆë‹¤:</p>
<pre><code class="hljs language-systemverilog"><span class="hljs-comment">// Part 2: ì¹´ìš´í„° ë“œë¼ì´ë²„ â€” ì§ì ‘ ì‹ í˜¸ ëŒ€ì…</span>
@(<span class="hljs-keyword">posedge</span> vif<span class="hljs-variable">.clk</span>);
vif<span class="hljs-variable">.rst_n</span>  &lt;= item<span class="hljs-variable">.rst_n</span>;
vif<span class="hljs-variable">.enable</span> &lt;= item<span class="hljs-variable">.enable</span>;
<span class="hljs-comment">// ë! 1í´ë¡ì´ë©´ ì™„ë£Œ</span>
</code></pre><p>í•˜ì§€ë§Œ APB í”„ë¡œí† ì½œì€ <strong>ì—¬ëŸ¬ í´ë¡ì— ê±¸ì¹œ í•¸ë“œì…°ì´í¬</strong>ê°€ í•„ìš”í•©ë‹ˆë‹¤:</p>
<pre><code class="hljs language-systemverilog"><span class="hljs-comment">// Part 3: APB ë“œë¼ì´ë²„ â€” í”„ë¡œí† ì½œ í•¸ë“œì…°ì´í¬</span>
<span class="hljs-comment">// Setup Phase (1í´ë¡)</span>
@(vif<span class="hljs-variable">.drv_cb</span>);
vif<span class="hljs-variable">.drv_cb</span><span class="hljs-variable">.psel</span>    &lt;= <span class="hljs-number">1&#x27;b1</span>;
vif<span class="hljs-variable">.drv_cb</span><span class="hljs-variable">.pwrite</span>  &lt;= item<span class="hljs-variable">.write</span>;
vif<span class="hljs-variable">.drv_cb</span><span class="hljs-variable">.paddr</span>   &lt;= item<span class="hljs-variable">.addr</span>;
vif<span class="hljs-variable">.drv_cb</span><span class="hljs-variable">.pwdata</span>  &lt;= item<span class="hljs-variable">.wdata</span>;

<span class="hljs-comment">// Access Phase (1í´ë¡ ì´ìƒ)</span>
@(vif<span class="hljs-variable">.drv_cb</span>);
vif<span class="hljs-variable">.drv_cb</span><span class="hljs-variable">.penable</span> &lt;= <span class="hljs-number">1&#x27;b1</span>;
<span class="hljs-keyword">while</span> (vif<span class="hljs-variable">.drv_cb</span><span class="hljs-variable">.pready</span> !== <span class="hljs-number">1&#x27;b1</span>)  <span class="hljs-comment">// ìŠ¬ë ˆì´ë¸Œ ì‘ë‹µ ëŒ€ê¸°</span>
  @(vif<span class="hljs-variable">.drv_cb</span>);

<span class="hljs-comment">// ì „ì†¡ ì™„ë£Œ</span>
@(vif<span class="hljs-variable">.drv_cb</span>);
vif<span class="hljs-variable">.drv_cb</span><span class="hljs-variable">.psel</span>    &lt;= <span class="hljs-number">1&#x27;b0</span>;
vif<span class="hljs-variable">.drv_cb</span><span class="hljs-variable">.penable</span> &lt;= <span class="hljs-number">1&#x27;b0</span>;
</code></pre><p>**Bus Functional Model(BFM)**ì€ ì´ëŸ¬í•œ í”„ë¡œí† ì½œ í–‰ìœ„ë¥¼ <strong>taskë¡œ ìº¡ìŠí™”</strong>í•˜ëŠ” íŒ¨í„´ì…ë‹ˆë‹¤:</p>
<table>
<thead>
<tr>
<th>ê´€ì </th>
<th>ì§ì ‘ ì‹ í˜¸ ëŒ€ì…</th>
<th>BFM íŒ¨í„´</th>
</tr>
</thead>
<tbody><tr>
<td><strong>ì¶”ìƒí™”</strong></td>
<td>ë¹„íŠ¸ ë ˆë²¨</td>
<td>íŠ¸ëœì­ì…˜ ë ˆë²¨</td>
</tr>
<tr>
<td><strong>ë³µì¡ë„</strong></td>
<td>ì‹ í˜¸ë§ˆë‹¤ ì½”ë”©</td>
<td><code>drive_write(addr, data)</code> í˜¸ì¶œ</td>
</tr>
<tr>
<td><strong>ì¬ì‚¬ìš©</strong></td>
<td>DUTë§ˆë‹¤ ìƒˆë¡œ ì‘ì„±</td>
<td>í”„ë¡œí† ì½œ í•œ ë²ˆ êµ¬í˜„, ì¬ì‚¬ìš©</td>
</tr>
<tr>
<td><strong>ìœ ì§€ë³´ìˆ˜</strong></td>
<td>í”„ë¡œí† ì½œ ë³€ê²½ ì‹œ ì „ì²´ ìˆ˜ì •</td>
<td>BFM taskë§Œ ìˆ˜ì •</td>
</tr>
</tbody></table>
<p><strong>BFMì´ í•„ìš”í•œ ì´ìœ </strong>: &quot;ì–´ë–¤ ê°’ì„ ë³´ë‚¼ê¹Œ?&quot;(ì‹œí€€ìŠ¤ì˜ ì—­í• )ì™€ &quot;ì–´ë–»ê²Œ ë³´ë‚¼ê¹Œ?&quot;(í”„ë¡œí† ì½œì˜ ì—­í• )ë¥¼ ë¶„ë¦¬í•©ë‹ˆë‹¤.</p>
<p><strong>êµ¬ì²´ì  ì‹œë‚˜ë¦¬ì˜¤</strong>: í”„ë¡œí† ì½œ ì‚¬ì–‘ì´ ë³€ê²½ë˜ì–´ APBì— <code>pslverr</code> (ì—ëŸ¬ ì‘ë‹µ) ì‹ í˜¸ê°€ ì¶”ê°€ëœë‹¤ê³  ê°€ì •í•©ì‹œë‹¤:</p>
<ul>
<li><strong>ì§ì ‘ ì‹ í˜¸ ëŒ€ì… ë°©ì‹</strong>: 10ê°œ ì‹œí€€ìŠ¤ì˜ ëª¨ë“  <code>@(posedge clk)</code> ë¸”ë¡ì—ì„œ <code>pslverr</code> ì²˜ë¦¬ë¥¼ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤ â†’ 10ê³³ ìˆ˜ì •</li>
<li><strong>BFM ë°©ì‹</strong>: <code>drive_transfer()</code> task 1ê°œë§Œ ìˆ˜ì •í•˜ë©´ ë©ë‹ˆë‹¤ â†’ 1ê³³ ìˆ˜ì •</li>
</ul>
<p>í”„ë¡œí† ì½œì´ ë³µì¡í•´ì§ˆìˆ˜ë¡ BFMì˜ ê°€ì¹˜ê°€ ì»¤ì§‘ë‹ˆë‹¤. ì‹¤ë¬´ì—ì„œ AXI í”„ë¡œí† ì½œì€ 5ê°œ ì±„ë„ì— ìˆ˜ì‹­ ê°œ ì‹ í˜¸ê°€ ìˆìœ¼ë©°, BFM ì—†ì´ëŠ” ì‹œí€€ìŠ¤ ì‘ì„±ì´ ì‚¬ì‹¤ìƒ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
<h3 id="11-4-2-apb-master-driver-write-read-í”„ë¡œí† ì½œ-êµ¬í˜„">11.4.2 APB Master Driver â€” Write/Read í”„ë¡œí† ì½œ êµ¬í˜„</h3>
<pre><code class="hljs language-systemverilog"><span class="hljs-comment">// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="hljs-comment">// APB Master Driver</span>
<span class="hljs-comment">// íŒŒì¼: apb_driver.sv</span>
<span class="hljs-comment">// ì—­í• : ì‹œí€€ì„œë¡œë¶€í„° íŠ¸ëœì­ì…˜ì„ ë°›ì•„ APB í”„ë¡œí† ì½œë¡œ ì¸í„°í˜ì´ìŠ¤ êµ¬ë™</span>
<span class="hljs-comment">// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="hljs-keyword">class</span> apb_driver <span class="hljs-keyword">extends</span> uvm_driver <span class="hljs-variable">#(apb_seq_item)</span>;
  `uvm_component_utils(apb_driver)

  <span class="hljs-keyword">virtual</span> apb_if<span class="hljs-variable">.driver</span> vif;  <span class="hljs-comment">// modport íƒ€ì…ìœ¼ë¡œ ì„ ì–¸</span>

  <span class="hljs-keyword">function</span> <span class="hljs-keyword">new</span>(<span class="hljs-keyword">string</span> name, uvm_component parent);
    <span class="hljs-keyword">super</span><span class="hljs-variable">.new</span>(name, parent);
  <span class="hljs-keyword">endfunction</span>

  <span class="hljs-keyword">function</span> <span class="hljs-keyword">void</span> build_phase(uvm_phase phase);
    <span class="hljs-keyword">super</span><span class="hljs-variable">.build_phase</span>(phase);
    <span class="hljs-keyword">if</span> (!uvm_config_db<span class="hljs-variable">#(virtual apb_if)::get(this, &quot;&quot;, &quot;vif&quot;, vif))</span>
      `uvm_fatal(get_type_name(), <span class="hljs-string">&quot;config_db::get failed for &#x27;vif&#x27;&quot;</span>)
  <span class="hljs-keyword">endfunction</span>

  <span class="hljs-comment">// â”€â”€ ë©”ì¸ ë“œë¼ì´ë¹™ ë£¨í”„ â”€â”€</span>
  <span class="hljs-keyword">task</span> run_phase(uvm_phase phase);
    <span class="hljs-comment">// ë¦¬ì…‹ ëŒ€ê¸°</span>
    @(<span class="hljs-keyword">posedge</span> vif<span class="hljs-variable">.presetn</span>);
    `uvm_info(get_type_name(), <span class="hljs-string">&quot;ë¦¬ì…‹ í•´ì œ ê°ì§€, ë“œë¼ì´ë¹™ ì‹œì‘&quot;</span>, UVM_LOW)

    <span class="hljs-keyword">forever</span> <span class="hljs-keyword">begin</span>
      apb_seq_item item;
      seq_item_port<span class="hljs-variable">.get_next_item</span>(item);

      <span class="hljs-comment">// â”€â”€ BFM: APB í”„ë¡œí† ì½œ êµ¬ë™ â”€â”€</span>
      drive_transfer(item);

      `uvm_info(get_type_name(),
        <span class="hljs-built_in">$sformatf</span>(<span class="hljs-string">&quot;ì „ì†¡ ì™„ë£Œ: %s&quot;</span>, item<span class="hljs-variable">.convert2string</span>()), UVM_MEDIUM)

      seq_item_port<span class="hljs-variable">.item_done</span>();
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">endtask</span>

  <span class="hljs-comment">// â”€â”€ BFM Task: APB ì „ì†¡ 1ê±´ êµ¬ë™ â”€â”€</span>
  <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">task</span> drive_transfer(apb_seq_item item);
    <span class="hljs-comment">// [1] Setup Phase</span>
    @(vif<span class="hljs-variable">.drv_cb</span>);
    vif<span class="hljs-variable">.drv_cb</span><span class="hljs-variable">.psel</span>    &lt;= <span class="hljs-number">1&#x27;b1</span>;
    vif<span class="hljs-variable">.drv_cb</span><span class="hljs-variable">.penable</span> &lt;= <span class="hljs-number">1&#x27;b0</span>;
    vif<span class="hljs-variable">.drv_cb</span><span class="hljs-variable">.pwrite</span>  &lt;= item<span class="hljs-variable">.write</span>;
    vif<span class="hljs-variable">.drv_cb</span><span class="hljs-variable">.paddr</span>   &lt;= item<span class="hljs-variable">.addr</span>;
    <span class="hljs-keyword">if</span> (item<span class="hljs-variable">.write</span>)
      vif<span class="hljs-variable">.drv_cb</span><span class="hljs-variable">.pwdata</span> &lt;= item<span class="hljs-variable">.wdata</span>;

    <span class="hljs-comment">// [2] Access Phase</span>
    @(vif<span class="hljs-variable">.drv_cb</span>);
    vif<span class="hljs-variable">.drv_cb</span><span class="hljs-variable">.penable</span> &lt;= <span class="hljs-number">1&#x27;b1</span>;

    <span class="hljs-comment">// pready ëŒ€ê¸° (no wait stateë©´ ì¦‰ì‹œ í†µê³¼)</span>
    <span class="hljs-keyword">while</span> (vif<span class="hljs-variable">.drv_cb</span><span class="hljs-variable">.pready</span> !== <span class="hljs-number">1&#x27;b1</span>)
      @(vif<span class="hljs-variable">.drv_cb</span>);

    <span class="hljs-comment">// Read ì‘ë‹µ ìº¡ì²˜</span>
    <span class="hljs-keyword">if</span> (!item<span class="hljs-variable">.write</span>)
      item<span class="hljs-variable">.rdata</span> = vif<span class="hljs-variable">.drv_cb</span><span class="hljs-variable">.prdata</span>;

    <span class="hljs-comment">// [3] ì „ì†¡ ì™„ë£Œ â€” ë²„ìŠ¤ í•´ì œ</span>
    @(vif<span class="hljs-variable">.drv_cb</span>);
    vif<span class="hljs-variable">.drv_cb</span><span class="hljs-variable">.psel</span>    &lt;= <span class="hljs-number">1&#x27;b0</span>;
    vif<span class="hljs-variable">.drv_cb</span><span class="hljs-variable">.penable</span> &lt;= <span class="hljs-number">1&#x27;b0</span>;
  <span class="hljs-keyword">endtask</span>

<span class="hljs-keyword">endclass</span>
</code></pre><p><strong>í•µì‹¬ í¬ì¸íŠ¸:</strong></p>
<ul>
<li><code>drive_transfer()</code> taskê°€ <strong>BFM</strong>ì…ë‹ˆë‹¤ â€” APB í”„ë¡œí† ì½œì„ í•œ ê³³ì— ìº¡ìŠí™”</li>
<li><code>virtual apb_if.driver vif</code> â€” modport íƒ€ì…ìœ¼ë¡œ ì ‘ê·¼ ì œí•œ</li>
<li><code>@(vif.drv_cb)</code> â€” clocking block ì´ë²¤íŠ¸ë¡œ ë™ê¸°í™”</li>
<li>Read ì‹œ <code>item.rdata</code>ì— ì‘ë‹µì„ ì €ì¥í•˜ì—¬ ì‹œí€€ìŠ¤ì— ì „ë‹¬</li>
</ul>
<h3 id="11-4-3-apb-monitor-í”„ë¡œí† ì½œ-ê´€ì°°ê³¼-íŠ¸ëœì­ì…˜-ì¶”ì¶œ">11.4.3 APB Monitor â€” í”„ë¡œí† ì½œ ê´€ì°°ê³¼ íŠ¸ëœì­ì…˜ ì¶”ì¶œ</h3>
<pre><code class="hljs language-systemverilog"><span class="hljs-comment">// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="hljs-comment">// APB Monitor</span>
<span class="hljs-comment">// íŒŒì¼: apb_monitor.sv</span>
<span class="hljs-comment">// ì—­í• : APB ë²„ìŠ¤ë¥¼ ê´€ì°°í•˜ì—¬ íŠ¸ëœì­ì…˜ ì¶”ì¶œ, analysis portë¡œ ì „ì†¡</span>
<span class="hljs-comment">// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="hljs-keyword">class</span> apb_monitor <span class="hljs-keyword">extends</span> uvm_monitor;
  `uvm_component_utils(apb_monitor)

  <span class="hljs-keyword">virtual</span> apb_if<span class="hljs-variable">.monitor</span> vif;  <span class="hljs-comment">// monitor modport</span>
  uvm_analysis_port <span class="hljs-variable">#(apb_seq_item)</span> ap;  <span class="hljs-comment">// ìŠ¤ì½”ì–´ë³´ë“œ/ì»¤ë²„ë¦¬ì§€ë¡œ ì „ì†¡</span>

  <span class="hljs-keyword">function</span> <span class="hljs-keyword">new</span>(<span class="hljs-keyword">string</span> name, uvm_component parent);
    <span class="hljs-keyword">super</span><span class="hljs-variable">.new</span>(name, parent);
  <span class="hljs-keyword">endfunction</span>

  <span class="hljs-keyword">function</span> <span class="hljs-keyword">void</span> build_phase(uvm_phase phase);
    <span class="hljs-keyword">super</span><span class="hljs-variable">.build_phase</span>(phase);
    ap = <span class="hljs-keyword">new</span>(<span class="hljs-string">&quot;ap&quot;</span>, <span class="hljs-keyword">this</span>);
    <span class="hljs-keyword">if</span> (!uvm_config_db<span class="hljs-variable">#(virtual apb_if)::get(this, &quot;&quot;, &quot;vif&quot;, vif))</span>
      `uvm_fatal(get_type_name(), <span class="hljs-string">&quot;config_db::get failed for &#x27;vif&#x27;&quot;</span>)
  <span class="hljs-keyword">endfunction</span>

  <span class="hljs-comment">// â”€â”€ í”„ë¡œí† ì½œ ê´€ì°° ë£¨í”„ â”€â”€</span>
  <span class="hljs-keyword">task</span> run_phase(uvm_phase phase);
    @(<span class="hljs-keyword">posedge</span> vif<span class="hljs-variable">.presetn</span>);  <span class="hljs-comment">// ë¦¬ì…‹ í•´ì œ ëŒ€ê¸°</span>

    <span class="hljs-keyword">forever</span> <span class="hljs-keyword">begin</span>
      apb_seq_item item;

      <span class="hljs-comment">// Access Phase ì™„ë£Œ ì‹œì  ê°ì§€</span>
      <span class="hljs-comment">// psel=1, penable=1, pready=1ì´ë©´ ì „ì†¡ ì™„ë£Œ</span>
      @(vif<span class="hljs-variable">.mon_cb</span>);
      <span class="hljs-keyword">if</span> (vif<span class="hljs-variable">.mon_cb</span><span class="hljs-variable">.psel</span> &amp;&amp; vif<span class="hljs-variable">.mon_cb</span><span class="hljs-variable">.penable</span> &amp;&amp; vif<span class="hljs-variable">.mon_cb</span><span class="hljs-variable">.pready</span>) <span class="hljs-keyword">begin</span>
        item = apb_seq_item::type_id::create(<span class="hljs-string">&quot;item&quot;</span>);

        <span class="hljs-comment">// íŠ¸ëœì­ì…˜ ì •ë³´ ì¶”ì¶œ</span>
        item<span class="hljs-variable">.write</span> = vif<span class="hljs-variable">.mon_cb</span><span class="hljs-variable">.pwrite</span>;
        item<span class="hljs-variable">.addr</span>  = vif<span class="hljs-variable">.mon_cb</span><span class="hljs-variable">.paddr</span>;
        item<span class="hljs-variable">.wdata</span> = vif<span class="hljs-variable">.mon_cb</span><span class="hljs-variable">.pwdata</span>;
        item<span class="hljs-variable">.rdata</span> = vif<span class="hljs-variable">.mon_cb</span><span class="hljs-variable">.prdata</span>;

        `uvm_info(get_type_name(),
          <span class="hljs-built_in">$sformatf</span>(<span class="hljs-string">&quot;ê´€ì°°: %s&quot;</span>, item<span class="hljs-variable">.convert2string</span>()), UVM_HIGH)

        <span class="hljs-comment">// analysis portë¡œ ì „ì†¡ (ìŠ¤ì½”ì–´ë³´ë“œ, ì»¤ë²„ë¦¬ì§€ê°€ ìˆ˜ì‹ )</span>
        ap<span class="hljs-variable">.write</span>(item);
      <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">endtask</span>

<span class="hljs-keyword">endclass</span>
</code></pre><p><strong>ëª¨ë‹ˆí„°ì˜ í•µì‹¬:</strong></p>
<ul>
<li><code>psel &amp;&amp; penable &amp;&amp; pready</code> â€” APB ì „ì†¡ ì™„ë£Œ ì¡°ê±´</li>
<li>ëª¨ë‹ˆí„°ëŠ” <strong>ë²„ìŠ¤ì— ì˜í–¥ì„ ì£¼ì§€ ì•Šê³ </strong> ê´€ì°°ë§Œ í•©ë‹ˆë‹¤ (modport monitor)</li>
<li><code>ap.write(item)</code> â€” Ch.8ì—ì„œ ë°°ìš´ analysis port íŒ¨í„´</li>
</ul>
<h3 id="11-4-4-counter-driver-vs-apb-driver-ë¹„êµ">11.4.4 counter_driver vs apb_driver ë¹„êµ</h3>
<table>
<thead>
<tr>
<th>ìš”ì†Œ</th>
<th><code>counter_driver</code> (Part 2)</th>
<th><code>apb_driver</code> (Part 3)</th>
</tr>
</thead>
<tbody><tr>
<td><strong>ì¸í„°í˜ì´ìŠ¤</strong></td>
<td><code>virtual counter_if vif</code></td>
<td><code>virtual apb_if.driver vif</code></td>
</tr>
<tr>
<td><strong>ë™ê¸°í™”</strong></td>
<td><code>@(posedge vif.clk)</code></td>
<td><code>@(vif.drv_cb)</code></td>
</tr>
<tr>
<td><strong>ì‹ í˜¸ ì ‘ê·¼</strong></td>
<td><code>vif.rst_n &lt;= ...</code></td>
<td><code>vif.drv_cb.psel &lt;= ...</code></td>
</tr>
<tr>
<td><strong>í”„ë¡œí† ì½œ</strong></td>
<td>1í´ë¡ ì™„ë£Œ</td>
<td>2+í´ë¡ í•¸ë“œì…°ì´í¬</td>
</tr>
<tr>
<td><strong>BFM task</strong></td>
<td>ì—†ìŒ (ì§ì ‘ ëŒ€ì…)</td>
<td><code>drive_transfer()</code></td>
</tr>
<tr>
<td><strong>UVM êµ¬ì¡°</strong></td>
<td><code>uvm_driver #(T)</code></td>
<td><code>uvm_driver #(T)</code> â† <strong>ë™ì¼!</strong></td>
</tr>
</tbody></table>
<p>UVM í”„ë ˆì„ì›Œí¬ ë ˆë²¨ì—ì„œëŠ” <strong>ì™„ì „íˆ ë™ì¼í•œ íŒ¨í„´</strong>ì…ë‹ˆë‹¤. ë°”ë€ ê²ƒì€ <code>drive_transfer()</code> ë‚´ë¶€ì˜ í”„ë¡œí† ì½œ ë¡œì§ë¿ì…ë‹ˆë‹¤.</p>
<hr>
<h2 id="11-5-apb-ì—ì´ì „íŠ¸-ì¡°ë¦½">11.5 APB ì—ì´ì „íŠ¸ ì¡°ë¦½</h2>
<blockquote>
<p><strong>ì´ ì ˆì˜ ëª©í‘œ</strong>: ë“œë¼ì´ë²„, ëª¨ë‹ˆí„°, ì‹œí€€ì„œë¥¼ APB ì—ì´ì „íŠ¸ë¡œ ì¡°ë¦½í•˜ê³ , í™˜ê²½ê³¼ í…ŒìŠ¤íŠ¸ í´ë˜ìŠ¤ë¥¼ êµ¬ì„±í•©ë‹ˆë‹¤.</p>
</blockquote>
<h3 id="11-5-1-apb-agent-ë“œë¼ì´ë²„-ëª¨ë‹ˆí„°-ì‹œí€€ì„œ-í†µí•©">11.5.1 apb_agent â€” ë“œë¼ì´ë²„, ëª¨ë‹ˆí„°, ì‹œí€€ì„œ í†µí•©</h3>
<pre><code class="hljs language-systemverilog"><span class="hljs-comment">// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="hljs-comment">// APB Agent</span>
<span class="hljs-comment">// íŒŒì¼: apb_agent.sv</span>
<span class="hljs-comment">// ì—­í• : APB ë“œë¼ì´ë²„, ëª¨ë‹ˆí„°, ì‹œí€€ì„œë¥¼ í•˜ë‚˜ì˜ ì¬ì‚¬ìš© ë‹¨ìœ„ë¡œ ë¬¶ìŒ</span>
<span class="hljs-comment">// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="hljs-keyword">class</span> apb_agent <span class="hljs-keyword">extends</span> uvm_agent;
  `uvm_component_utils(apb_agent)

  apb_driver    driver;
  apb_monitor   monitor;
  uvm_sequencer <span class="hljs-variable">#(apb_seq_item)</span> sequencer;

  <span class="hljs-keyword">function</span> <span class="hljs-keyword">new</span>(<span class="hljs-keyword">string</span> name, uvm_component parent);
    <span class="hljs-keyword">super</span><span class="hljs-variable">.new</span>(name, parent);
  <span class="hljs-keyword">endfunction</span>

  <span class="hljs-keyword">function</span> <span class="hljs-keyword">void</span> build_phase(uvm_phase phase);
    <span class="hljs-keyword">super</span><span class="hljs-variable">.build_phase</span>(phase);

    <span class="hljs-comment">// Ch.7ì—ì„œ ë°°ìš´ íŒ¨í„´ê³¼ ë™ì¼!</span>
    monitor = apb_monitor::type_id::create(<span class="hljs-string">&quot;monitor&quot;</span>, <span class="hljs-keyword">this</span>);

    <span class="hljs-keyword">if</span> (get_is_active() == UVM_ACTIVE) <span class="hljs-keyword">begin</span>
      driver    = apb_driver::type_id::create(<span class="hljs-string">&quot;driver&quot;</span>, <span class="hljs-keyword">this</span>);
      sequencer = uvm_sequencer<span class="hljs-variable">#(apb_seq_item)::type_id::create(&quot;sequencer&quot;, this)</span>;
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">endfunction</span>

  <span class="hljs-keyword">function</span> <span class="hljs-keyword">void</span> connect_phase(uvm_phase phase);
    <span class="hljs-keyword">super</span><span class="hljs-variable">.connect_phase</span>(phase);

    <span class="hljs-keyword">if</span> (get_is_active() == UVM_ACTIVE) <span class="hljs-keyword">begin</span>
      driver<span class="hljs-variable">.seq_item_port</span><span class="hljs-variable">.connect</span>(sequencer<span class="hljs-variable">.seq_item_export</span>);
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">endfunction</span>
<span class="hljs-keyword">endclass</span>
</code></pre><p><strong>Ch.7ì˜ <code>counter_agent</code>ì™€ êµ¬ì¡°ê°€ ë™ì¼í•©ë‹ˆë‹¤.</strong> íƒ€ì…ë§Œ <code>counter_*</code> â†’ <code>apb_*</code>ë¡œ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.</p>
<h3 id="11-5-2-apb-envì™€-apb-base-test">11.5.2 apb_envì™€ apb_base_test</h3>
<pre><code class="hljs language-systemverilog"><span class="hljs-comment">// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="hljs-comment">// APB í™˜ê²½</span>
<span class="hljs-comment">// íŒŒì¼: apb_env.sv</span>
<span class="hljs-comment">// ì—­í• : APB ì—ì´ì „íŠ¸ì™€ ìŠ¤ì½”ì–´ë³´ë“œë¥¼ í¬í•¨í•˜ëŠ” ê²€ì¦ í™˜ê²½</span>
<span class="hljs-comment">// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="hljs-keyword">class</span> apb_env <span class="hljs-keyword">extends</span> uvm_env;
  `uvm_component_utils(apb_env)

  apb_agent      agent;
  apb_scoreboard scoreboard;

  <span class="hljs-keyword">function</span> <span class="hljs-keyword">new</span>(<span class="hljs-keyword">string</span> name, uvm_component parent);
    <span class="hljs-keyword">super</span><span class="hljs-variable">.new</span>(name, parent);
  <span class="hljs-keyword">endfunction</span>

  <span class="hljs-keyword">function</span> <span class="hljs-keyword">void</span> build_phase(uvm_phase phase);
    <span class="hljs-keyword">super</span><span class="hljs-variable">.build_phase</span>(phase);
    agent      = apb_agent::type_id::create(<span class="hljs-string">&quot;agent&quot;</span>, <span class="hljs-keyword">this</span>);
    scoreboard = apb_scoreboard::type_id::create(<span class="hljs-string">&quot;scoreboard&quot;</span>, <span class="hljs-keyword">this</span>);
  <span class="hljs-keyword">endfunction</span>

  <span class="hljs-keyword">function</span> <span class="hljs-keyword">void</span> connect_phase(uvm_phase phase);
    <span class="hljs-keyword">super</span><span class="hljs-variable">.connect_phase</span>(phase);
    <span class="hljs-comment">// ëª¨ë‹ˆí„°ì˜ analysis port â†’ ìŠ¤ì½”ì–´ë³´ë“œ</span>
    agent<span class="hljs-variable">.monitor</span><span class="hljs-variable">.ap</span><span class="hljs-variable">.connect</span>(scoreboard<span class="hljs-variable">.ap_imp</span>);
  <span class="hljs-keyword">endfunction</span>
<span class="hljs-keyword">endclass</span>
</code></pre><pre><code class="hljs language-systemverilog"><span class="hljs-comment">// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="hljs-comment">// APB Base Test</span>
<span class="hljs-comment">// íŒŒì¼: apb_base_test.sv</span>
<span class="hljs-comment">// ì—­í• : Ch.9ì—ì„œ ë°°ìš´ base_test íŒ¨í„´ â€” ê³µí†µ ì„¤ì • í¬í•¨</span>
<span class="hljs-comment">// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="hljs-keyword">class</span> apb_base_test <span class="hljs-keyword">extends</span> uvm_test;
  `uvm_component_utils(apb_base_test)

  apb_env env;
  <span class="hljs-keyword">virtual</span> apb_if vif;  <span class="hljs-comment">// ë¦¬ì…‹ ëŒ€ê¸°ì— ì‚¬ìš©</span>

  <span class="hljs-keyword">function</span> <span class="hljs-keyword">new</span>(<span class="hljs-keyword">string</span> name, uvm_component parent);
    <span class="hljs-keyword">super</span><span class="hljs-variable">.new</span>(name, parent);
  <span class="hljs-keyword">endfunction</span>

  <span class="hljs-keyword">function</span> <span class="hljs-keyword">void</span> build_phase(uvm_phase phase);
    <span class="hljs-keyword">super</span><span class="hljs-variable">.build_phase</span>(phase);
    env = apb_env::type_id::create(<span class="hljs-string">&quot;env&quot;</span>, <span class="hljs-keyword">this</span>);
    <span class="hljs-keyword">if</span> (!uvm_config_db<span class="hljs-variable">#(virtual apb_if)::get(this, &quot;&quot;, &quot;vif&quot;, vif))</span>
      `uvm_fatal(get_type_name(), <span class="hljs-string">&quot;config_db::get failed for &#x27;vif&#x27;&quot;</span>)
  <span class="hljs-keyword">endfunction</span>

  <span class="hljs-comment">// ë¦¬ì…‹ ëŒ€ê¸° â€” Ch.9ì—ì„œ ë°°ìš´ virtual task íŒ¨í„´</span>
  <span class="hljs-keyword">virtual</span> <span class="hljs-keyword">task</span> wait_for_reset();
    @(<span class="hljs-keyword">posedge</span> vif<span class="hljs-variable">.presetn</span>);
    `uvm_info(get_type_name(), <span class="hljs-string">&quot;ë¦¬ì…‹ í•´ì œ í™•ì¸&quot;</span>, UVM_LOW)
  <span class="hljs-keyword">endtask</span>
<span class="hljs-keyword">endclass</span>
</code></pre><h3 id="11-5-3-ì²«-apb-ì‹œë®¬ë ˆì´ì…˜-write-amp-read-í…ŒìŠ¤íŠ¸">11.5.3 ì²« APB ì‹œë®¬ë ˆì´ì…˜ â€” Write &amp; Read í…ŒìŠ¤íŠ¸</h3>
<pre><code class="hljs language-systemverilog"><span class="hljs-comment">// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="hljs-comment">// APB Write ì‹œí€€ìŠ¤</span>
<span class="hljs-comment">// íŒŒì¼: apb_sequences.sv</span>
<span class="hljs-comment">// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="hljs-keyword">class</span> apb_write_seq <span class="hljs-keyword">extends</span> uvm_sequence <span class="hljs-variable">#(apb_seq_item)</span>;
  `uvm_object_utils(apb_write_seq)

  <span class="hljs-comment">// ì™¸ë¶€ì—ì„œ ì„¤ì •í•  ì£¼ì†Œì™€ ë°ì´í„°</span>
  <span class="hljs-keyword">bit</span> [<span class="hljs-number">3</span>:<span class="hljs-number">0</span>] target_addr;
  <span class="hljs-keyword">bit</span> [<span class="hljs-number">7</span>:<span class="hljs-number">0</span>] target_data;

  <span class="hljs-keyword">function</span> <span class="hljs-keyword">new</span>(<span class="hljs-keyword">string</span> name = <span class="hljs-string">&quot;apb_write_seq&quot;</span>);
    <span class="hljs-keyword">super</span><span class="hljs-variable">.new</span>(name);
  <span class="hljs-keyword">endfunction</span>

  <span class="hljs-keyword">task</span> body();
    apb_seq_item item;
    item = apb_seq_item::type_id::create(<span class="hljs-string">&quot;item&quot;</span>);

    start_item(item);
    item<span class="hljs-variable">.write</span> = <span class="hljs-number">1</span>;
    item<span class="hljs-variable">.addr</span>  = target_addr;
    item<span class="hljs-variable">.wdata</span> = target_data;
    finish_item(item);

    `uvm_info(get_type_name(),
      <span class="hljs-built_in">$sformatf</span>(<span class="hljs-string">&quot;Write ì™„ë£Œ: addr=0x%0h, data=0x%0h&quot;</span>,
                target_addr, target_data), UVM_LOW)
  <span class="hljs-keyword">endtask</span>
<span class="hljs-keyword">endclass</span>

<span class="hljs-comment">// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="hljs-comment">// APB Read ì‹œí€€ìŠ¤</span>
<span class="hljs-comment">// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="hljs-keyword">class</span> apb_read_seq <span class="hljs-keyword">extends</span> uvm_sequence <span class="hljs-variable">#(apb_seq_item)</span>;
  `uvm_object_utils(apb_read_seq)

  <span class="hljs-keyword">bit</span> [<span class="hljs-number">3</span>:<span class="hljs-number">0</span>] target_addr;
  <span class="hljs-keyword">bit</span> [<span class="hljs-number">7</span>:<span class="hljs-number">0</span>] read_data;  <span class="hljs-comment">// ê²°ê³¼ ì €ì¥</span>

  <span class="hljs-keyword">function</span> <span class="hljs-keyword">new</span>(<span class="hljs-keyword">string</span> name = <span class="hljs-string">&quot;apb_read_seq&quot;</span>);
    <span class="hljs-keyword">super</span><span class="hljs-variable">.new</span>(name);
  <span class="hljs-keyword">endfunction</span>

  <span class="hljs-keyword">task</span> body();
    apb_seq_item item;
    item = apb_seq_item::type_id::create(<span class="hljs-string">&quot;item&quot;</span>);

    start_item(item);
    item<span class="hljs-variable">.write</span> = <span class="hljs-number">0</span>;
    item<span class="hljs-variable">.addr</span>  = target_addr;
    finish_item(item);

    read_data = item<span class="hljs-variable">.rdata</span>;  <span class="hljs-comment">// ë“œë¼ì´ë²„ê°€ ì±„ìš´ ì‘ë‹µ</span>

    `uvm_info(get_type_name(),
      <span class="hljs-built_in">$sformatf</span>(<span class="hljs-string">&quot;Read ì™„ë£Œ: addr=0x%0h, data=0x%0h&quot;</span>,
                target_addr, read_data), UVM_LOW)
  <span class="hljs-keyword">endtask</span>
<span class="hljs-keyword">endclass</span>

<span class="hljs-comment">// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="hljs-comment">// APB Write-then-Read ì‹œí€€ìŠ¤</span>
<span class="hljs-comment">// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="hljs-keyword">class</span> apb_write_read_seq <span class="hljs-keyword">extends</span> uvm_sequence <span class="hljs-variable">#(apb_seq_item)</span>;
  `uvm_object_utils(apb_write_read_seq)

  <span class="hljs-keyword">function</span> <span class="hljs-keyword">new</span>(<span class="hljs-keyword">string</span> name = <span class="hljs-string">&quot;apb_write_read_seq&quot;</span>);
    <span class="hljs-keyword">super</span><span class="hljs-variable">.new</span>(name);
  <span class="hljs-keyword">endfunction</span>

  <span class="hljs-keyword">task</span> body();
    apb_write_seq wr_seq;
    apb_read_seq  rd_seq;

    <span class="hljs-comment">// ì£¼ì†Œ 0x3ì— 0xAB ì“°ê¸°</span>
    wr_seq = apb_write_seq::type_id::create(<span class="hljs-string">&quot;wr_seq&quot;</span>);
    wr_seq<span class="hljs-variable">.target_addr</span> = <span class="hljs-number">4&#x27;h3</span>;
    wr_seq<span class="hljs-variable">.target_data</span> = <span class="hljs-number">8&#x27;hAB</span>;
    wr_seq<span class="hljs-variable">.start</span>(m_sequencer);

    <span class="hljs-comment">// ê°™ì€ ì£¼ì†Œì—ì„œ ì½ê¸°</span>
    rd_seq = apb_read_seq::type_id::create(<span class="hljs-string">&quot;rd_seq&quot;</span>);
    rd_seq<span class="hljs-variable">.target_addr</span> = <span class="hljs-number">4&#x27;h3</span>;
    rd_seq<span class="hljs-variable">.start</span>(m_sequencer);

    <span class="hljs-comment">// ê²€ì¦: ì“´ ê°’ê³¼ ì½ì€ ê°’ì´ ê°™ì•„ì•¼ í•¨</span>
    <span class="hljs-keyword">if</span> (rd_seq<span class="hljs-variable">.read_data</span> === <span class="hljs-number">8&#x27;hAB</span>)
      `uvm_info(get_type_name(), <span class="hljs-string">&quot;Write-Read ì¼ì¹˜! âœ“&quot;</span>, UVM_LOW)
    <span class="hljs-keyword">else</span>
      `uvm_error(get_type_name(),
        <span class="hljs-built_in">$sformatf</span>(<span class="hljs-string">&quot;Write-Read ë¶ˆì¼ì¹˜! wrote=0xAB, read=0x%0h&quot;</span>,
                  rd_seq<span class="hljs-variable">.read_data</span>))
  <span class="hljs-keyword">endtask</span>
<span class="hljs-keyword">endclass</span>
</code></pre><pre><code class="hljs language-systemverilog"><span class="hljs-comment">// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="hljs-comment">// ì²« APB í…ŒìŠ¤íŠ¸</span>
<span class="hljs-comment">// íŒŒì¼: apb_write_read_test.sv</span>
<span class="hljs-comment">// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="hljs-keyword">class</span> apb_write_read_test <span class="hljs-keyword">extends</span> apb_base_test;
  `uvm_component_utils(apb_write_read_test)

  <span class="hljs-keyword">function</span> <span class="hljs-keyword">new</span>(<span class="hljs-keyword">string</span> name, uvm_component parent);
    <span class="hljs-keyword">super</span><span class="hljs-variable">.new</span>(name, parent);
  <span class="hljs-keyword">endfunction</span>

  <span class="hljs-keyword">task</span> run_phase(uvm_phase phase);
    apb_write_read_seq seq;

    phase<span class="hljs-variable">.raise_objection</span>(<span class="hljs-keyword">this</span>);

    `uvm_info(get_type_name(), <span class="hljs-string">&quot;=== APB Write-Read í…ŒìŠ¤íŠ¸ ì‹œì‘ ===&quot;</span>, UVM_NONE)

    seq = apb_write_read_seq::type_id::create(<span class="hljs-string">&quot;seq&quot;</span>);
    seq<span class="hljs-variable">.start</span>(env<span class="hljs-variable">.agent</span><span class="hljs-variable">.sequencer</span>);

    #<span class="hljs-number">100</span>;  <span class="hljs-comment">// ì¶”ê°€ ëŒ€ê¸°</span>

    `uvm_info(get_type_name(), <span class="hljs-string">&quot;=== APB Write-Read í…ŒìŠ¤íŠ¸ ì™„ë£Œ ===&quot;</span>, UVM_NONE)

    phase<span class="hljs-variable">.drop_objection</span>(<span class="hljs-keyword">this</span>);
  <span class="hljs-keyword">endtask</span>
<span class="hljs-keyword">endclass</span>
</code></pre><p>ì‹¤í–‰ ê²°ê³¼:</p>
<pre><code># ì‹¤í–‰ ëª…ë ¹
vsim +UVM_TESTNAME=apb_write_read_test

UVM_INFO @ 0ns: reporter [RNTST] Running test apb_write_read_test...
UVM_INFO @ 20ns: uvm_test_top [apb_write_read_test] === APB Write-Read í…ŒìŠ¤íŠ¸ ì‹œì‘ ===
UVM_INFO @ 20ns: uvm_test_top.env.agent.driver [apb_driver] ë¦¬ì…‹ í•´ì œ ê°ì§€, ë“œë¼ì´ë¹™ ì‹œì‘
UVM_INFO @ 40ns: uvm_test_top.env.agent.driver [apb_driver]
  ì „ì†¡ ì™„ë£Œ: APB WRITE: addr=0x3, wdata=0xAB
UVM_INFO @ 40ns: uvm_test_top [apb_write_seq] Write ì™„ë£Œ: addr=0x3, data=0xAB
UVM_INFO @ 70ns: uvm_test_top.env.agent.driver [apb_driver]
  ì „ì†¡ ì™„ë£Œ: APB READ:  addr=0x3, rdata=0xAB
UVM_INFO @ 70ns: uvm_test_top [apb_read_seq] Read ì™„ë£Œ: addr=0x3, data=0xAB
UVM_INFO @ 70ns: uvm_test_top [apb_write_read_seq] Write-Read ì¼ì¹˜! âœ“
UVM_INFO @ 170ns: uvm_test_top [apb_write_read_test] === APB Write-Read í…ŒìŠ¤íŠ¸ ì™„ë£Œ ===

--- UVM Report Summary ---
UVM_INFO :   8
UVM_WARNING :   0
UVM_ERROR :   0
UVM_FATAL :   0
</code></pre><hr>
<h2 id="11-6-ì‹¤ì „-apb-write-read-ê²€ì¦">11.6 ì‹¤ì „: APB Write/Read ê²€ì¦</h2>
<blockquote>
<p><strong>ì´ ì ˆì˜ ëª©í‘œ</strong>: APB ìŠ¤ì½”ì–´ë³´ë“œë¡œ ìë™ ê²€ì¦ì„ êµ¬í˜„í•˜ê³ , Part 2 â†’ Part 3 êµ¬ì¡° ë¹„êµë¥¼ í†µí•´ í•™ìŠµì„ ì •ë¦¬í•©ë‹ˆë‹¤.</p>
</blockquote>
<h3 id="11-6-1-apb-ì‹œí€€ìŠ¤-ë‹¤ì–‘í•œ-ì‹œë‚˜ë¦¬ì˜¤">11.6.1 APB ì‹œí€€ìŠ¤ â€” ë‹¤ì–‘í•œ ì‹œë‚˜ë¦¬ì˜¤</h3>
<pre><code class="hljs language-systemverilog"><span class="hljs-comment">// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="hljs-comment">// APB ì¢…í•© ì‹œí€€ìŠ¤ â€” ì˜ˆì œ 11-1</span>
<span class="hljs-comment">// íŒŒì¼: apb_full_test_seq.sv</span>
<span class="hljs-comment">// ì—­í• : ëª¨ë“  ë ˆì§€ìŠ¤í„°ì— Write â†’ Read â†’ ë¹„êµ</span>
<span class="hljs-comment">// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="hljs-keyword">class</span> apb_full_test_seq <span class="hljs-keyword">extends</span> uvm_sequence <span class="hljs-variable">#(apb_seq_item)</span>;
  `uvm_object_utils(apb_full_test_seq)

  <span class="hljs-keyword">function</span> <span class="hljs-keyword">new</span>(<span class="hljs-keyword">string</span> name = <span class="hljs-string">&quot;apb_full_test_seq&quot;</span>);
    <span class="hljs-keyword">super</span><span class="hljs-variable">.new</span>(name);
  <span class="hljs-keyword">endfunction</span>

  <span class="hljs-keyword">task</span> body();
    apb_write_seq wr_seq;
    apb_read_seq  rd_seq;

    `uvm_info(get_type_name(),
      <span class="hljs-string">&quot;=== ì „ì²´ ë ˆì§€ìŠ¤í„° Write/Read í…ŒìŠ¤íŠ¸ ì‹œì‘ ===&quot;</span>, UVM_NONE)

    <span class="hljs-comment">// 16ê°œ ë ˆì§€ìŠ¤í„°ì— ìˆœì°¨ ì“°ê¸°</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">16</span>; i++) <span class="hljs-keyword">begin</span>
      wr_seq = apb_write_seq::type_id::create(<span class="hljs-built_in">$sformatf</span>(<span class="hljs-string">&quot;wr_%0d&quot;</span>, i));
      wr_seq<span class="hljs-variable">.target_addr</span> = i[<span class="hljs-number">3</span>:<span class="hljs-number">0</span>];
      wr_seq<span class="hljs-variable">.target_data</span> = i[<span class="hljs-number">7</span>:<span class="hljs-number">0</span>] * <span class="hljs-number">8&#x27;h10</span> + <span class="hljs-number">8&#x27;h01</span>;  <span class="hljs-comment">// 0x01, 0x11, 0x21, ...</span>
      wr_seq<span class="hljs-variable">.start</span>(m_sequencer);
    <span class="hljs-keyword">end</span>

    <span class="hljs-comment">// 16ê°œ ë ˆì§€ìŠ¤í„°ì—ì„œ ìˆœì°¨ ì½ê¸° &amp; ê²€ì¦</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">16</span>; i++) <span class="hljs-keyword">begin</span>
      rd_seq = apb_read_seq::type_id::create(<span class="hljs-built_in">$sformatf</span>(<span class="hljs-string">&quot;rd_%0d&quot;</span>, i));
      rd_seq<span class="hljs-variable">.target_addr</span> = i[<span class="hljs-number">3</span>:<span class="hljs-number">0</span>];
      rd_seq<span class="hljs-variable">.start</span>(m_sequencer);
    <span class="hljs-keyword">end</span>

    `uvm_info(get_type_name(),
      <span class="hljs-string">&quot;=== ì „ì²´ ë ˆì§€ìŠ¤í„° Write/Read í…ŒìŠ¤íŠ¸ ì™„ë£Œ ===&quot;</span>, UVM_NONE)
  <span class="hljs-keyword">endtask</span>
<span class="hljs-keyword">endclass</span>
</code></pre><h3 id="11-6-2-apb-ìŠ¤ì½”ì–´ë³´ë“œ-ë©”ëª¨ë¦¬-ëª¨ë¸-ê¸°ë°˜-ë¹„êµ">11.6.2 APB ìŠ¤ì½”ì–´ë³´ë“œ â€” ë©”ëª¨ë¦¬ ëª¨ë¸ ê¸°ë°˜ ë¹„êµ</h3>
<pre><code class="hljs language-systemverilog"><span class="hljs-comment">// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="hljs-comment">// APB Scoreboard</span>
<span class="hljs-comment">// íŒŒì¼: apb_scoreboard.sv</span>
<span class="hljs-comment">// ì—­í• : ë‚´ë¶€ ë©”ëª¨ë¦¬ ëª¨ë¸ë¡œ DUT ë™ì‘ì„ ì˜ˆì¸¡í•˜ê³  ë¹„êµ</span>
<span class="hljs-comment">// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€</span>
<span class="hljs-keyword">class</span> apb_scoreboard <span class="hljs-keyword">extends</span> uvm_scoreboard;
  `uvm_component_utils(apb_scoreboard)

  <span class="hljs-comment">// analysis implementation port (Ch.8 íŒ¨í„´)</span>
  uvm_analysis_imp <span class="hljs-variable">#(apb_seq_item, apb_scoreboard)</span> ap_imp;

  <span class="hljs-comment">// â”€â”€ Reference Model: ë‚´ë¶€ ë©”ëª¨ë¦¬ â”€â”€</span>
  <span class="hljs-keyword">logic</span> [<span class="hljs-number">7</span>:<span class="hljs-number">0</span>] ref_mem [<span class="hljs-number">0</span>:<span class="hljs-number">15</span>];

  <span class="hljs-keyword">int</span> write_count;
  <span class="hljs-keyword">int</span> read_count;
  <span class="hljs-keyword">int</span> match_count;
  <span class="hljs-keyword">int</span> error_count;

  <span class="hljs-keyword">function</span> <span class="hljs-keyword">new</span>(<span class="hljs-keyword">string</span> name, uvm_component parent);
    <span class="hljs-keyword">super</span><span class="hljs-variable">.new</span>(name, parent);
  <span class="hljs-keyword">endfunction</span>

  <span class="hljs-keyword">function</span> <span class="hljs-keyword">void</span> build_phase(uvm_phase phase);
    <span class="hljs-keyword">super</span><span class="hljs-variable">.build_phase</span>(phase);
    ap_imp = <span class="hljs-keyword">new</span>(<span class="hljs-string">&quot;ap_imp&quot;</span>, <span class="hljs-keyword">this</span>);

    <span class="hljs-comment">// ë©”ëª¨ë¦¬ ì´ˆê¸°í™”</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">16</span>; i++)
      ref_mem[i] = <span class="hljs-number">8&#x27;h0</span>;
  <span class="hljs-keyword">endfunction</span>

  <span class="hljs-comment">// â”€â”€ íŠ¸ëœì­ì…˜ ìˆ˜ì‹  ì‹œ í˜¸ì¶œ â”€â”€</span>
  <span class="hljs-keyword">function</span> <span class="hljs-keyword">void</span> write(apb_seq_item item);
    <span class="hljs-keyword">if</span> (item<span class="hljs-variable">.write</span>) <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">// Write: Reference Model ì—…ë°ì´íŠ¸</span>
      ref_mem[item<span class="hljs-variable">.addr</span>] = item<span class="hljs-variable">.wdata</span>;
      write_count++;

      `uvm_info(get_type_name(),
        <span class="hljs-built_in">$sformatf</span>(<span class="hljs-string">&quot;WRITE: addr=0x%0h, data=0x%0h â†’ ref_mem ì—…ë°ì´íŠ¸&quot;</span>,
                  item<span class="hljs-variable">.addr</span>, item<span class="hljs-variable">.wdata</span>), UVM_HIGH)
    <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">// Read: Reference Modelê³¼ ë¹„êµ</span>
      <span class="hljs-keyword">logic</span> [<span class="hljs-number">7</span>:<span class="hljs-number">0</span>] expected = ref_mem[item<span class="hljs-variable">.addr</span>];
      read_count++;

      <span class="hljs-keyword">if</span> (expected === item<span class="hljs-variable">.rdata</span>) <span class="hljs-keyword">begin</span>
        match_count++;
        `uvm_info(get_type_name(),
          <span class="hljs-built_in">$sformatf</span>(<span class="hljs-string">&quot;READ MATCH: addr=0x%0h, expected=0x%0h, actual=0x%0h âœ“&quot;</span>,
                    item<span class="hljs-variable">.addr</span>, expected, item<span class="hljs-variable">.rdata</span>), UVM_MEDIUM)
      <span class="hljs-keyword">end</span>
      <span class="hljs-keyword">else</span> <span class="hljs-keyword">begin</span>
        error_count++;
        `uvm_error(get_type_name(),
          <span class="hljs-built_in">$sformatf</span>(<span class="hljs-string">&quot;READ MISMATCH: addr=0x%0h, expected=0x%0h, actual=0x%0h&quot;</span>,
                    item<span class="hljs-variable">.addr</span>, expected, item<span class="hljs-variable">.rdata</span>))
      <span class="hljs-keyword">end</span>
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">endfunction</span>

  <span class="hljs-comment">// â”€â”€ ê²°ê³¼ ë³´ê³  (Ch.8 íŒ¨í„´) â”€â”€</span>
  <span class="hljs-keyword">function</span> <span class="hljs-keyword">void</span> report_phase(uvm_phase phase);
    `uvm_info(get_type_name(),
      <span class="hljs-built_in">$sformatf</span>(<span class="hljs-string">&quot;\n=== APB Scoreboard ê²°ê³¼ ===\n  Write: %0dê±´\n  Read:  %0dê±´ (Match: %0d, Error: %0d)\n  ê²°ê³¼: %s&quot;</span>,
                write_count, read_count, match_count, error_count,
                (error_count == <span class="hljs-number">0</span>) ? <span class="hljs-string">&quot;PASS âœ“&quot;</span> : <span class="hljs-string">&quot;FAIL âœ—&quot;</span>), UVM_NONE)
  <span class="hljs-keyword">endfunction</span>
<span class="hljs-keyword">endclass</span>
</code></pre><p><strong>Ch.8ì˜ <code>counter_scoreboard</code>ì™€ ë¹„êµ:</strong></p>
<table>
<thead>
<tr>
<th>ìš”ì†Œ</th>
<th><code>counter_scoreboard</code></th>
<th><code>apb_scoreboard</code></th>
</tr>
</thead>
<tbody><tr>
<td><strong>Reference Model</strong></td>
<td><code>predict(rst_n, enable, count)</code></td>
<td><code>ref_mem[addr]</code> ë°°ì—´</td>
</tr>
<tr>
<td><strong>ë¹„êµ ì‹œì </strong></td>
<td>ë§¤ íŠ¸ëœì­ì…˜</td>
<td>Read íŠ¸ëœì­ì…˜ë§Œ</td>
</tr>
<tr>
<td><strong>ì˜ˆì¸¡ ë°©ì‹</strong></td>
<td>ì¹´ìš´í„° ë™ì‘ ì‹œë®¬ë ˆì´ì…˜</td>
<td>Write ì‹œ ë©”ëª¨ë¦¬ ì—…ë°ì´íŠ¸, Read ì‹œ ë¹„êµ</td>
</tr>
<tr>
<td><strong>UVM íŒ¨í„´</strong></td>
<td><code>uvm_analysis_imp</code> + <code>write()</code></td>
<td><strong>ë™ì¼</strong></td>
</tr>
</tbody></table>
<h3 id="11-6-3-ì‹¤í–‰-ê²°ê³¼ì™€-ì»¤ë²„ë¦¬ì§€-í™•ì¸">11.6.3 ì‹¤í–‰ ê²°ê³¼ì™€ ì»¤ë²„ë¦¬ì§€ í™•ì¸</h3>
<pre><code># ì „ì²´ ë ˆì§€ìŠ¤í„° í…ŒìŠ¤íŠ¸ ì‹¤í–‰
vsim +UVM_TESTNAME=apb_full_test

UVM_INFO @ 0ns: reporter [RNTST] Running test apb_full_test...
UVM_INFO @ 20ns: uvm_test_top [apb_full_test] === ì „ì²´ ë ˆì§€ìŠ¤í„° Write/Read ì‹œì‘ ===

UVM_INFO @ 40ns: ... APB WRITE: addr=0x0, wdata=0x01
UVM_INFO @ 70ns: ... APB WRITE: addr=0x1, wdata=0x11
...
UVM_INFO @ 510ns: ... APB WRITE: addr=0xF, wdata=0xF1

UVM_INFO @ 540ns: ... APB READ: addr=0x0, rdata=0x01 âœ“ MATCH
UVM_INFO @ 570ns: ... APB READ: addr=0x1, rdata=0x11 âœ“ MATCH
...
UVM_INFO @ 1010ns: ... APB READ: addr=0xF, rdata=0xF1 âœ“ MATCH

=== APB Scoreboard ê²°ê³¼ ===
  Write: 16ê±´
  Read:  16ê±´ (Match: 16, Error: 0)
  ê²°ê³¼: PASS âœ“
</code></pre><h3 id="11-6-4-part-2-part-3-êµ¬ì¡°-ë¹„êµí‘œ">11.6.4 Part 2 â†’ Part 3 êµ¬ì¡° ë¹„êµí‘œ</h3>

<div style="text-align:center;margin:2rem 0">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 700 560" style="max-width:700px;width:100%;height:auto">
  <defs>
    <filter id="sh11c" x="-3%" y="-4%" width="106%" height="112%">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-opacity="0.10"/>
    </filter>
    <marker id="arr11" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0,8 3,0 6" fill="#94a3b8"/>
    </marker>
  </defs>

  <!-- Title -->
  <rect x="170" y="6" width="360" height="34" rx="17" fill="#1e293b"/>
  <text x="350" y="29" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="15" font-weight="bold" fill="#fff">Part 2 â†’ Part 3 êµ¬ì¡° ë¹„êµ</text>

  <!-- Part 2 Column Header -->
  <rect x="35" y="55" width="270" height="30" rx="8" fill="#16a34a"/>
  <text x="170" y="75" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="13" font-weight="bold" fill="#fff">Part 2 (4ë¹„íŠ¸ ì¹´ìš´í„°)</text>

  <!-- Part 3 Column Header -->
  <rect x="395" y="55" width="270" height="30" rx="8" fill="#7c3aed"/>
  <text x="530" y="75" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="13" font-weight="bold" fill="#fff">Part 3 (APB Slave)</text>

  <!-- Row 1: Test -->
  <rect x="45" y="100" width="250" height="36" rx="8" fill="#f0fdf4" stroke="#16a34a" stroke-width="1.5" filter="url(#sh11c)"/>
  <text x="170" y="123" text-anchor="middle" font-family="'Fira Code',monospace" font-size="12" font-weight="bold" fill="#166534">counter_test</text>
  <rect x="405" y="100" width="250" height="36" rx="8" fill="#f5f3ff" stroke="#7c3aed" stroke-width="1.5" filter="url(#sh11c)"/>
  <text x="530" y="123" text-anchor="middle" font-family="'Fira Code',monospace" font-size="12" font-weight="bold" fill="#5b21b6">apb_write_read_test</text>
  <line x1="295" y1="118" x2="405" y2="118" stroke="#94a3b8" stroke-width="1.5" stroke-dasharray="5,3" marker-end="url(#arr11)"/>

  <!-- Arrow down -->
  <line x1="170" y1="136" x2="170" y2="154" stroke="#16a34a" stroke-width="1.5"/>
  <line x1="530" y1="136" x2="530" y2="154" stroke="#7c3aed" stroke-width="1.5"/>

  <!-- Row 2: Env -->
  <rect x="45" y="157" width="250" height="36" rx="8" fill="#f0fdf4" stroke="#16a34a" stroke-width="1.5" filter="url(#sh11c)"/>
  <text x="170" y="180" text-anchor="middle" font-family="'Fira Code',monospace" font-size="12" font-weight="bold" fill="#166534">counter_env</text>
  <rect x="405" y="157" width="250" height="36" rx="8" fill="#f5f3ff" stroke="#7c3aed" stroke-width="1.5" filter="url(#sh11c)"/>
  <text x="530" y="180" text-anchor="middle" font-family="'Fira Code',monospace" font-size="12" font-weight="bold" fill="#5b21b6">apb_env</text>
  <line x1="295" y1="175" x2="405" y2="175" stroke="#94a3b8" stroke-width="1.5" stroke-dasharray="5,3" marker-end="url(#arr11)"/>

  <!-- Arrow down -->
  <line x1="170" y1="193" x2="170" y2="211" stroke="#16a34a" stroke-width="1.5"/>
  <line x1="530" y1="193" x2="530" y2="211" stroke="#7c3aed" stroke-width="1.5"/>

  <!-- Row 3: Agent -->
  <rect x="45" y="214" width="250" height="36" rx="8" fill="#f0fdf4" stroke="#16a34a" stroke-width="1.5" filter="url(#sh11c)"/>
  <text x="170" y="237" text-anchor="middle" font-family="'Fira Code',monospace" font-size="12" font-weight="bold" fill="#166534">counter_agent</text>
  <rect x="405" y="214" width="250" height="36" rx="8" fill="#f5f3ff" stroke="#7c3aed" stroke-width="1.5" filter="url(#sh11c)"/>
  <text x="530" y="237" text-anchor="middle" font-family="'Fira Code',monospace" font-size="12" font-weight="bold" fill="#5b21b6">apb_agent</text>
  <line x1="295" y1="232" x2="405" y2="232" stroke="#94a3b8" stroke-width="1.5" stroke-dasharray="5,3" marker-end="url(#arr11)"/>

  <!-- Agent sub-components (Part 2) â€” 3 boxes evenly spaced within 250px -->
  <!-- Branch line from agent center down, then horizontal to each child -->
  <line x1="170" y1="250" x2="170" y2="264" stroke="#16a34a" stroke-width="1"/>
  <line x1="86" y1="264" x2="254" y2="264" stroke="#16a34a" stroke-width="1"/>
  <line x1="86" y1="264" x2="86" y2="274" stroke="#16a34a" stroke-width="1"/>
  <line x1="170" y1="264" x2="170" y2="274" stroke="#16a34a" stroke-width="1"/>
  <line x1="254" y1="264" x2="254" y2="274" stroke="#16a34a" stroke-width="1"/>
  <rect x="50" y="276" width="72" height="24" rx="5" fill="#dcfce7" stroke="#86efac" stroke-width="1"/>
  <text x="86" y="292" text-anchor="middle" font-family="'Fira Code',monospace" font-size="9" fill="#166534">driver</text>
  <rect x="134" y="276" width="72" height="24" rx="5" fill="#dcfce7" stroke="#86efac" stroke-width="1"/>
  <text x="170" y="292" text-anchor="middle" font-family="'Fira Code',monospace" font-size="9" fill="#166534">monitor</text>
  <rect x="218" y="276" width="72" height="24" rx="5" fill="#dcfce7" stroke="#86efac" stroke-width="1"/>
  <text x="254" y="292" text-anchor="middle" font-family="'Fira Code',monospace" font-size="9" fill="#166534">sequencer</text>

  <!-- Agent sub-components (Part 3) â€” 3 boxes evenly spaced within 250px -->
  <line x1="530" y1="250" x2="530" y2="264" stroke="#7c3aed" stroke-width="1"/>
  <line x1="446" y1="264" x2="614" y2="264" stroke="#7c3aed" stroke-width="1"/>
  <line x1="446" y1="264" x2="446" y2="274" stroke="#7c3aed" stroke-width="1"/>
  <line x1="530" y1="264" x2="530" y2="274" stroke="#7c3aed" stroke-width="1"/>
  <line x1="614" y1="264" x2="614" y2="274" stroke="#7c3aed" stroke-width="1"/>
  <rect x="410" y="276" width="72" height="24" rx="5" fill="#ede9fe" stroke="#c4b5fd" stroke-width="1"/>
  <text x="446" y="292" text-anchor="middle" font-family="'Fira Code',monospace" font-size="9" fill="#5b21b6">driver</text>
  <rect x="494" y="276" width="72" height="24" rx="5" fill="#ede9fe" stroke="#c4b5fd" stroke-width="1"/>
  <text x="530" y="292" text-anchor="middle" font-family="'Fira Code',monospace" font-size="9" fill="#5b21b6">monitor</text>
  <rect x="578" y="276" width="72" height="24" rx="5" fill="#ede9fe" stroke="#c4b5fd" stroke-width="1"/>
  <text x="614" y="292" text-anchor="middle" font-family="'Fira Code',monospace" font-size="9" fill="#5b21b6">sequencer</text>

  <!-- Row 4: Scoreboard -->
  <rect x="45" y="318" width="250" height="44" rx="8" fill="#f0fdf4" stroke="#16a34a" stroke-width="1.5" filter="url(#sh11c)"/>
  <text x="170" y="336" text-anchor="middle" font-family="'Fira Code',monospace" font-size="12" font-weight="bold" fill="#166534">counter_scoreboard</text>
  <text x="170" y="353" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="10" fill="#4ade80">predict() í•¨ìˆ˜</text>
  <rect x="405" y="318" width="250" height="44" rx="8" fill="#f5f3ff" stroke="#7c3aed" stroke-width="1.5" filter="url(#sh11c)"/>
  <text x="530" y="336" text-anchor="middle" font-family="'Fira Code',monospace" font-size="12" font-weight="bold" fill="#5b21b6">apb_scoreboard</text>
  <text x="530" y="353" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="10" fill="#a78bfa">ref_mem[] ë°°ì—´</text>
  <line x1="295" y1="340" x2="405" y2="340" stroke="#94a3b8" stroke-width="1.5" stroke-dasharray="5,3" marker-end="url(#arr11)"/>

  <!-- Row 5: Interface -->
  <rect x="45" y="380" width="250" height="52" rx="8" fill="#f0fdf4" stroke="#16a34a" stroke-width="1.5" filter="url(#sh11c)"/>
  <text x="170" y="400" text-anchor="middle" font-family="'Fira Code',monospace" font-size="12" font-weight="bold" fill="#166534">counter_if</text>
  <text x="170" y="418" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="10" fill="#4ade80">3 ì‹ í˜¸ Â· ì§ì ‘ ì ‘ê·¼</text>
  <rect x="405" y="380" width="250" height="52" rx="8" fill="#f5f3ff" stroke="#7c3aed" stroke-width="1.5" filter="url(#sh11c)"/>
  <text x="530" y="396" text-anchor="middle" font-family="'Fira Code',monospace" font-size="12" font-weight="bold" fill="#5b21b6">apb_if</text>
  <text x="530" y="412" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="10" fill="#a78bfa">9 ì‹ í˜¸ Â· clocking block</text>
  <text x="530" y="426" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="10" fill="#a78bfa">modport</text>
  <line x1="295" y1="406" x2="405" y2="406" stroke="#94a3b8" stroke-width="1.5" stroke-dasharray="5,3" marker-end="url(#arr11)"/>

  <!-- Bottom banner: UVM Structure Same -->
  <rect x="60" y="455" width="580" height="40" rx="10" fill="#fef3c7" stroke="#f59e0b" stroke-width="2"/>
  <text x="350" y="480" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="14" font-weight="bold" fill="#92400e">UVM êµ¬ì¡°: ë™ì¼ â€” ë°”ë€ ê²ƒ: ì¸í„°í˜ì´ìŠ¤ + í”„ë¡œí† ì½œ ë¡œì§ë§Œ</text>

  <!-- Center column: equals signs between rows -->
  <text x="350" y="123" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="16" font-weight="bold" fill="#f59e0b">=</text>
  <text x="350" y="180" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="16" font-weight="bold" fill="#f59e0b">=</text>
  <text x="350" y="237" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="16" font-weight="bold" fill="#f59e0b">=</text>
  <text x="350" y="345" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="16" font-weight="bold" fill="#f59e0b">=</text>

  <!-- Bottom note -->
  <text x="350" y="530" text-anchor="middle" font-family="'Noto Sans KR',sans-serif" font-size="11" fill="#94a3b8">Part 2ì—ì„œ ë°°ìš´ UVM êµ¬ì¡°ê°€ Part 3ì— ê·¸ëŒ€ë¡œ ì ìš©ë©ë‹ˆë‹¤</text>

</svg>
</div><blockquote>
<p>ğŸ’¡ <strong>í•µì‹¬ êµí›ˆ</strong>: Part 2ì—ì„œ 6ê°œ ì±•í„°ì— ê±¸ì³ ë°°ìš´ UVM êµ¬ì¡°(test â†’ env â†’ agent â†’ scoreboard)ê°€ Part 3ì—ì„œ <strong>ê·¸ëŒ€ë¡œ</strong> ì ìš©ë©ë‹ˆë‹¤. ìƒˆë¡œ ë°°ì›Œì•¼ í•  ê²ƒì€ í”„ë¡œí† ì½œ ì¸í„°í˜ì´ìŠ¤ì™€ BFM ë¡œì§ë¿ì…ë‹ˆë‹¤. ì´ê²ƒì´ UVM ì¬ì‚¬ìš©ì„±ì˜ ê°€ì¹˜ì…ë‹ˆë‹¤.</p>
</blockquote>
<hr>
<h2 id="11-7-ì²´í¬í¬ì¸íŠ¸">11.7 ì²´í¬í¬ì¸íŠ¸</h2>
<blockquote>
<p><strong>ì´ ì ˆì˜ ëª©í‘œ</strong>: ì´ ì±•í„°ì˜ í•µì‹¬ ê°œë…ì„ í™•ì¸í•©ë‹ˆë‹¤.</p>
</blockquote>
<h3 id="11-7-1-ì…€í”„-ì²´í¬">11.7.1 ì…€í”„ ì²´í¬</h3>
<p>ë‹¤ìŒ ì§ˆë¬¸ì— ë‹µí•  ìˆ˜ ìˆìœ¼ë©´ ì´ ì±•í„°ì˜ í•µì‹¬ì„ ì´í•´í•œ ê²ƒì…ë‹ˆë‹¤:</p>
<p><strong>1. Clocking blockì„ ì‚¬ìš©í•˜ëŠ” ê°€ì¥ í° ì¥ì ì€?</strong> (11.2)</p>
<details>
<summary>ì •ë‹µ í™•ì¸</summary>
íƒ€ì´ë° ì•ˆì „í•œ ì‹ í˜¸ ì ‘ê·¼ì„ ë³´ì¥í•©ë‹ˆë‹¤. `@(posedge clk)` ëŒ€ì‹  `@(vif.drv_cb)`ë¡œ ë™ê¸°í™”í•˜ë©´, ì‹ í˜¸ì˜ ì…‹ì—…/í™€ë“œ íƒ€ì´ë°ì„ clocking blockì´ ìë™ìœ¼ë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤. ë˜í•œ `input`/`output` ë°©í–¥ì„ ëª…ì‹œí•˜ì—¬ ë“œë¼ì´ë²„ê°€ ì½ê¸° ì „ìš© ì‹ í˜¸ë¥¼ êµ¬ë™í•˜ëŠ” ì‹¤ìˆ˜ë¥¼ ë°©ì§€í•©ë‹ˆë‹¤.
</details>

<p><strong>2. Modportì˜ ì—­í• ì€?</strong> (11.2)</p>
<details>
<summary>ì •ë‹µ í™•ì¸</summary>
ì¸í„°í˜ì´ìŠ¤ ì‚¬ìš©ìë³„ë¡œ ì ‘ê·¼ ê¶Œí•œì„ ë¶„ë¦¬í•©ë‹ˆë‹¤. `modport driver`ëŠ” `drv_cb` clocking blockë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆê³ , `modport monitor`ëŠ” `mon_cb`ë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ëª¨ë‹ˆí„°ê°€ ì‹¤ìˆ˜ë¡œ ì‹ í˜¸ë¥¼ êµ¬ë™í•˜ëŠ” ê²ƒì„ ì»´íŒŒì¼ íƒ€ì„ì— ë°©ì§€í•©ë‹ˆë‹¤.
</details>

<p><strong>3. APB Write ì „ì†¡ì˜ 2 Phaseë¥¼ ì„¤ëª…í•˜ì„¸ìš”.</strong> (11.1)</p>
<details>
<summary>ì •ë‹µ í™•ì¸</summary>
â‘  Setup Phase: `psel=1, penable=0`ìœ¼ë¡œ ìŠ¬ë ˆì´ë¸Œë¥¼ ì„ íƒí•˜ê³ , `pwrite`, `paddr`, `pwdata`ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤. â‘¡ Access Phase: `penable=1`ë¡œ ì „ì†¡ì„ í™œì„±í™”í•©ë‹ˆë‹¤. ìŠ¬ë ˆì´ë¸Œê°€ `pready=1`ì„ ì‘ë‹µí•˜ë©´ ì „ì†¡ì´ ì™„ë£Œë©ë‹ˆë‹¤. Writeì˜ ê²½ìš° ìŠ¬ë ˆì´ë¸Œê°€ ì´ ì‹œì ì— ë°ì´í„°ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.
</details>

<p><strong>4. BFM íŒ¨í„´ì´ ì§ì ‘ ì‹ í˜¸ ëŒ€ì…ë³´ë‹¤ ìœ ë¦¬í•œ ì ì€?</strong> (11.4)</p>
<details>
<summary>ì •ë‹µ í™•ì¸</summary>
í”„ë¡œí† ì½œ í–‰ìœ„ë¥¼ taskë¡œ ìº¡ìŠí™”í•˜ì—¬ ì¬ì‚¬ìš©ì„±ì„ ë†’ì…ë‹ˆë‹¤. `drive_transfer()` í•˜ë‚˜ì— APB í”„ë¡œí† ì½œ ì „ì²´ë¥¼ êµ¬í˜„í•˜ë©´, ë‹¤ì–‘í•œ ì‹œí€€ìŠ¤ì—ì„œ "ë¬´ì—‡ì„ ë³´ë‚¼ê¹Œ"ë§Œ ê²°ì •í•˜ê³  "ì–´ë–»ê²Œ ë³´ë‚¼ê¹Œ"ëŠ” BFMì— ìœ„ì„í•©ë‹ˆë‹¤. í”„ë¡œí† ì½œ ì‚¬ì–‘ì´ ë³€ê²½ë˜ì–´ë„ BFM taskë§Œ ìˆ˜ì •í•˜ë©´ ë©ë‹ˆë‹¤.
</details>

<p><strong>5. <code>counter_agent</code>ì™€ <code>apb_agent</code>ì˜ UVM êµ¬ì¡°ì  ì°¨ì´ì ì€?</strong> (11.5)</p>
<details>
<summary>ì •ë‹µ í™•ì¸</summary>
UVM êµ¬ì¡°ì—ëŠ” ì°¨ì´ê°€ ì—†ìŠµë‹ˆë‹¤. ë‘˜ ë‹¤ `uvm_agent`ë¥¼ ìƒì†í•˜ê³ , `build_phase`ì—ì„œ ë“œë¼ì´ë²„/ëª¨ë‹ˆí„°/ì‹œí€€ì„œë¥¼ ìƒì„±í•˜ë©°, `connect_phase`ì—ì„œ í¬íŠ¸ë¥¼ ì—°ê²°í•©ë‹ˆë‹¤. ë°”ë€ ê²ƒì€ ë‚´ë¶€ ì»´í¬ë„ŒíŠ¸ì˜ íƒ€ì…(`counter_driver` â†’ `apb_driver`)ê³¼ í”„ë¡œí† ì½œ ë¡œì§ë¿ì…ë‹ˆë‹¤.
</details>

<p><strong>6. APB ìŠ¤ì½”ì–´ë³´ë“œì˜ Reference Modelì€ ì–´ë–»ê²Œ ë™ì‘í•˜ë‚˜ìš”?</strong> (11.6)</p>
<details>
<summary>ì •ë‹µ í™•ì¸</summary>
ë‚´ë¶€ì— `ref_mem[0:15]` ë©”ëª¨ë¦¬ ë°°ì—´ì„ ìœ ì§€í•©ë‹ˆë‹¤. Write íŠ¸ëœì­ì…˜ì„ ìˆ˜ì‹ í•˜ë©´ `ref_mem[addr] = wdata`ë¡œ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤. Read íŠ¸ëœì­ì…˜ì„ ìˆ˜ì‹ í•˜ë©´ `ref_mem[addr]`ì˜ ê°’ê³¼ DUTê°€ ì‘ë‹µí•œ `rdata`ë¥¼ ë¹„êµí•©ë‹ˆë‹¤. ë¶ˆì¼ì¹˜ ì‹œ `UVM_ERROR`ë¥¼ ë³´ê³ í•©ë‹ˆë‹¤.
</details>

<h3 id="11-7-2-ì—°ìŠµë¬¸ì œ">11.7.2 ì—°ìŠµë¬¸ì œ</h3>
<p><strong>ì—°ìŠµ 11-1 (ê¸°ë³¸)</strong>: APB Random ì‹œí€€ìŠ¤ ì‘ì„±</p>
<p>ëœë¤ ì£¼ì†Œì— ëœë¤ ë°ì´í„°ë¥¼ ì“°ê³  ì½ëŠ” ì‹œí€€ìŠ¤ë¥¼ ì‘ì„±í•˜ì„¸ìš”. <code>num_transactions</code> íŒŒë¼ë¯¸í„°ë¡œ ë°˜ë³µ íšŸìˆ˜ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.</p>
<details>
<summary>íŒíŠ¸</summary>

<pre><code class="hljs language-systemverilog"><span class="hljs-keyword">class</span> apb_random_seq <span class="hljs-keyword">extends</span> uvm_sequence <span class="hljs-variable">#(apb_seq_item)</span>;
  <span class="hljs-keyword">int</span> num_transactions = <span class="hljs-number">20</span>;

  <span class="hljs-keyword">task</span> body();
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; num_transactions; i++) <span class="hljs-keyword">begin</span>
      <span class="hljs-comment">// Write: randomize()ë¡œ addr, data ìƒì„±</span>
      <span class="hljs-comment">// Read: ê°™ì€ addrì—ì„œ ì½ê¸°</span>
    <span class="hljs-keyword">end</span>
  <span class="hljs-keyword">endtask</span>
<span class="hljs-keyword">endclass</span>
</code></pre></details>

<p><strong>ì—°ìŠµ 11-2 (ì¤‘ê¸‰)</strong>: Wait State ì²˜ë¦¬ ì¶”ê°€</p>
<p>DUTì˜ <code>pready</code>ê°€ í•­ìƒ 1ì´ ì•„ë‹Œ ê²½ìš°ë¥¼ ì²˜ë¦¬í•˜ë„ë¡ ë“œë¼ì´ë²„ë¥¼ ìˆ˜ì •í•˜ì„¸ìš”. <code>pready</code>ê°€ 0ì´ë©´ Access Phaseë¥¼ ì—°ì¥í•´ì•¼ í•©ë‹ˆë‹¤.</p>
<details>
<summary>íŒíŠ¸</summary>
`drive_transfer()` taskì—ì„œ Access Phase ë¶€ë¶„ì„ ìˆ˜ì •í•©ë‹ˆë‹¤. `penable=1` í›„ `while(vif.drv_cb.pready !== 1'b1) @(vif.drv_cb);`ë¡œ ëŒ€ê¸°í•©ë‹ˆë‹¤. ì´ë¯¸ ì½”ë“œì— í¬í•¨ë˜ì–´ ìˆìœ¼ë‚˜, DUT ì¸¡ì—ì„œ `pready`ë¥¼ ì§€ì—°ì‹œí‚¤ëŠ” í…ŒìŠ¤íŠ¸ë¥¼ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤.
</details>

<p><strong>ì—°ìŠµ 11-3 (ë„ì „)</strong>: APB Coverage ìˆ˜ì§‘ê¸° ì‘ì„±</p>
<p>Ch.8ì—ì„œ ë°°ìš´ <code>uvm_subscriber</code> íŒ¨í„´ì„ ì‚¬ìš©í•˜ì—¬ APB ì»¤ë²„ë¦¬ì§€ ìˆ˜ì§‘ê¸°ë¥¼ ì‘ì„±í•˜ì„¸ìš”. ë‹¤ìŒ í•­ëª©ì„ ì»¤ë²„í•´ì•¼ í•©ë‹ˆë‹¤:</p>
<ul>
<li><code>cp_write</code>: Write/Read ë¶„í¬</li>
<li><code>cp_addr</code>: ì ‘ê·¼ëœ ì£¼ì†Œ ë²”ìœ„ (0~15)</li>
<li><code>cx_write_addr</code>: Write/Read Ã— ì£¼ì†Œ ì¡°í•©</li>
</ul>
<details>
<summary>íŒíŠ¸</summary>

<pre><code class="hljs language-systemverilog"><span class="hljs-keyword">class</span> apb_coverage <span class="hljs-keyword">extends</span> uvm_subscriber <span class="hljs-variable">#(apb_seq_item)</span>;
  <span class="hljs-keyword">covergroup</span> apb_cg;
    cp_write: <span class="hljs-keyword">coverpoint</span> item<span class="hljs-variable">.write</span> { <span class="hljs-keyword">bins</span> wr = {<span class="hljs-number">1</span>}; <span class="hljs-keyword">bins</span> rd = {<span class="hljs-number">0</span>}; }
    cp_addr:  <span class="hljs-keyword">coverpoint</span> item<span class="hljs-variable">.addr</span>  { <span class="hljs-keyword">bins</span> addrs[] = {[<span class="hljs-number">0</span>:<span class="hljs-number">15</span>]}; }
    cx_write_addr: <span class="hljs-keyword">cross</span> cp_write, cp_addr;
  <span class="hljs-keyword">endgroup</span>
  <span class="hljs-comment">// write() í•¨ìˆ˜ì—ì„œ apb_cg.sample() í˜¸ì¶œ</span>
<span class="hljs-keyword">endclass</span>
</code></pre></details>

<h3 id="11-7-3-ì´-ì±•í„°ì—ì„œ-ë°°ìš´-ê²ƒ">11.7.3 ì´ ì±•í„°ì—ì„œ ë°°ìš´ ê²ƒ</h3>
<p>ì´ ì±•í„°ì—ì„œ êµ¬ì¶•í•œ APB ê²€ì¦ í™˜ê²½ì˜ ì „ì²´ íŒŒì¼ êµ¬ì¡°ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤:</p>
<pre><code>apb_verification/
â”œâ”€â”€ rtl/
â”‚   â””â”€â”€ apb_slave_memory.sv    â† DUT (16 x 8-bit ë ˆì§€ìŠ¤í„°)
â”œâ”€â”€ tb/
â”‚   â”œâ”€â”€ apb_if.sv              â† ì¸í„°í˜ì´ìŠ¤ (clocking block + modport)
â”‚   â”œâ”€â”€ apb_seq_item.sv        â† íŠ¸ëœì­ì…˜ (addr, data, write)
â”‚   â”œâ”€â”€ apb_driver.sv          â† ë“œë¼ì´ë²„ (BFM: drive_transfer)
â”‚   â”œâ”€â”€ apb_monitor.sv         â† ëª¨ë‹ˆí„° (í”„ë¡œí† ì½œ ê´€ì°°)
â”‚   â”œâ”€â”€ apb_agent.sv           â† ì—ì´ì „íŠ¸ (ë“œë¼ì´ë²„ + ëª¨ë‹ˆí„° + ì‹œí€€ì„œ)
â”‚   â”œâ”€â”€ apb_scoreboard.sv      â† ìŠ¤ì½”ì–´ë³´ë“œ (ref_mem ëª¨ë¸)
â”‚   â”œâ”€â”€ apb_env.sv             â† í™˜ê²½ (ì—ì´ì „íŠ¸ + ìŠ¤ì½”ì–´ë³´ë“œ)
â”‚   â”œâ”€â”€ apb_base_test.sv       â† ë² ì´ìŠ¤ í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ apb_sequences.sv       â† ì‹œí€€ìŠ¤ (write, read, write_read, full)
â”‚   â””â”€â”€ tb_top.sv              â† í…ŒìŠ¤íŠ¸ë²¤ì¹˜ top
â””â”€â”€ sim/
    â””â”€â”€ run.do                 â† ì‹œë®¬ë ˆì´ì…˜ ìŠ¤í¬ë¦½íŠ¸
</code></pre><p>ì´ êµ¬ì¡°ëŠ” Ch.5~10ì—ì„œ ë§Œë“  4ë¹„íŠ¸ ì¹´ìš´í„° í™˜ê²½ê³¼ <strong>íŒŒì¼ ë‹¨ìœ„ë¡œ 1:1 ëŒ€ì‘</strong>ë©ë‹ˆë‹¤. Part 3ì˜ ë‚˜ë¨¸ì§€ ì±•í„°ì—ì„œë„ ì´ APB í™˜ê²½ì„ ê³„ì† í™•ì¥í•´ ë‚˜ê°‘ë‹ˆë‹¤.</p>
<h3 id="11-7-4-ë‹¤ìŒ-ì¥-ë¯¸ë¦¬ë³´ê¸°">11.7.4 ë‹¤ìŒ ì¥ ë¯¸ë¦¬ë³´ê¸°</h3>
<p>Chapter 12ì—ì„œëŠ” **ë ˆì§€ìŠ¤í„° ëª¨ë¸(RAL)**ì„ ë°°ì›ë‹ˆë‹¤. ì´ ì±•í„°ì—ì„œ êµ¬ì¶•í•œ APB ì¸í„°í˜ì´ìŠ¤ ìœ„ì— UVM RAL(Register Abstraction Layer)ì„ ì˜¬ë ¤, ë ˆì§€ìŠ¤í„°ì˜ í•„ë“œë³„ ì ‘ê·¼, ìë™ ì½ê¸°/ì“°ê¸° í…ŒìŠ¤íŠ¸, ë°±ë„ì–´ ì ‘ê·¼ ë“±ì„ êµ¬í˜„í•©ë‹ˆë‹¤. APB ì—ì´ì „íŠ¸ê°€ RALì˜ &quot;ë‹¤ë¦¬&quot; ì—­í• ì„ í•˜ë©°, ë ˆì§€ìŠ¤í„° ê²€ì¦ì´ í¬ê²Œ ìë™í™”ë©ë‹ˆë‹¤.</p>
<p><strong>Part 3 ë¡œë“œë§µ:</strong></p>
<table>
<thead>
<tr>
<th>ì±•í„°</th>
<th>ì£¼ì œ</th>
<th>ì´ ì±•í„°ì™€ì˜ ê´€ê³„</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Ch.11</strong></td>
<td>ì¸í„°í˜ì´ìŠ¤ì™€ BFM</td>
<td>âœ… ì§€ê¸ˆ ì—¬ê¸°! APB ì—ì´ì „íŠ¸ êµ¬ì¶•</td>
</tr>
<tr>
<td><strong>Ch.12</strong></td>
<td>ë ˆì§€ìŠ¤í„° ëª¨ë¸ (RAL)</td>
<td>APB ì—ì´ì „íŠ¸ ìœ„ì— RAL ê³„ì¸µ ì¶”ê°€</td>
</tr>
<tr>
<td><strong>Ch.13</strong></td>
<td>ê³ ê¸‰ ì‹œí€€ìŠ¤</td>
<td>APB ì‹œí€€ìŠ¤ë¥¼ ê°€ìƒ ì‹œí€€ìŠ¤ë¡œ í™•ì¥</td>
</tr>
<tr>
<td><strong>Ch.14</strong></td>
<td>ê²€ì¦ ìë™í™”</td>
<td>APB í™˜ê²½ì— ìë™í™” ì¸í”„ë¼ êµ¬ì¶•</td>
</tr>
<tr>
<td><strong>Ch.15</strong></td>
<td>í”„ë¡œì íŠ¸ ì¢…í•©</td>
<td>ì „ì²´ ê²€ì¦ í™˜ê²½ í†µí•© ë° ë¦¬ë·°</td>
</tr>
</tbody></table>
<blockquote>
<p>ğŸ’¡ <strong>í•µì‹¬ ë©”ì‹œì§€</strong>: ì´ ì±•í„°ì—ì„œ ë§Œë“  APB ì—ì´ì „íŠ¸ì™€ ê²€ì¦ í™˜ê²½ì´ Part 3 ì „ì²´ì˜ <strong>ê¸°ë°˜</strong>ì´ ë©ë‹ˆë‹¤. ê° ì±•í„°ì—ì„œ ìƒˆë¡œìš´ UVM ê¸°ëŠ¥ì„ í•˜ë‚˜ì”© ì¶”ê°€í•˜ë©°, ì‹¤ë¬´ ìˆ˜ì¤€ì˜ ê²€ì¦ í™˜ê²½ì„ ì™„ì„±í•´ ë‚˜ê°‘ë‹ˆë‹¤.</p>
</blockquote>

    <nav class="chapter-nav"><a href="chapter-10-final.html" class="nav-prev">
      <span class="nav-label">ì´ì „ ì±•í„°</span>
      <span class="nav-title">Ch.10 ë””ë²„ê¹… ê¸°ë²•</span>
    </a><a href="chapter-12-final.html" class="nav-next">
      <span class="nav-label">ë‹¤ìŒ ì±•í„°</span>
      <span class="nav-title">Ch.12 VIP í™œìš©</span>
    </a></nav>
  </div>

  <footer class="book-footer">
    <p>íŒ¹ë¦¬ìŠ¤ ê²€ì¦ ì—”ì§€ë‹ˆì–´ê°€ ë˜ê¸° ìœ„í•œ UVM ì™„ì „ì •ë³µ</p>
    <p>Published by UVM Book Publisher Agent</p>
  </footer>

  <!-- Back to Top Button -->
  <button class="back-to-top" id="backToTop" onclick="window.scrollTo({top:0,behavior:'smooth'})">â†‘</button>

  <script>
    // Reading progress bar
    window.addEventListener('scroll', () => {
      const h = document.documentElement;
      const pct = (h.scrollTop / (h.scrollHeight - h.clientHeight)) * 100;
      document.getElementById('progressBar').style.width = pct + '%';
      document.getElementById('backToTop').classList.toggle('visible', h.scrollTop > 400);
    });

    // Language labels for code blocks
    document.querySelectorAll('pre').forEach(pre => {
      const code = pre.querySelector('code');
      if (code) {
        const cls = code.className || '';
        const m = cls.match(/language-(\w+)/);
        if (m) {
          const map = {
            systemverilog:'SystemVerilog', sv:'SystemVerilog', verilog:'Verilog',
            bash:'Bash', shell:'Shell', tcl:'TCL', makefile:'Makefile',
            python:'Python', javascript:'JavaScript', text:'Output'
          };
          pre.setAttribute('data-lang', map[m[1]] || m[1]);
        }
      }
    });

    // Smart labels for plain code blocks
    document.querySelectorAll('pre code:not([class*="language-"])').forEach(code => {
      const pre = code.parentElement;
      if (!pre.getAttribute('data-lang')) {
        const t = code.textContent || '';
        if (t.includes('UVM_INFO') || t.includes('UVM_WARNING')) {
          pre.setAttribute('data-lang', 'Simulation Output');
        } else if (t.includes('[ì±„ìš©') || t.includes('í•„ìˆ˜ ìê²©')) {
          pre.setAttribute('data-lang', '');
        } else if (t.includes('Step') || t.includes('íŒ¨ë„') || t.includes('í¸ì§‘ê¸°')) {
          pre.setAttribute('data-lang', 'Setup Guide');
        } else {
          pre.setAttribute('data-lang', 'Info');
        }
      }
    });

    // Smooth scroll for TOC links
    document.querySelectorAll('.toc a').forEach(a => {
      a.addEventListener('click', e => {
        e.preventDefault();
        const id = a.getAttribute('href').slice(1);
        const target = document.getElementById(id);
        if (target) target.scrollIntoView({ behavior: 'smooth', block: 'start' });
      });
    });
  </script>
</body>
</html>